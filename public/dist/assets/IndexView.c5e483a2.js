import{u as te,ak as ae,ae as ne,f as Q,g as h,r as b,o as d,h as M,i,a as r,b as n,z as P,t as u,F as L,k as z,d as O,p as o,al as oe,S as j,am as le,s as ie,x as G,c as _,y as ue,U as ce,A as re,m as H,B as me,ap as de,aq as ge}from"./index.94d0d825.js";import{a as y,_ as W}from"./BaseButton.607b4ca4.js";import{_ as be}from"./NotificationBar.da331500.js";import{C as fe}from"./CardBoxComponentEmpty.181cbc93.js";import{_ as J}from"./SectionTitleLineWithButton.21bf938c.js";import{C as K}from"./CardBoxModal.826e1893.js";import{b as N}from"./bussinesUnit.service.cac57935.js";import{_ as he}from"./FormField.d7b1190e.js";import{_ as pe}from"./FormCheckRadioGroup.d0dc92b9.js";import{B as ve}from"./Breadcrumb.e522eb9b.js";import"./FormCheckRadio.6b119c24.js";const $e=n("th",null,null,-1),ke=["onClick"],_e=["data-label"],Ce=["data-label"],Ue=["data-label"],we=["data-label"],Pe={class:"before:hidden lg:w-1 whitespace-nowrap"},ye={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Be={__name:"BusinessUnitTableView",props:{checkable:Boolean,checkDelete:Boolean},emits:["changePage","confirm","sort"],setup(B,{emit:$}){const{t:c}=te(),g=ae(),D=ne(),m=Q(),C=h(()=>m.businessUnit.unidadesNegocio),I=h(()=>m.businessUnit.total),U=b(!1),k=b(!1),E=h(()=>m.businessUnit.perPage),f=h(()=>m.businessUnit.page);b([]);const p=b([]),F=h(()=>C.value),a=(e="")=>({0:"inactive",1:"active",2:"deleted"})[e],l=b(!1),v=e=>{l.value=!l.value,$("sort",e,l.value)},w=h(()=>Math.ceil(I.value/E.value)),V=h(()=>+f.value),S=h(()=>{const e=[];for(let s=0;s<w.value;s++)e.push(s);return e}),T=e=>{$("changePage",e)},q=e=>{D.push({name:"BusinessUnitUpdate",params:{id:e}})},X=e=>p.value=e,R=()=>{const{nombre:e}=p.value;return e},Y=c("message.bussinesUnit.deleted.success"),Z=async()=>{x().then(()=>{g.success(Y),$("changePage",f.value)}).catch(e=>{var s;g.error(`${c("message.bussinesUnit.deleted.error")} ${(s=e==null?void 0:e.response)==null?void 0:s.data.msg}`)})},x=()=>{const{_id:e}=p.value;return N.delete(e)},ee=()=>{const{_id:e}=p.value;N.restore(e).then(()=>{g.success(c("message.bussinesUnit.restore.success")),$("changePage",f.value)}).catch(s=>{var t;g.error(`${c("message.bussinesUnit.restore.error")} ${(t=s==null?void 0:s.response)==null?void 0:t.data.msg}`)})};return(e,s)=>(d(),M(L,null,[i(K,{modelValue:k.value,"onUpdate:modelValue":s[0]||(s[0]=t=>k.value=t),title:e.$t("message.pleaseConfirm"),button:"danger",onConfirm:Z,"has-cancel":""},{default:r(()=>[n("strong",null,[P(u(e.$t("message.bussinesUnit.deleted.question"))+" ",1),n("b",null,u(R()),1)]),P(" ? ")]),_:1},8,["modelValue","title"]),i(K,{modelValue:U.value,"onUpdate:modelValue":s[1]||(s[1]=t=>U.value=t),title:e.$t("message.pleaseConfirm"),onConfirm:ee},{default:r(()=>[n("strong",null,[P(u(e.$t("message.bussinesUnit.restore.question"))+" ",1),n("b",null,u(R()),1)]),P(" ? ")]),_:1},8,["modelValue","title"]),n("table",null,[n("thead",null,[n("tr",null,[n("th",{onClick:s[2]||(s[2]=t=>v("codigo"))},u(e.$t("message.bussinesUnit.code")),1),n("th",{onClick:s[3]||(s[3]=t=>v("nombre"))},u(e.$t("message.bussinesUnit.name")),1),n("th",{onClick:s[4]||(s[4]=t=>v("siglas"))},u(e.$t("message.bussinesUnit.acronyms")),1),n("th",{onClick:s[5]||(s[5]=t=>v("estado"))},u(e.$t("message.bussinesUnit.status")),1),$e])]),n("tbody",null,[(d(!0),M(L,null,z(o(F),(t,se)=>(d(),M("tr",{key:t._id,onClick:A=>X(t)},[n("td",{"data-label":e.$t("message.bussinesUnit.code")},u(t.codigo),9,_e),n("td",{"data-label":e.$t("message.bussinesUnit.name")},u(t.nombre),9,Ce),n("td",{"data-label":e.$t("message.bussinesUnit.acronyms")},u(t.siglas),9,Ue),n("td",{"data-label":e.$t("message.branch.status")},u(e.$t(`message.bussinesUnit.statuses.${a(t.estado)}`)),9,we),n("td",Pe,[i(G,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[O(i(y,{color:"success",icon:o(oe),messageTooltip:o(c)("message.restore"),small:"",onClick:s[6]||(s[6]=A=>U.value=!0)},null,8,["icon","messageTooltip"]),[[j,B.checkDelete&&t.estado===2]]),O(i(y,{color:"info",icon:o(le),messageTooltip:o(c)("message.edit"),small:"",onClick:A=>q(t._id)},null,8,["icon","messageTooltip","onClick"]),[[j,!B.checkDelete&&t.estado!==2]]),O(i(y,{color:"danger",icon:o(ie),messageTooltip:o(c)("message.delete"),small:"",onClick:s[7]||(s[7]=A=>k.value=!0)},null,8,["icon","messageTooltip"]),[[j,!B.checkDelete&&t.estado!==2]])]),_:2},1024)])],8,ke))),128))])]),n("div",ye,[i(ue,null,{default:r(()=>[i(G,null,{default:r(()=>[(d(!0),M(L,null,z(o(S),t=>(d(),_(y,{key:t,active:t===o(f)-1,label:t+1,color:t===o(f)?"lightDark":"whiteDark",small:"",onClick:se=>T(t+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),n("small",null,"Page "+u(o(V))+" of "+u(o(w)),1)]),_:1})])],64))}},Le={__name:"IndexView",setup(B){const $=b([{name:"Inicio"}]),c=Q(),g=b(1),D=b(10),m=ce({switch:[]}),C=a=>{N.index(a).then(l=>{c.businessUnit=l,g.value=l.page,D.value=l.perPage})};C({page:g.value});const I=a=>{p({page:a})},U=(a,l)=>{F({sortBy:a,sortDesc:l})},k=b(!1),E=()=>{p(g.value),k.value=m.switch.length!==0},f=a=>{N.getDelete(a).then(l=>{c.businessUnit=l,g.value=l.page,D.value=l.perPage})},p=a=>{m.switch.length===0?C(a):f(a)},F=a=>{m.switch.length===0?C(a):f(a)};return(a,l)=>(d(),_(re,null,{default:r(()=>[i(me,null,{default:r(()=>{var v,w,V,S,T;return[i(J,{icon:o(de),title:a.$t("message.bussinesUnit.bussinesUnits")},{default:r(()=>[i(y,{to:{name:"BusinessUnitCreate"},icon:o(ge),label:a.$t("message.add_new"),color:"success",small:""},null,8,["icon","label"])]),_:1},8,["icon","title"]),i(ve,{items:$.value},null,8,["items"]),i(he,{label:""},{default:r(()=>[i(pe,{modelValue:m.switch,"onUpdate:modelValue":l[0]||(l[0]=q=>m.switch=q),name:"sample-switch",type:"switch",options:{one:"Mostrar registros eliminados"},onChange:E},null,8,["modelValue"])]),_:1}),(v=o(c))!=null&&v.businessUnit?H("",!0):(d(),_(J,{key:0,icon:a.mdiTableOff,title:"Empty variation"},null,8,["icon"])),(w=o(c))!=null&&w.businessUnit?H("",!0):(d(),_(be,{key:1,color:"danger",icon:a.mdiTableOff},{default:r(()=>[n("b",null,u(a.$t("message.empty_table"))+".",1),P(" When there's nothing to show ")]),_:1},8,["icon"])),(T=(S=(V=o(c))==null?void 0:V.businessUnit)==null?void 0:S.unidadesNegocio)!=null&&T.length?(d(),_(W,{key:2,class:"mb-6","has-table":""},{default:r(()=>[i(Be,{checkDelete:k.value,onChangePage:I,onSort:U},null,8,["checkDelete"])]),_:1})):(d(),_(W,{key:3},{default:r(()=>[i(fe)]),_:1}))]}),_:1})]),_:1}))}};export{Le as default};
