import{u as A,ak as D,au as G,ae as E,r as k,g as H,ax as J,o as K,c as P,a as d,b,i as t,N as Q,d as W,_ as f,p as i,az as h,S as X,ar as C,j as Y}from"./index.94d0d825.js";import{r as Z,u as ee}from"./index.esm.5aa1a710.js";import{b as ae,a as L,_ as se}from"./BaseButton.607b4ca4.js";import{_ as v}from"./FormField.d7b1190e.js";import{b as oe}from"./bussinesUnit.service.cac57935.js";import{c as w}from"./categories.service.cb284bb6.js";const te={class:"container mx-auto"},le={class:"grid md:grid-cols-2 gap-2"},re={style:{display:"flex","justify-content":"space-between"}},ne={__name:"FormView",props:{path:"",saveLabel:"",state:{}},setup($){const g=$,{t:u}=A(),N=D(),M=G(),U=E();let y=k([]);const V=[{id:1,label:u("message.category.statuses.active")},{id:0,label:u("message.category.statuses.inactive")}],s=k({_id:"",codigo:"00",nombre:"",siglas:"",unidadNegocio:y.value,estado:V[0]}),O=H(()=>({nombre:{required:Z}})),_=ee(O,s);J(async()=>{var l;let a=await oe.allBussinesUnitGet();const e=(a==null?void 0:a.data.unidadesNegocio)||[];if(y.value=e.map(o=>({id:o._id,label:o.nombre})),g.path==="update"){const o=await w.read(M.params);s.value=o.data,s.value.unidadNegocio=R((l=o.data)==null?void 0:l.unidadNegocio),s.value.estado=V.filter(r=>r.id===o.data.estado)[0]}});const R=a=>({id:a._id,label:a.nombre}),j=(a,e={})=>{console.log(a)},x=a=>{const{_id:e,codigo:l,nombre:o,siglas:r,unidadNegocio:c,estado:p}=a.value,m={_id:e,codigo:l,nombre:o,siglas:r,unidadNegocio:c.id,estado:p.id};return console.log(m),g.path==="create"?w.create(m):w.update(m)},z=g.path==="create"?u("message.category.created.success"):u("message.category.updated.success"),I=g.path==="create"?u("message.category.created.error"):u("message.category.updated.error"),T=async()=>{await _.value.$validate()?x(s).then(()=>{N.success(z),U.push("/setup/categories")}).catch(e=>{var l,o,r;if((o=(l=e.response)==null?void 0:l.data)!=null&&o.msg){N.error(`${I} ${e.response.data.msg}`);return}if((r=e.response.data)!=null&&r.errors){const c=e.response.data.errors;for(let p of c);}}):console.log("error")},q=()=>U.push("/setup/categories");return(a,e)=>(K(),P(se,{isForm:"",onSubmit:Y(T,["prevent"])},{footer:d(()=>[b("div",re,[t(L,{label:a.$t(`message.${g.saveLabel}`),type:"submit",color:"success"},null,8,["label"]),t(L,{label:a.$t("message.return"),color:"info",onClick:e[5]||(e[5]=l=>q())},null,8,["label"])])]),default:d(()=>{var l,o,r,c,p,m,S,B,F;return[b("div",null,[b("div",te,[b("div",{class:Q($.path!=="create"?"grid md:grid-cols-3 gap-3":"grid md:grid-cols-2 gap-3")},[W(t(v,{label:a.$t("message.category.code")},{default:d(()=>[t(f,{modelValue:s.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=n=>s.value.codigo=n),icon:i(h),readonly:"true"},null,8,["modelValue","icon"])]),_:1},8,["label"]),[[X,$.path!=="create"]]),t(v,{label:a.$t("message.category.name"),help:(r=(o=(l=i(_))==null?void 0:l.nombre)==null?void 0:o.$errors[0])==null?void 0:r.$message},{default:d(()=>[t(f,{modelValue:s.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=n=>s.value.nombre=n),icon:i(h)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(v,{label:a.$t("message.category.acronyms"),help:(m=(p=(c=i(_))==null?void 0:c.siglas)==null?void 0:p.$errors[0])==null?void 0:m.$message},{default:d(()=>[t(f,{modelValue:s.value.siglas,"onUpdate:modelValue":e[2]||(e[2]=n=>s.value.siglas=n),icon:i(h)},null,8,["modelValue","icon"])]),_:1},8,["label","help"])],2),b("div",le,[t(v,{label:a.$t("message.category.businessUnit")},{default:d(()=>[t(f,{modelValue:s.value.unidadNegocio,"onUpdate:modelValue":e[3]||(e[3]=n=>s.value.unidadNegocio=n),icon:i(C),options:i(y),onOnSelectChange:j},null,8,["modelValue","icon","options"])]),_:1},8,["label"]),t(v,{label:a.$t("message.category.status"),help:(F=(B=(S=i(_))==null?void 0:S.estado)==null?void 0:B.$errors[0])==null?void 0:F.$message},{default:d(()=>[t(f,{modelValue:s.value.estado,"onUpdate:modelValue":e[4]||(e[4]=n=>s.value.estado=n),icon:i(C),options:V},null,8,["modelValue","icon"])]),_:1},8,["label","help"])])])])]}),_:1},8,["onSubmit"]))}},pe=ae(ne,[["__scopeId","data-v-9ff06a92"]]);export{pe as F};
