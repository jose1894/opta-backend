import{u as ae,ak as oe,ae as le,f as X,g as h,r as f,o as g,h as I,i,a as c,b as o,z as y,t as r,F as L,k as G,d as O,p as n,al as ne,S as j,am as ie,s as re,x as H,c as k,y as ce,U as ue,A as me,m as W,B as de,ap as ge,aq as fe}from"./index.94d0d825.js";import{a as S,_ as J}from"./BaseButton.607b4ca4.js";import{_ as pe}from"./NotificationBar.da331500.js";import{_ as he}from"./FormCheckRadioGroup.d0dc92b9.js";import{C as ve}from"./CardBoxComponentEmpty.181cbc93.js";import{_ as K}from"./SectionTitleLineWithButton.21bf938c.js";import{s as E}from"./states.services.4056bce2.js";import{_ as $e}from"./FormField.d7b1190e.js";import{C as Q}from"./CardBoxModal.826e1893.js";import{B as be}from"./Breadcrumb.e522eb9b.js";import"./FormCheckRadio.6b119c24.js";const ke=o("th",null,null,-1),_e=["onClick"],Ce=["data-label"],Pe=["data-label"],we=["data-label"],ye=["data-label"],Se={class:"before:hidden lg:w-1 whitespace-nowrap"},De={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Ve={__name:"StateTable",props:{checkable:Boolean,checkDelete:Boolean},emits:["changePage","confirm","sort"],setup(D,{emit:m}){const{t:u}=ae(),v=oe(),N=le(),d=X(),V=h(()=>d.states.estados),_=h(()=>d.states.total),C=f(!1),P=f(!1),F=h(()=>d.states.perPage),p=h(()=>d.states.page);f([]);const B=h(()=>V.value),b=f([]),a=(e="")=>({0:"inactive",1:"active",2:"deleted"})[e],l=f(!1),$=e=>{l.value=!l.value,m("sort",e,l.value)},w=h(()=>Math.ceil(_.value/F.value)),T=h(()=>+p.value),M=h(()=>{const e=[];for(let s=0;s<w.value;s++)e.push(s);return e}),U=e=>{m("changePage",e)},q=e=>{N.push({name:"StatesUpdate",params:{id:e}})},Y=e=>b.value=e,R=()=>{const{nombre:e}=b.value;return e},Z=u("message.state.deleted.success"),x=async()=>{ee().then(()=>{v.success(Z),m("changePage",p.value)}).catch(e=>{var s;v.error(`${u("message.state.deleted.error")} ${(s=e==null?void 0:e.response)==null?void 0:s.data.msg}`)})},ee=()=>{const{_id:e}=b.value;return E.delete(e)},te=()=>{const{_id:e}=b.value;E.restore(e).then(()=>{v.success(u("message.state.restore.success")),m("changePage",p.value)}).catch(s=>{var t;v.error(`${u("message.state.restore.error")} ${(t=s==null?void 0:s.response)==null?void 0:t.data.msg}`)})};return(e,s)=>(g(),I(L,null,[i(Q,{modelValue:P.value,"onUpdate:modelValue":s[0]||(s[0]=t=>P.value=t),title:e.$t("message.pleaseConfirm"),button:"danger",onConfirm:x,"has-cancel":""},{default:c(()=>[o("strong",null,[y(r(e.$t("message.state.deleted.question"))+" ",1),o("b",null,r(R()),1)]),y(" ? ")]),_:1},8,["modelValue","title"]),i(Q,{modelValue:C.value,"onUpdate:modelValue":s[1]||(s[1]=t=>C.value=t),title:e.$t("message.pleaseConfirm"),onConfirm:te},{default:c(()=>[o("strong",null,[y(r(e.$t("message.state.restore.question"))+" ",1),o("b",null,r(R()),1)]),y(" ? ")]),_:1},8,["modelValue","title"]),o("table",null,[o("thead",null,[o("tr",null,[o("th",{onClick:s[2]||(s[2]=t=>$("codigo"))},r(e.$t("message.state.code")),1),o("th",{onClick:s[3]||(s[3]=t=>$("nombre"))},r(e.$t("message.state.name")),1),o("th",{onClick:s[4]||(s[4]=t=>$("codigo"))},r(e.$t("message.state.country")),1),o("th",{onClick:s[5]||(s[5]=t=>$("estado"))},r(e.$t("message.state.status")),1),ke])]),o("tbody",null,[(g(!0),I(L,null,G(n(B),(t,se)=>{var z;return g(),I("tr",{key:t._id,onClick:A=>Y(t)},[o("td",{"data-label":e.$t("message.state.code")},r(t==null?void 0:t.codigo),9,Ce),o("td",{"data-label":e.$t("message.state.name")},r(t==null?void 0:t.nombre),9,Pe),o("td",{"data-label":e.$t("message.state.country")},r((z=t.pais)==null?void 0:z.nombre),9,we),o("td",{"data-label":e.$t("message.state.status")},r(e.$t(`message.state.statuses.${a(t.estado)}`)),9,ye),o("td",Se,[i(H,{type:"justify-start lg:justify-end","no-wrap":""},{default:c(()=>[O(i(S,{color:"success",icon:n(ne),messageTooltip:"t('message.restore')",small:"",onClick:s[6]||(s[6]=A=>C.value=!0)},null,8,["icon"]),[[j,D.checkDelete&&t.estado===2]]),O(i(S,{color:"info",icon:n(ie),messageTooltip:n(u)("message.edit"),small:"",onClick:A=>q(t._id)},null,8,["icon","messageTooltip","onClick"]),[[j,!D.checkDelete&&t.estado!==2]]),O(i(S,{color:"danger",icon:n(re),messageTooltip:n(u)("message.delete"),small:"",onClick:s[7]||(s[7]=A=>P.value=!0)},null,8,["icon","messageTooltip"]),[[j,!D.checkDelete&&t.estado!==2]])]),_:2},1024)])],8,_e)}),128))])]),o("div",De,[i(ce,null,{default:c(()=>[i(H,null,{default:c(()=>[(g(!0),I(L,null,G(n(M),t=>(g(),k(S,{key:t,active:t===n(p)-1,label:t+1,color:t===n(p)?"lightDark":"whiteDark",small:"",onClick:se=>U(t+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),o("small",null,"Page "+r(n(T))+" of "+r(n(w)),1)]),_:1})])],64))}},Oe={__name:"IndexView",setup(D){const m=X(),u=f(1),v=f(10),N=f([{name:"Inicio"}]),d=ue({switch:[]}),V=f(!1),_=a=>{E.index(a).then(l=>{m.states=l,u.value=l.page,v.value=l.perPage})};_({page:u.value});const C=()=>{B(u.value),V.value=d.switch.length!==0},P=a=>{B({page:a})},F=(a,l)=>{b({sortBy:a,sortDesc:l})},p=a=>{E.getDelete(a).then(l=>{m.states=l,u.value=l.page,v.value=l.perPage})},B=a=>{d.switch.length===0?_(a):p(a)},b=a=>{d.switch.length===0?_(a):p(a)};return(a,l)=>(g(),k(me,null,{default:c(()=>[i(de,null,{default:c(()=>{var $,w,T,M,U;return[i(K,{icon:n(ge),title:a.$t("message.state.states")},{default:c(()=>[i(S,{to:{name:"StatesCreate"},icon:n(fe),label:a.$t("message.add_new"),color:"success",small:""},null,8,["icon","label"])]),_:1},8,["icon","title"]),i(be,{items:N.value},null,8,["items"]),i($e,{label:""},{default:c(()=>[i(he,{modelValue:d.switch,"onUpdate:modelValue":l[0]||(l[0]=q=>d.switch=q),name:"sample-switch",type:"switch",options:{one:"Mostrar registros eliminados"},onChange:C},null,8,["modelValue"])]),_:1}),($=n(m))!=null&&$.states?W("",!0):(g(),k(K,{key:0,icon:a.mdiTableOff,title:"Empty variation"},null,8,["icon"])),(w=n(m))!=null&&w.states?W("",!0):(g(),k(pe,{key:1,color:"danger",icon:a.mdiTableOff},{default:c(()=>[o("b",null,r(a.$t("message.empty_table"))+".",1),y(" When there's nothing to show ")]),_:1},8,["icon"])),(U=(M=(T=n(m))==null?void 0:T.states)==null?void 0:M.estados)!=null&&U.length?(g(),k(J,{key:2,class:"mb-6","has-table":""},{default:c(()=>[i(Ve,{checkDelete:V.value,onChangePage:P,onSort:F},null,8,["checkDelete"])]),_:1})):(g(),k(J,{key:3},{default:c(()=>[i(ve)]),_:1}))]}),_:1})]),_:1}))}};export{Oe as default};
