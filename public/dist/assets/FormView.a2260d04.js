import{u as j,ak as z,au as D,ae as F,r as T,ax as q,g as x,o as I,c as O,a as c,b as w,i as o,N as A,d as E,_ as b,p as m,ay as G,S as H,az as J,ar as K,j as P}from"./index.94d0d825.js";import{a as S,_ as Q}from"./BaseButton.607b4ca4.js";import{_ as v}from"./FormField.d7b1190e.js";import{r as B,u as W}from"./index.esm.5aa1a710.js";import{i as y}from"./Industries.service.5e198b05.js";const X={style:{display:"flex","justify-content":"space-between"}},te={__name:"FormView",props:{path:"",saveLabel:"",country:{}},setup(p){const u=p,{t:n}=j(),$=z(),k=D(),h=F(),g=[{id:1,label:n("message.industry.statuses.active")},{id:0,label:n("message.industry.statuses.inactive")}],a=T({_id:"",codigo:"00",nombre:"",estado:g[0]}),C=s=>{const{_id:e,codigo:t,nombre:r,estado:l}=s.value,i={_id:e,codigo:t,nombre:r,estado:l.id};return u.path==="create"?y.create(i):y.update(i)};q(async()=>{if(u.path==="update"){const s=await y.read(k.params);a.value=s.data,a.value.estado=g.filter(e=>e.id===s.data.estado)[0]}});const M=x(()=>({nombre:{required:B},estado:{required:B}})),f=W(M,a),L=u.path==="create"?n("message.industry.created.success"):n("message.industry.updated.success"),N=u.path==="create"?n("message.industry.created.error"):n("message.industry.updated.error"),R=async()=>{await f.value.$validate()?C(a).then(()=>{$.success(L),h.push("/setup/industries")}).catch(e=>{var t,r;if((t=e.response.data)!=null&&t.msg){$.error(`${N} ${e.response.data.msg}`);return}if((r=e.response.data)!=null&&r.errors){const l=e.response.data.errors;for(let i of l);}}):console.log("error")},U=()=>h.push("/setup/industries");return(s,e)=>(I(),O(Q,{isForm:"",onSubmit:P(R,["prevent"])},{footer:c(()=>[w("div",X,[o(S,{label:s.$t(`message.${u.saveLabel}`),type:"submit",color:"success"},null,8,["label"]),o(S,{label:s.$t("message.return"),color:"info",onClick:e[3]||(e[3]=t=>U())},null,8,["label"])])]),default:c(()=>{var t,r,l,i,V,_;return[w("div",{class:A(p.path!=="create"?"grid md:grid-cols-3 gap-3":"grid md:grid-cols-2 gap-3")},[E(o(v,{label:s.$t("message.industry.code")},{default:c(()=>[o(b,{name:"codigo",modelValue:a.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=d=>a.value.codigo=d),icon:m(G),readonly:"true"},null,8,["modelValue","icon"])]),_:1},8,["label"]),[[H,p.path!=="create"]]),o(v,{label:s.$t("message.industry.name"),help:(l=(r=(t=m(f))==null?void 0:t.nombre)==null?void 0:r.$errors[0])==null?void 0:l.$message},{default:c(()=>[o(b,{modelValue:a.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=d=>a.value.nombre=d),icon:m(J)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),o(v,{label:s.$t("message.industry.status"),help:(_=(V=(i=m(f))==null?void 0:i.estado)==null?void 0:V.$errors[0])==null?void 0:_.$message},{default:c(()=>[o(b,{modelValue:a.value.estado,"onUpdate:modelValue":e[2]||(e[2]=d=>a.value.estado=d),icon:m(K),options:g},null,8,["modelValue","icon"])]),_:1},8,["label","help"])],2)]}),_:1},8,["onSubmit"]))}};export{te as _};
