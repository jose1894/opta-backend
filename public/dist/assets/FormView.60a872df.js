import{u as U,ak as z,au as F,ae as P,r as T,ax as q,g as x,o as D,c as I,a as d,b as y,i as t,N as O,d as A,_ as b,p as m,ay as E,S as G,az as H,ar as J,j as K}from"./index.2a5a620e.js";import{a as S,_ as Q}from"./BaseButton.cdd5c322.js";import{_ as v}from"./FormField.33193145.js";import{r as B,u as W}from"./index.esm.9bf57b6a.js";import{c as $}from"./cargos.service.6d6ba241.js";const X={style:{display:"flex","justify-content":"space-between"}},oe={__name:"FormView",props:{path:"",saveLabel:"",country:{}},setup(p){const c=p,{t:l}=U(),h=z(),j=F(),V=P(),g=[{id:1,label:l("message.cargo.statuses.active")},{id:0,label:l("message.cargo.statuses.inactive")}],s=T({_id:"",codigo:"00",nombre:"",estado:g[0]}),k=a=>{const{_id:e,codigo:o,nombre:r,estado:n}=a.value,i={_id:e,codigo:o,nombre:r,estado:n.id};return c.path==="create"?$.create(i):$.update(i)};q(async()=>{if(c.path==="update"){const a=await $.read(j.params);s.value=a.data,s.value.estado=g.filter(e=>e.id===a.data.estado)[0]}});const C=x(()=>({nombre:{required:B},estado:{required:B}})),f=W(C,s),M=c.path==="create"?l("message.cargo.created.success"):l("message.cargo.updated.success"),L=c.path==="create"?l("message.cargo.created.error"):l("message.cargo.updated.error"),N=async()=>{await f.value.$validate()?k(s).then(()=>{h.success(M),V.push("/setup/jobPositions")}).catch(e=>{var o,r;if((o=e.response.data)!=null&&o.msg){h.error(`${L} ${e.response.data.msg}`);return}if((r=e.response.data)!=null&&r.errors){const n=e.response.data.errors;for(let i of n);}}):console.log("error")},R=()=>V.push("/setup/jobPositions");return(a,e)=>(D(),I(Q,{isForm:"",onSubmit:K(N,["prevent"])},{footer:d(()=>[y("div",X,[t(S,{label:a.$t(`message.${c.saveLabel}`),type:"submit",color:"success"},null,8,["label"]),t(S,{label:a.$t("message.return"),color:"info",onClick:e[3]||(e[3]=o=>R())},null,8,["label"])])]),default:d(()=>{var o,r,n,i,_,w;return[y("div",{class:O(p.path!=="create"?"grid md:grid-cols-3 gap-4":"grid md:grid-cols-2 gap-4")},[A(t(v,{label:a.$t("message.cargo.code")},{default:d(()=>[t(b,{name:"codigo",modelValue:s.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=u=>s.value.codigo=u),icon:m(E)},null,8,["modelValue","icon"])]),_:1},8,["label"]),[[G,p.path!=="create"]]),t(v,{label:a.$t("message.cargo.name"),help:(n=(r=(o=m(f))==null?void 0:o.nombre)==null?void 0:r.$errors[0])==null?void 0:n.$message},{default:d(()=>[t(b,{modelValue:s.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=u=>s.value.nombre=u),icon:m(H)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(v,{label:a.$t("message.cargo.status"),help:(w=(_=(i=m(f))==null?void 0:i.estado)==null?void 0:_.$errors[0])==null?void 0:w.$message},{default:d(()=>[t(b,{modelValue:s.value.estado,"onUpdate:modelValue":e[2]||(e[2]=u=>s.value.estado=u),icon:m(J),options:g},null,8,["modelValue","icon"])]),_:1},8,["label","help"])],2)]}),_:1},8,["onSubmit"]))}};export{oe as _};
