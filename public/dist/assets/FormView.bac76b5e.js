import{u as N,ak as T,au as q,ae as z,r as I,ax as O,g as P,o as D,c as E,a as p,b as L,i as t,p as c,_ as g,ay as G,az as H,ar as J,j as K}from"./index.2a5a620e.js";import{a as k,_ as Q}from"./BaseButton.cdd5c322.js";import{_ as v}from"./FormField.33193145.js";import{r as $,m as W,u as X}from"./index.esm.9bf57b6a.js";import{p as b}from"./profileActions.service.f6ccb5d1.js";const Y={class:"grid md:grid-cols-3 gap-4"},Z={style:{display:"flex","justify-content":"space-between"}},re={__name:"FormView",props:{path:"",saveLabel:"",country:{}},setup(M){const d=M,{t:i}=N(),_=T(),S=q(),h=z(),f=[{id:1,label:i("message.cargo.statuses.active")},{id:0,label:i("message.cargo.statuses.inactive")}],a=I({_id:"",codigo:"00",descripcion:"",estado:f[0]}),x=s=>{const{_id:e,codigo:o,descripcion:r,estado:l}=s.value,n={_id:e,codigo:o,descripcion:r,estado:l.id};return d.path==="create"?b.create(n):b.update(n)};O(async()=>{if(d.path==="update"){const s=await b.read(S.params);a.value=s.data,a.value.estado=f.filter(e=>e.id===s.data.estado)[0]}});const C=P(()=>({codigo:{required:$,maxLength:W(3)},descripcion:{required:$},estado:{required:$}})),m=X(C,a),R=d.path==="create"?i("message.profileAction.created.success"):i("message.profileAction.updated.success"),U=d.path==="create"?i("message.profileAction.created.error"):i("message.profileAction.updated.error"),j=async()=>{await m.value.$validate()?x(a).then(()=>{_.success(R),h.push("/setup/profileActions")}).catch(e=>{var o,r;if((o=e.response.data)!=null&&o.msg){_.error(`${U} ${e.response.data.msg}`);return}if((r=e.response.data)!=null&&r.errors){const l=e.response.data.errors;for(let n of l);}}):console.log("error")},F=()=>h.push("/setup/profileActions");return(s,e)=>(D(),E(Q,{isForm:"",onSubmit:K(j,["prevent"])},{footer:p(()=>[L("div",Z,[t(k,{label:s.$t(`message.${d.saveLabel}`),type:"submit",color:"success"},null,8,["label"]),t(k,{label:s.$t("message.return"),color:"info",onClick:e[3]||(e[3]=o=>F())},null,8,["label"])])]),default:p(()=>{var o,r,l,n,V,A,y,w,B;return[L("div",Y,[t(v,{label:s.$t("message.profileAction.code"),help:(l=(r=(o=c(m))==null?void 0:o.codigo)==null?void 0:r.$errors[0])==null?void 0:l.$message},{default:p(()=>[t(g,{name:"codigo",modelValue:a.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value.codigo=u),icon:c(G)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(v,{label:s.$t("message.profileAction.description"),help:(A=(V=(n=c(m))==null?void 0:n.descripcion)==null?void 0:V.$errors[0])==null?void 0:A.$message},{default:p(()=>[t(g,{modelValue:a.value.descripcion,"onUpdate:modelValue":e[1]||(e[1]=u=>a.value.descripcion=u),icon:c(H)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(v,{label:s.$t("message.profileAction.status"),help:(B=(w=(y=c(m))==null?void 0:y.estado)==null?void 0:w.$errors[0])==null?void 0:B.$message},{default:p(()=>[t(g,{modelValue:a.value.estado,"onUpdate:modelValue":e[2]||(e[2]=u=>a.value.estado=u),icon:c(J),options:f},null,8,["modelValue","icon"])]),_:1},8,["label","help"])])]}),_:1},8,["onSubmit"]))}};export{re as _};
