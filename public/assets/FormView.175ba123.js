import{ag as N,ah as T,at as q,aa as z,y as O,au as A,I as D,o as E,c as G,w as m,j as C,a as t,d as M,B as g,u,C as b,av as H,aw as J,ax as K,z as P,g as Q}from"./index.e27aaed2.js";import{r as v,m as W,u as X}from"./index.esm.6263d8b1.js";import{p as $}from"./Professions.service.6b08311e.js";const Y={class:"grid md:grid-cols-3 gap-4"},Z={style:{display:"flex","justify-content":"space-between"}},oe={__name:"FormView",props:{path:"",saveLabel:"",country:{}},setup(S){const d=S,{t:n}=N(),h=T(),k=q(),V=z(),f=[{id:1,label:n("message.profession.statuses.active")},{id:0,label:n("message.profession.statuses.inactive")}],a=O({_id:"",codigo:"00",nombre:"",estado:f[0]}),x=s=>{const{_id:e,codigo:o,nombre:r,estado:l}=s.value,i={_id:e,codigo:o,nombre:r,estado:l.id};return d.path==="create"?$.create(i):$.update(i)};A(async()=>{if(d.path==="update"){const s=await $.read(k.params);a.value=s.data,a.value.estado=f.filter(e=>e.id===s.data.estado)[0]}});const R=()=>V.push("/setup/professions"),U=D(()=>({codigo:{required:v,maxLength:W(3)},nombre:{required:v},estado:{required:v}})),p=X(U,a),j=d.path==="create"?n("message.profession.created.success"):n("message.profession.updated.success"),F=d.path==="create"?n("message.profession.created.error"):n("message.profession.updated.error"),I=async()=>{await p.value.$validate()?x(a).then(()=>{h.success(j),V.push("/setup/professions")}).catch(e=>{var o,r;if((o=e.response.data)!=null&&o.msg){h.error(`${F} ${e.response.data.msg}`);return}if((r=e.response.data)!=null&&r.errors){const l=e.response.data.errors;for(let i of l);}}):console.log("error")};return(s,e)=>(E(),G(Q,{isForm:"",onSubmit:P(I,["prevent"])},{footer:m(()=>[C("div",Z,[t(M,{label:s.$t(`message.${d.saveLabel}`),type:"submit",color:"success"},null,8,["label"]),t(M,{label:s.$t("message.return"),color:"info",onClick:e[3]||(e[3]=o=>R())},null,8,["label"])])]),default:m(()=>{var o,r,l,i,_,w,y,B,L;return[C("div",Y,[t(g,{label:s.$t("message.profession.code"),help:(l=(r=(o=u(p))==null?void 0:o.codigo)==null?void 0:r.$errors[0])==null?void 0:l.$message},{default:m(()=>[t(b,{name:"codigo",modelValue:a.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=c=>a.value.codigo=c),icon:u(H)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(g,{label:s.$t("message.profession.name"),help:(w=(_=(i=u(p))==null?void 0:i.nombre)==null?void 0:_.$errors[0])==null?void 0:w.$message},{default:m(()=>[t(b,{modelValue:a.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=c=>a.value.nombre=c),icon:u(J)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(g,{label:s.$t("message.profession.status"),help:(L=(B=(y=u(p))==null?void 0:y.estado)==null?void 0:B.$errors[0])==null?void 0:L.$message},{default:m(()=>[t(b,{modelValue:a.value.estado,"onUpdate:modelValue":e[2]||(e[2]=c=>a.value.estado=c),icon:u(K),options:f},null,8,["modelValue","icon"])]),_:1},8,["label","help"])])]}),_:1},8,["onSubmit"]))}};export{oe as _};
