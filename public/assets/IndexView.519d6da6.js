import{af as ae,ag as oe,a9 as ne,R as z,I as p,y as f,o as d,r as U,a as l,w as r,j as o,f as V,E as c,Z as q,J as F,K as G,P as L,d as S,u as n,ah as le,ai as O,aj as ie,ak as ce,A as H,c as P,S as re,x as ue,_ as de,b as J,B as me,O as K,e as fe,g as W,i as ge,ao as pe,ap as he,p as Z}from"./index.2b059d96.js";import{C as ve}from"./CardBoxComponentEmpty.c5973077.js";import{p as N}from"./Professions.service.d25a3588.js";import{_ as $e}from"./FormCheckRadioGroup.f120ae1c.js";import"./FormCheckRadio.b0cf8ca6.js";const _e=["onClick"],be=["data-label"],ke=["data-label"],Pe=["data-label"],Ce={class:"before:hidden lg:w-1 whitespace-nowrap"},we={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},ye={__name:"ProfessionsTable",props:{checkable:Boolean,checkDelete:Boolean},emits:["changePage","confirm","sort"],setup(B,{emit:u}){const{t:m}=ae(),h=oe(),v=ne(),$=z(),T=p(()=>{var e;return(e=$.professions)==null?void 0:e.profesiones}),C=p(()=>$.professions.total),w=f(!1),y=f(!1),I=p(()=>$.professions.perPage),g=p(()=>$.professions.page);f([]);const _=f([]),a=p(()=>T.value),i=(e="")=>({0:"inactive",1:"active",2:"deleted"})[e],b=f(!1),k=e=>{b.value=!b.value,u("sort",e,b.value)},D=p(()=>Math.ceil(C.value/I.value)),M=p(()=>+g.value),E=p(()=>{const e=[];for(let s=0;s<D.value;s++)e.push(s);return e}),j=e=>{u("changePage",e)},Q=e=>{v.push({name:"ProfessionsUpdate",params:{id:e}})},X=e=>_.value=e,R=()=>{const{nombre:e}=_.value;return e},Y=m("message.profession.deleted.success"),x=async()=>{ee().then(()=>{h.success(Y),u("changePage",g.value)}).catch(e=>{var s;h.error(`${m("message.profession.deleted.error")} ${(s=e==null?void 0:e.response)==null?void 0:s.data.msg}`)})},ee=()=>{const{_id:e}=_.value;return N.delete(e)},se=()=>{const{_id:e}=_.value;N.restore(e).then(()=>{h.success(m("message.profession.restore.success")),u("changePage",g.value)}).catch(s=>{var t;h.error(`${m("message.profession.restore.error")} ${(t=s==null?void 0:s.response)==null?void 0:t.data.msg}`)})};return(e,s)=>(d(),U(F,null,[l(q,{modelValue:y.value,"onUpdate:modelValue":s[0]||(s[0]=t=>y.value=t),title:"Please confirm",button:"danger",onConfirm:x,"has-cancel":""},{default:r(()=>[o("strong",null,[V(c(e.$t("message.profession.deleted.question"))+" ",1),o("b",null,c(R()),1)]),V(" ? ")]),_:1},8,["modelValue"]),l(q,{modelValue:w.value,"onUpdate:modelValue":s[1]||(s[1]=t=>w.value=t),title:"Please confirm",onConfirm:se},{default:r(()=>[o("strong",null,[V(c(e.$t("message.profession.restore.question"))+" ",1),o("b",null,c(R()),1)]),V(" ? ")]),_:1},8,["modelValue"]),o("table",null,[o("thead",null,[o("tr",null,[o("th",{onClick:s[2]||(s[2]=t=>k("codigo"))},c(e.$t("message.profession.code")),1),o("th",{onClick:s[3]||(s[3]=t=>k("nombre"))},c(e.$t("message.profession.name")),1),o("th",{onClick:s[4]||(s[4]=t=>k("estado"))},c(e.$t("message.profession.status")),1)])]),o("tbody",null,[(d(!0),U(F,null,G(n(a),(t,te)=>(d(),U("tr",{key:t._id,onClick:A=>X(t)},[o("td",{"data-label":e.$t("message.profession.code")},c(t.codigo),9,be),o("td",{"data-label":e.$t("message.profession.name")},c(t.nombre),9,ke),o("td",{"data-label":e.$t("message.profession.status")},c(e.$t(`message.profession.statuses.${i(t.estado)}`)),9,Pe),o("td",Ce,[l(H,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[L(l(S,{color:"success",icon:n(le),small:"",onClick:s[5]||(s[5]=A=>w.value=!0)},null,8,["icon"]),[[O,B.checkDelete&&t.estado===2]]),L(l(S,{color:"info",icon:n(ie),small:"",onClick:A=>Q(t._id)},null,8,["icon","onClick"]),[[O,!B.checkDelete&&t.estado!==2]]),L(l(S,{color:"danger",icon:n(ce),small:"",onClick:s[6]||(s[6]=A=>y.value=!0)},null,8,["icon"]),[[O,!B.checkDelete&&t.estado!==2]])]),_:2},1024)])],8,_e))),128))])]),o("div",we,[l(re,null,{default:r(()=>[l(H,null,{default:r(()=>[(d(!0),U(F,null,G(n(E),t=>(d(),P(S,{key:t,active:t===n(g)-1,label:t+1,color:t===n(g)?"lightDark":"whiteDark",small:"",onClick:te=>j(t+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),o("small",null,"Page "+c(n(M))+" of "+c(n(D)),1)]),_:1})])],64))}},Me={__name:"IndexView",setup(B){f([{name:"Inicio"}]);const u=z(),m=f(1),h=f(10),v=ue({switch:[]}),$=f(!1),T=()=>{g({page:m.value}),$.value=v.switch.length!==0},C=a=>{N.index(a).then(i=>{u.professions=i,m.value=i.page,h.value=i.perPage})};C({page:m.value});const w=a=>{g({page:a})},y=(a,i)=>{_({sortBy:a,sortDesc:i})},I=a=>{N.getDelete(a).then(i=>{u.professions=i,m.value=i.page,h.value=i.perPage})},g=a=>{v.switch.length===0?C({page:a}):I({page:a})},_=a=>{v.switch.length===0?C(a):I(a)};return(a,i)=>(d(),P(de,null,{default:r(()=>[l(ge,null,{default:r(()=>{var b,k,D,M,E;return[l(J,{icon:n(pe),title:a.$t("message.profession.professions")},{default:r(()=>[l(S,{to:"professions/create",icon:n(he),label:a.$t("message.add_new"),color:"success",small:""},null,8,["icon","label"])]),_:1},8,["icon","title"]),l(me,{label:""},{default:r(()=>[l($e,{modelValue:v.switch,"onUpdate:modelValue":i[0]||(i[0]=j=>v.switch=j),name:"sample-switch",type:"switch",options:{one:"Mostrar registros eliminados"},onChange:T},null,8,["modelValue"])]),_:1}),(b=n(u))!=null&&b.professions?K("",!0):(d(),P(J,{key:0,icon:n(Z),title:"Empty variation"},null,8,["icon"])),(k=n(u))!=null&&k.professions?K("",!0):(d(),P(fe,{key:1,color:"danger",icon:n(Z)},{default:r(()=>[o("b",null,c(a.$t("message.empty_table"))+".",1),V(" When there's nothing to show ")]),_:1},8,["icon"])),(E=(M=(D=n(u))==null?void 0:D.professions)==null?void 0:M.profesiones)!=null&&E.length?(d(),P(W,{key:2,class:"mb-6","has-table":""},{default:r(()=>[l(ye,{checkDelete:$.value,onChangePage:w,onSort:y},null,8,["checkDelete"])]),_:1})):(d(),P(W,{key:3},{default:r(()=>[l(ve)]),_:1}))]}),_:1})]),_:1}))}};export{Me as default};
