import{af as x,ag as F,as as I,a9 as N,y as j,at as q,I as z,o as O,c as T,w as m,a as u,d as A,j as D,B as $,u as c,C as y,au as E,av as G,aw as H,z as J,g as K}from"./index.cb093d8e.js";import{r as h,m as P,u as Q}from"./index.esm.25e21f11.js";import{c as V}from"./countries.service.19451b6a.js";const W={class:"grid md:grid-cols-3 gap-4"},ee={__name:"FormView",props:{path:"",saveLabel:"",country:{}},setup(L){const p=L,{t:o}=x(),f=F(),S=I(),C=N(),b=[{id:1,label:o("message.country.statuses.active")},{id:0,label:o("message.country.statuses.inactive")},{id:2,label:o("message.country.statuses.deleted")}],s=j({_id:"",codigo:"",nombre:"",estado:b[0]}),M=a=>{const{_id:e,codigo:r,nombre:n,estado:l}=a.value,t={_id:e,codigo:r,nombre:n,estado:l.id};return p.path==="create"?V.create(t):V.update(t)};q(async()=>{if(p.path==="update"){const a=await V.read(S.params);s.value=a.data,s.value.estado=b.filter(e=>e.id===a.data.estado)[0]}});const R=z(()=>({codigo:{required:h,maxLength:P(3)},nombre:{required:h},estado:{required:h}})),g=Q(R,s),U=p.path==="create"?o("message.country.created.success"):o("message.country.updated.success"),k=async()=>{await g.value.$validate()?M(s).then(()=>{f.success(U),C.push("/setup/countries")}).catch(e=>{var r,n,l,t;if((r=e.response.data)!=null&&r.msg){const{estado:d=1}=((l=(n=e.response)==null?void 0:n.data)==null?void 0:l.data)||{estado:1};d===1?f.error(`${o("message.country.created.error")} ${e.response.data.msg}`):f.error(`${o("message.country.created.errorStatus")}`);return}if((t=e.response.data)!=null&&t.errors){const d=e.response.data.errors;for(let v of d);}}):console.log("error")};return(a,e)=>(O(),T(K,{isForm:"",onSubmit:J(k,["prevent"])},{footer:m(()=>[u(A,{label:a.$t(`message.${p.saveLabel}`),type:"submit",color:"success"},null,8,["label"])]),default:m(()=>{var r,n,l,t,d,v,_,w,B;return[D("div",W,[u($,{label:a.$t("message.country.code"),help:(l=(n=(r=c(g))==null?void 0:r.codigo)==null?void 0:n.$errors[0])==null?void 0:l.$message},{default:m(()=>[u(y,{name:"codigo",modelValue:s.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=i=>s.value.codigo=i),icon:c(E)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),u($,{label:a.$t("message.country.name"),help:(v=(d=(t=c(g))==null?void 0:t.nombre)==null?void 0:d.$errors[0])==null?void 0:v.$message},{default:m(()=>[u(y,{modelValue:s.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=i=>s.value.nombre=i),icon:c(G)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),u($,{label:a.$t("message.country.status"),help:(B=(w=(_=c(g))==null?void 0:_.estado)==null?void 0:w.$errors[0])==null?void 0:B.$message},{default:m(()=>[u(y,{modelValue:s.value.estado,"onUpdate:modelValue":e[2]||(e[2]=i=>s.value.estado=i),icon:c(H),options:b},null,8,["modelValue","icon"])]),_:1},8,["label","help"])])]}),_:1},8,["onSubmit"]))}};export{ee as _};
