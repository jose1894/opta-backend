import{q as O,ag as A,ah as D,at as E,aa as G,y as H,I as J,au as K,o as P,c as Q,w as m,j as b,a as t,d as M,B as f,u as n,C as v,av as W,aw as S,ax as X,z as Y,g as Z}from"./index.e27aaed2.js";import{r as $,m as ee,u as se}from"./index.esm.6263d8b1.js";import{b as U}from"./bussinesUnit.service.20bca8ab.js";const ae={class:"container mx-auto"},te={class:"grid md:grid-cols-4 gap-4"},oe={style:{display:"flex","justify-content":"space-between"}},ne={__name:"FormView",props:{path:"",saveLabel:"",state:{}},setup(k){const p=k,{t:u}=A(),V=D(),I=E(),h=G(),_=[{id:1,label:u("message.bussinesUnit.statuses.active")},{id:0,label:u("message.bussinesUnit.statuses.inactive")}],s=H({_id:"",codigo:"00",nombre:"",siglas:"",estado:_[0]}),R=J(()=>({codigo:{required:$,maxLength:ee(3)},nombre:{required:$},siglas:{required:$}})),g=se(R,s);K(async()=>{if(p.path==="update"){const a=await U.read(I.params);s.value=a.data,s.value.estado=_.filter(e=>e.id===a.data.estado)[0]}});const j=a=>{const{_id:e,codigo:o,nombre:l,siglas:i,estado:d}=a.value,c={_id:e,codigo:o,nombre:l,siglas:i,estado:d.id};return p.path==="create"?U.create(c):U.update(c)},q=p.path==="create"?u("message.bussinesUnit.created.success"):u("message.bussinesUnit.updated.success"),N=p.path==="create"?u("message.bussinesUnit.created.error"):u("message.bussinesUnit.updated.error"),T=async()=>{await g.value.$validate()?j(s).then(()=>{V.success(q),h.push("/setup/businessUnit")}).catch(e=>{var o,l,i;if((l=(o=e.response)==null?void 0:o.data)!=null&&l.msg){V.error(`${N} ${e.response.data.msg}`);return}if((i=e.response.data)!=null&&i.errors){const d=e.response.data.errors;for(let c of d);}}):console.log("error")},z=()=>h.push("/setup/businessUnit");return(a,e)=>(P(),Q(Z,{isForm:"",onSubmit:Y(T,["prevent"])},{footer:m(()=>[b("div",oe,[t(M,{label:a.$t(`message.${p.saveLabel}`),type:"submit",color:"success"},null,8,["label"]),t(M,{label:a.$t("message.return"),color:"info",onClick:e[4]||(e[4]=o=>z())},null,8,["label"])])]),default:m(()=>{var o,l,i,d,c,w,y,B,x,F,L,C;return[b("div",null,[b("div",ae,[b("div",te,[t(f,{label:a.$t("message.bussinesUnit.code"),help:(i=(l=(o=n(g))==null?void 0:o.codigo)==null?void 0:l.$errors[0])==null?void 0:i.$message},{default:m(()=>[t(v,{name:"codigo",modelValue:s.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=r=>s.value.codigo=r),icon:n(W)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(f,{label:a.$t("message.bussinesUnit.name"),help:(w=(c=(d=n(g))==null?void 0:d.nombre)==null?void 0:c.$errors[0])==null?void 0:w.$message},{default:m(()=>[t(v,{modelValue:s.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=r=>s.value.nombre=r),icon:n(S)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(f,{label:a.$t("message.bussinesUnit.acronyms"),help:(x=(B=(y=n(g))==null?void 0:y.siglas)==null?void 0:B.$errors[0])==null?void 0:x.$message},{default:m(()=>[t(v,{modelValue:s.value.siglas,"onUpdate:modelValue":e[2]||(e[2]=r=>s.value.siglas=r),icon:n(S)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(f,{label:a.$t("message.bussinesUnit.status"),help:(C=(L=(F=n(g))==null?void 0:F.estado)==null?void 0:L.$errors[0])==null?void 0:C.$message},{default:m(()=>[t(v,{modelValue:s.value.estado,"onUpdate:modelValue":e[3]||(e[3]=r=>s.value.estado=r),icon:n(X),options:_},null,8,["modelValue","icon"])]),_:1},8,["label","help"])])])])]}),_:1},8,["onSubmit"]))}},ue=O(ne,[["__scopeId","data-v-c46265f2"]]);export{ue as F};
