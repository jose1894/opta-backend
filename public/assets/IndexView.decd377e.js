import{ag as se,ah as ae,aa as le,S as J,I as v,y as f,o as g,r as E,a as c,w as u,j as l,f as y,E as i,$ as G,K as A,L as H,M as F,d as S,u as n,ai as oe,aj as O,ak as ne,al as ce,A as K,c as _,T as ie,x as ue,_ as re,b as Q,ao as de,B as me,Q as W,e as ge,g as z,i as fe,ap as he,aq as ve}from"./index.e27aaed2.js";import{_ as pe}from"./FormCheckRadioGroup.84cb26fc.js";import{C as $e}from"./CardBoxComponentEmpty.8b08f16b.js";import{s as U}from"./states.services.92a25f7c.js";import"./FormCheckRadio.44135d25.js";const be=l("th",null,null,-1),_e=["onClick"],ke=["data-label"],Ce=["data-label"],Pe=["data-label"],we=["data-label"],ye={class:"before:hidden lg:w-1 whitespace-nowrap"},Se={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},De={__name:"StateTable",props:{checkable:Boolean,checkDelete:Boolean},emits:["changePage","confirm","sort"],setup(D,{emit:d}){const{t:r}=se(),p=ae(),N=le(),m=J(),V=v(()=>m.states.estados),k=v(()=>m.states.total),C=f(!1),P=f(!1),j=v(()=>m.states.perPage),h=v(()=>m.states.page);f([]);const T=v(()=>V.value),b=f([]),a=(e="")=>({0:"inactive",1:"active",2:"deleted"})[e],o=f(!1),$=e=>{o.value=!o.value,d("sort",e,o.value)},w=v(()=>Math.ceil(k.value/j.value)),B=v(()=>+h.value),M=v(()=>{const e=[];for(let t=0;t<w.value;t++)e.push(t);return e}),I=e=>{d("changePage",e)},L=e=>{N.push({name:"StatesUpdate",params:{id:e}})},X=e=>b.value=e,R=()=>{const{nombre:e}=b.value;return e},Y=r("message.state.deleted.success"),Z=async()=>{x().then(()=>{p.success(Y),d("changePage",h.value)}).catch(e=>{var t;p.error(`${r("message.state.deleted.error")} ${(t=e==null?void 0:e.response)==null?void 0:t.data.msg}`)})},x=()=>{const{_id:e}=b.value;return U.delete(e)},ee=()=>{const{_id:e}=b.value;U.restore(e).then(()=>{p.success(r("message.state.restore.success")),d("changePage",h.value)}).catch(t=>{var s;p.error(`${r("message.state.restore.error")} ${(s=t==null?void 0:t.response)==null?void 0:s.data.msg}`)})};return(e,t)=>(g(),E(A,null,[c(G,{modelValue:P.value,"onUpdate:modelValue":t[0]||(t[0]=s=>P.value=s),title:"Please confirm",button:"danger",onConfirm:Z,"has-cancel":""},{default:u(()=>[l("strong",null,[y(i(e.$t("message.state.deleted.question"))+" ",1),l("b",null,i(R()),1)]),y(" ? ")]),_:1},8,["modelValue"]),c(G,{modelValue:C.value,"onUpdate:modelValue":t[1]||(t[1]=s=>C.value=s),title:"Please confirm",onConfirm:ee},{default:u(()=>[l("strong",null,[y(i(e.$t("message.state.restore.question"))+" ",1),l("b",null,i(R()),1)]),y(" ? ")]),_:1},8,["modelValue"]),l("table",null,[l("thead",null,[l("tr",null,[l("th",{onClick:t[2]||(t[2]=s=>$("codigo"))},i(e.$t("message.state.code")),1),l("th",{onClick:t[3]||(t[3]=s=>$("nombre"))},i(e.$t("message.state.name")),1),l("th",{onClick:t[4]||(t[4]=s=>$("codigo"))},i(e.$t("message.state.country")),1),l("th",{onClick:t[5]||(t[5]=s=>$("estado"))},i(e.$t("message.state.status")),1),be])]),l("tbody",null,[(g(!0),E(A,null,H(n(T),(s,te)=>(g(),E("tr",{key:s._id,onClick:q=>X(s)},[l("td",{"data-label":e.$t("message.state.code")},i(s.codigo),9,ke),l("td",{"data-label":e.$t("message.state.name")},i(s.nombre),9,Ce),l("td",{"data-label":e.$t("message.state.country")},i(s.pais.nombre),9,Pe),l("td",{"data-label":e.$t("message.state.status")},i(e.$t(`message.state.statuses.${a(s.estado)}`)),9,we),l("td",ye,[c(K,{type:"justify-start lg:justify-end","no-wrap":""},{default:u(()=>[F(c(S,{color:"success",icon:n(oe),messageTooltip:"t('message.restore')",small:"",onClick:t[6]||(t[6]=q=>C.value=!0)},null,8,["icon"]),[[O,D.checkDelete&&s.estado===2]]),F(c(S,{color:"info",icon:n(ne),messageTooltip:n(r)("message.edit"),small:"",onClick:q=>L(s._id)},null,8,["icon","messageTooltip","onClick"]),[[O,!D.checkDelete&&s.estado!==2]]),F(c(S,{color:"danger",icon:n(ce),messageTooltip:n(r)("message.delete"),small:"",onClick:t[7]||(t[7]=q=>P.value=!0)},null,8,["icon","messageTooltip"]),[[O,!D.checkDelete&&s.estado!==2]])]),_:2},1024)])],8,_e))),128))])]),l("div",Se,[c(ie,null,{default:u(()=>[c(K,null,{default:u(()=>[(g(!0),E(A,null,H(n(M),s=>(g(),_(S,{key:s,active:s===n(h)-1,label:s+1,color:s===n(h)?"lightDark":"whiteDark",small:"",onClick:te=>I(s+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),l("small",null,"Page "+i(n(B))+" of "+i(n(w)),1)]),_:1})])],64))}},Ee={__name:"IndexView",setup(D){const d=J(),r=f(1),p=f(10),N=f([{name:"Inicio"}]),m=ue({switch:[]}),V=f(!1),k=a=>{U.index(a).then(o=>{d.states=o,r.value=o.page,p.value=o.perPage})};k({page:r.value});const C=()=>{T({page:r.value}),V.value=m.switch.length!==0},P=a=>{T({page:a})},j=(a,o)=>{b({sortBy:a,sortDesc:o})},h=a=>{U.getDelete(a).then(o=>{d.states=o,r.value=o.page,p.value=o.perPage})},T=a=>{m.switch.length===0?k({page:a}):h({page:a})},b=a=>{m.switch.length===0?k(a):h(a)};return(a,o)=>(g(),_(re,null,{default:u(()=>[c(fe,null,{default:u(()=>{var $,w,B,M,I;return[c(Q,{icon:n(he),title:a.$t("message.state.states")},{default:u(()=>[c(S,{to:{name:"StatesCreate"},icon:n(ve),label:a.$t("message.add_new"),color:"success",small:""},null,8,["icon","label"])]),_:1},8,["icon","title"]),c(de,{items:N.value},null,8,["items"]),c(me,{label:""},{default:u(()=>[c(pe,{modelValue:m.switch,"onUpdate:modelValue":o[0]||(o[0]=L=>m.switch=L),name:"sample-switch",type:"switch",options:{one:"Mostrar registros eliminados"},onChange:C},null,8,["modelValue"])]),_:1}),($=n(d))!=null&&$.states?W("",!0):(g(),_(Q,{key:0,icon:a.mdiTableOff,title:"Empty variation"},null,8,["icon"])),(w=n(d))!=null&&w.states?W("",!0):(g(),_(ge,{key:1,color:"danger",icon:a.mdiTableOff},{default:u(()=>[l("b",null,i(a.$t("message.empty_table"))+".",1),y(" When there's nothing to show ")]),_:1},8,["icon"])),(I=(M=(B=n(d))==null?void 0:B.states)==null?void 0:M.estados)!=null&&I.length?(g(),_(z,{key:2,class:"mb-6","has-table":""},{default:u(()=>[c(De,{checkDelete:V.value,onChangePage:P,onSort:j},null,8,["checkDelete"])]),_:1})):(g(),_(z,{key:3},{default:u(()=>[c($e)]),_:1}))]}),_:1})]),_:1}))}};export{Ee as default};
