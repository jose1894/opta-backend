import{ag as ae,ah as oe,aa as ne,S as X,I as v,y as m,o as g,r as I,a as c,w as u,j as n,f as y,E as r,$ as G,K as A,L as H,M as F,d as D,u as o,ai as le,aj as O,ak as ce,al as ie,A as K,c as _,T as re,x as ue,_ as de,b as Q,ao as me,B as ge,Q as W,e as fe,g as z,i as he,ap as ve,aq as pe,p as J}from"./index.e27aaed2.js";import{C as be}from"./CardBoxComponentEmpty.8b08f16b.js";import{c as E}from"./cargos.service.90ce512d.js";import{_ as $e}from"./FormCheckRadioGroup.84cb26fc.js";import"./FormCheckRadio.44135d25.js";const _e=["onClick"],ke=["data-label"],Pe=["data-label"],Ce=["data-label"],we={class:"before:hidden lg:w-1 whitespace-nowrap"},ye={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},De={__name:"CargoTable",props:{checkable:Boolean,checkDelete:Boolean},emits:["changePage","confirm","sort"],setup(V,{emit:b}){const{t:i}=ae(),f=oe(),j=ne(),d=X(),k=v(()=>{var e;return(e=d.jobPositions)==null?void 0:e.cargos}),S=v(()=>d.jobPositions.total),P=m(!1);m();const C=m(!1),U=v(()=>d.jobPositions.perPage),h=v(()=>d.jobPositions.page);m([]);const p=m([]),N=v(()=>k.value),a=(e=1)=>({0:"inactive",1:"active",2:"deleted"})[e],l=m(!1),$=e=>{l.value=!l.value,b("sort",e,l.value)},w=v(()=>Math.ceil(S.value/U.value)),T=v(()=>+h.value),B=v(()=>{const e=[];for(let s=0;s<w.value;s++)e.push(s);return e}),M=e=>{b("changePage",e)},L=e=>{j.push({name:"CargosUpdate",params:{id:e}})},Y=e=>p.value=e,R=()=>{const{nombre:e}=p.value;return e},Z=i("message.cargo.deleted.success"),x=async()=>{ee().then(()=>{f.success(Z),b("changePage",h.value)}).catch(e=>{var s;f.error(`${i("message.cargo.deleted.error")} ${(s=e==null?void 0:e.response)==null?void 0:s.data.msg}`)})},ee=()=>{const{_id:e}=p.value;return E.delete(e)},se=()=>{const{_id:e}=p.value;E.restore(e).then(()=>{f.success(i("message.cargo.restore.success")),b("changePage",h.value)}).catch(s=>{var t;f.error(`${i("message.cargo.restore.error")} ${(t=s==null?void 0:s.response)==null?void 0:t.data.msg}`)})};return(e,s)=>(g(),I(A,null,[c(G,{modelValue:C.value,"onUpdate:modelValue":s[0]||(s[0]=t=>C.value=t),title:"Please confirm",button:"danger",onConfirm:x,"has-cancel":""},{default:u(()=>[n("strong",null,[y(r(e.$t("message.cargo.deleted.question"))+" ",1),n("b",null,r(R()),1)]),y(" ? ")]),_:1},8,["modelValue"]),c(G,{modelValue:P.value,"onUpdate:modelValue":s[1]||(s[1]=t=>P.value=t),title:"Please confirm",onConfirm:se},{default:u(()=>[n("strong",null,[y(r(e.$t("message.cargo.restore.question"))+" ",1),n("b",null,r(R()),1)]),y(" ? ")]),_:1},8,["modelValue"]),n("table",null,[n("thead",null,[n("tr",null,[n("th",{onClick:s[2]||(s[2]=t=>$("codigo"))},r(e.$t("message.cargo.code")),1),n("th",{onClick:s[3]||(s[3]=t=>$("nombre"))},r(e.$t("message.cargo.name")),1),n("th",{onClick:s[4]||(s[4]=t=>$("estado"))},r(e.$t("message.cargo.status")),1)])]),n("tbody",null,[(g(!0),I(A,null,H(o(N),(t,te)=>(g(),I("tr",{key:t._id,onClick:q=>Y(t)},[n("td",{"data-label":e.$t("message.cargo.code")},r(t.codigo),9,ke),n("td",{"data-label":e.$t("message.cargo.name")},r(t.nombre),9,Pe),n("td",{"data-label":e.$t("message.cargo.status")},r(e.$t(`message.cargo.statuses.${a(t.estado)}`)),9,Ce),n("td",we,[c(K,{type:"justify-start lg:justify-end","no-wrap":""},{default:u(()=>[F(c(D,{color:"success",icon:o(le),messageTooltip:o(i)("message.restore"),small:"",onClick:s[5]||(s[5]=q=>P.value=!0)},null,8,["icon","messageTooltip"]),[[O,V.checkDelete&&t.estado===2]]),F(c(D,{color:"info",icon:o(ce),messageTooltip:o(i)("message.edit"),small:"",onClick:q=>L(t._id)},null,8,["icon","messageTooltip","onClick"]),[[O,!V.checkDelete&&t.estado!==2]]),F(c(D,{color:"danger",icon:o(ie),messageTooltip:o(i)("message.delete"),small:"",onClick:s[6]||(s[6]=q=>C.value=!0)},null,8,["icon","messageTooltip"]),[[O,!V.checkDelete&&t.estado!==2]])]),_:2},1024)])],8,_e))),128))])]),n("div",ye,[c(re,null,{default:u(()=>[c(K,null,{default:u(()=>[(g(!0),I(A,null,H(o(B),t=>(g(),_(D,{key:t,active:t===o(h)-1,label:t+1,color:t===o(h)?"lightDark":"whiteDark",small:"",onClick:te=>M(t+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),n("small",null,"Page "+r(o(T))+" of "+r(o(w)),1)]),_:1})])],64))}},Me={__name:"IndexView",setup(V){const b=m([{name:"Inicio"}]),i=X(),f=m(1),j=m(10),d=ue({switch:[]}),k=a=>{E.index(a).then(l=>{i.jobPositions=l,f.value=l.page,j.value=l.perPage})};k({page:f.value});const S=m(!1),P=()=>{p({page:f.value}),S.value=d.switch.length!==0},C=a=>{p({page:a})},U=(a,l)=>{N({sortBy:a,sortDesc:l})},h=a=>{E.getDelete(a).then(l=>{i.jobPositions=l,f.value=l.page,j.value=l.perPage})},p=a=>{d.switch.length===0?k({page:a}):h({page:a})},N=a=>{d.switch.length===0?k(a):h(a)};return(a,l)=>(g(),_(de,null,{default:u(()=>[c(he,null,{default:u(()=>{var $,w,T,B,M;return[c(Q,{icon:o(ve),title:a.$t("message.cargo.cargos")},{default:u(()=>[c(D,{to:{name:"CargosCreate"},icon:o(pe),label:a.$t("message.add_new"),color:"success",small:""},null,8,["icon","label"])]),_:1},8,["icon","title"]),c(me,{items:b.value},null,8,["items"]),c(ge,{label:""},{default:u(()=>[c($e,{modelValue:d.switch,"onUpdate:modelValue":l[0]||(l[0]=L=>d.switch=L),name:"sample-switch",type:"switch",options:{one:"Mostrar registros eliminados"},onChange:P},null,8,["modelValue"])]),_:1}),($=o(i))!=null&&$.jobPositions?W("",!0):(g(),_(Q,{key:0,icon:o(J),title:"Empty variation"},null,8,["icon"])),(w=o(i))!=null&&w.jobPositions?W("",!0):(g(),_(fe,{key:1,color:"danger",icon:o(J)},{default:u(()=>[n("b",null,r(a.$t("message.empty_table"))+".",1),y(" When there's nothing to show ")]),_:1},8,["icon"])),(M=(B=(T=o(i))==null?void 0:T.jobPositions)==null?void 0:B.cargos)!=null&&M.length?(g(),_(z,{key:2,class:"mb-6","has-table":""},{default:u(()=>[c(De,{checkDelete:S.value,onChangePage:C,onSort:U},null,8,["checkDelete"])]),_:1})):(g(),_(z,{key:3},{default:u(()=>[c(be)]),_:1}))]}),_:1})]),_:1}))}};export{Me as default};
