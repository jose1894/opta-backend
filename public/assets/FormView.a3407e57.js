import{q as H,ag as J,ah as K,at as P,aa as Q,y as C,I as W,au as X,o as Y,c as Z,w as d,j as v,a as t,d as M,B as f,u as n,C as _,aw as V,ax as k,z as ee,g as se}from"./index.e27aaed2.js";import{r as I,m as ae,u as oe}from"./index.esm.6263d8b1.js";import{b as te}from"./bussinesUnit.service.20bca8ab.js";import{c as h}from"./categories.service.315771c8.js";const le={class:"container mx-auto"},ne={class:"grid md:grid-cols-3 gap-3"},re={class:"grid md:grid-cols-2 gap-2"},ie={style:{display:"flex","justify-content":"space-between"}},de={__name:"FormView",props:{path:"",saveLabel:"",state:{}},setup(O){const g=O,{t:u}=J(),w=K(),R=P(),N=Q();let $=C([]);const y=[{id:1,label:u("message.category.statuses.active")},{id:0,label:u("message.category.statuses.inactive")}],a=C({_id:"",codigo:"00",nombre:"",siglas:"",unidadNegocio:$.value,estado:y[0]}),j=W(()=>({codigo:{required:I,maxLength:ae(3)},nombre:{required:I}})),p=oe(j,a);X(async()=>{var l;let s=await te.allBussinesUnitGet();const e=(s==null?void 0:s.data.unidadesNegocio)||[];if($.value=e.map(o=>({id:o._id,label:o.nombre})),g.path==="update"){const o=await h.read(R.params);a.value=o.data,a.value.unidadNegocio=q((l=o.data)==null?void 0:l.unidadNegocio),a.value.estado=y.filter(r=>r.id===o.data.estado)[0]}});const q=s=>({id:s._id,label:s.nombre}),T=(s,e={})=>{console.log(s)},z=s=>{const{_id:e,codigo:l,nombre:o,siglas:r,unidadNegocio:c,estado:b}=s.value,m={_id:e,codigo:l,nombre:o,siglas:r,unidadNegocio:c.id,estado:b.id};return console.log(m),g.path==="create"?h.create(m):h.update(m)},A=g.path==="create"?u("message.category.created.success"):u("message.category.updated.success"),G=g.path==="create"?u("message.category.created.error"):u("message.category.updated.error"),D=async()=>{await p.value.$validate()?z(a).then(()=>{w.success(A),N.push("/setup/categories")}).catch(e=>{var l,o,r;if((o=(l=e.response)==null?void 0:l.data)!=null&&o.msg){w.error(`${G} ${e.response.data.msg}`);return}if((r=e.response.data)!=null&&r.errors){const c=e.response.data.errors;for(let b of c);}}):console.log("error")},E=()=>N.push("/setup/categories");return(s,e)=>(Y(),Z(se,{isForm:"",onSubmit:ee(D,["prevent"])},{footer:d(()=>[v("div",ie,[t(M,{label:s.$t(`message.${g.saveLabel}`),type:"submit",color:"success"},null,8,["label"]),t(M,{label:s.$t("message.return"),color:"info",onClick:e[5]||(e[5]=l=>E())},null,8,["label"])])]),default:d(()=>{var l,o,r,c,b,m,U,B,S,L,F,x;return[v("div",null,[v("div",le,[v("div",ne,[t(f,{label:s.$t("message.category.code"),help:(r=(o=(l=n(p))==null?void 0:l.codigo)==null?void 0:o.$errors[0])==null?void 0:r.$message},{default:d(()=>[t(_,{modelValue:a.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=i=>a.value.codigo=i),icon:n(V)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(f,{label:s.$t("message.category.name"),help:(m=(b=(c=n(p))==null?void 0:c.nombre)==null?void 0:b.$errors[0])==null?void 0:m.$message},{default:d(()=>[t(_,{modelValue:a.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=i=>a.value.nombre=i),icon:n(V)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(f,{label:s.$t("message.category.acronyms"),help:(S=(B=(U=n(p))==null?void 0:U.siglas)==null?void 0:B.$errors[0])==null?void 0:S.$message},{default:d(()=>[t(_,{modelValue:a.value.siglas,"onUpdate:modelValue":e[2]||(e[2]=i=>a.value.siglas=i),icon:n(V)},null,8,["modelValue","icon"])]),_:1},8,["label","help"])]),v("div",re,[t(f,{label:s.$t("message.category.businessUnit")},{default:d(()=>[t(_,{modelValue:a.value.unidadNegocio,"onUpdate:modelValue":e[3]||(e[3]=i=>a.value.unidadNegocio=i),icon:n(k),options:n($),onOnSelectChange:T},null,8,["modelValue","icon","options"])]),_:1},8,["label"]),t(f,{label:s.$t("message.category.status"),help:(x=(F=(L=n(p))==null?void 0:L.estado)==null?void 0:F.$errors[0])==null?void 0:x.$message},{default:d(()=>[t(_,{modelValue:a.value.estado,"onUpdate:modelValue":e[4]||(e[4]=i=>a.value.estado=i),icon:n(k),options:y},null,8,["modelValue","icon"])]),_:1},8,["label","help"])])])])]}),_:1},8,["onSubmit"]))}},pe=H(de,[["__scopeId","data-v-75a3ea0d"]]);export{pe as F};
