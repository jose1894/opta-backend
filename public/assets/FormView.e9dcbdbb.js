import{u as I,ak as T,au as q,ae as D,r as O,g as A,ax as E,o as G,c as H,a as c,b as g,i as t,N as J,d as K,_ as f,p as r,ay as P,S as Q,az as F,ar as W,j as X}from"./index.b6490627.js";import{r as k,u as Y}from"./index.esm.e4937ab4.js";import{b as Z,a as C,_ as ee}from"./BaseButton.d5c30e56.js";import{_ as v}from"./FormField.74da7989.js";import{b as U}from"./bussinesUnit.service.dabab15d.js";const se={class:"container mx-auto"},ae={style:{display:"flex","justify-content":"space-between"}},te={__name:"FormView",props:{path:"",saveLabel:"",state:{}},setup($){const p=$,{t:u}=I(),V=T(),M=q(),h=D(),_=[{id:1,label:u("message.bussinesUnit.statuses.active")},{id:0,label:u("message.bussinesUnit.statuses.inactive")}],s=O({_id:"",codigo:"00",nombre:"",siglas:"",estado:_[0]}),x=A(()=>({nombre:{required:k},siglas:{required:k}})),b=Y(x,s);E(async()=>{if(p.path==="update"){const a=await U.read(M.params);s.value=a.data,s.value.estado=_.filter(e=>e.id===a.data.estado)[0]}});const L=a=>{const{_id:e,codigo:o,nombre:l,siglas:n,estado:d}=a.value,m={_id:e,codigo:o,nombre:l,siglas:n,estado:d.id};return p.path==="create"?U.create(m):U.update(m)},N=p.path==="create"?u("message.bussinesUnit.created.success"):u("message.bussinesUnit.updated.success"),R=p.path==="create"?u("message.bussinesUnit.created.error"):u("message.bussinesUnit.updated.error"),j=async()=>{await b.value.$validate()?L(s).then(()=>{V.success(N),h.push("/setup/businessUnit")}).catch(e=>{var o,l,n;if((l=(o=e.response)==null?void 0:o.data)!=null&&l.msg){V.error(`${R} ${e.response.data.msg}`);return}if((n=e.response.data)!=null&&n.errors){const d=e.response.data.errors;for(let m of d);}}):console.log("error")},z=()=>h.push("/setup/businessUnit");return(a,e)=>(G(),H(ee,{isForm:"",onSubmit:X(j,["prevent"])},{footer:c(()=>[g("div",ae,[t(C,{label:a.$t(`message.${p.saveLabel}`),type:"submit",color:"success"},null,8,["label"]),t(C,{label:a.$t("message.return"),color:"info",onClick:e[4]||(e[4]=o=>z())},null,8,["label"])])]),default:c(()=>{var o,l,n,d,m,y,w,S,B;return[g("div",null,[g("div",se,[g("div",{class:J($.path!=="create"?"grid md:grid-cols-2 gap-4":"grid md:grid-cols-3 gap-4")},[K(t(v,{label:a.$t("message.bussinesUnit.code")},{default:c(()=>[t(f,{name:"codigo",modelValue:s.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=i=>s.value.codigo=i),icon:r(P),readonly:"true"},null,8,["modelValue","icon"])]),_:1},8,["label"]),[[Q,$.path!=="create"]]),t(v,{label:a.$t("message.bussinesUnit.name"),help:(n=(l=(o=r(b))==null?void 0:o.nombre)==null?void 0:l.$errors[0])==null?void 0:n.$message},{default:c(()=>[t(f,{modelValue:s.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=i=>s.value.nombre=i),icon:r(F)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(v,{label:a.$t("message.bussinesUnit.acronyms"),help:(y=(m=(d=r(b))==null?void 0:d.siglas)==null?void 0:m.$errors[0])==null?void 0:y.$message},{default:c(()=>[t(f,{modelValue:s.value.siglas,"onUpdate:modelValue":e[2]||(e[2]=i=>s.value.siglas=i),icon:r(F)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(v,{label:a.$t("message.bussinesUnit.status"),help:(B=(S=(w=r(b))==null?void 0:w.estado)==null?void 0:S.$errors[0])==null?void 0:B.$message},{default:c(()=>[t(f,{modelValue:s.value.estado,"onUpdate:modelValue":e[3]||(e[3]=i=>s.value.estado=i),icon:r(W),options:_},null,8,["modelValue","icon"])]),_:1},8,["label","help"])],2)])])]}),_:1},8,["onSubmit"]))}},ue=Z(te,[["__scopeId","data-v-98feea9f"]]);export{ue as F};
