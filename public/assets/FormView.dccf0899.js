import{ag as I,ah as N,at as T,aa as q,y as z,au as O,I as A,o as D,c as E,w as m,j as S,a as r,d as C,B as $,u as c,C as y,av as G,aw as H,ax as J,z as K,g as P}from"./index.e27aaed2.js";import{r as h,m as Q,u as W}from"./index.esm.6263d8b1.js";import{c as V}from"./countries.service.6413becf.js";const X={class:"grid md:grid-cols-3 gap-4"},Y={style:{display:"flex","justify-content":"space-between"}},ae={__name:"FormView",props:{path:"",saveLabel:"",country:{}},setup(k){const p=k,{t:u}=I(),f=N(),x=T(),_=q(),b=[{id:1,label:u("message.country.statuses.active")},{id:0,label:u("message.country.statuses.inactive")}],a=z({_id:"",codigo:"",nombre:"",estado:b[0]}),M=s=>{const{_id:e,codigo:o,nombre:n,estado:l}=s.value,t={_id:e,codigo:o,nombre:n,estado:l.id};return p.path==="create"?V.create(t):V.update(t)};O(async()=>{if(p.path==="update"){const s=await V.read(x.params);a.value=s.data,a.value.estado=b.filter(e=>e.id===s.data.estado)[0]}});const R=A(()=>({codigo:{required:h,maxLength:Q(3)},nombre:{required:h},estado:{required:h}})),g=W(R,a),U=p.path==="create"?u("message.country.created.success"):u("message.country.updated.success"),j=async()=>{await g.value.$validate()?M(a).then(()=>{f.success(U),_.push("/setup/countries")}).catch(e=>{var o,n,l,t;if((o=e.response.data)!=null&&o.msg){const{estado:d=1}=((l=(n=e.response)==null?void 0:n.data)==null?void 0:l.data)||{estado:1};d===1?f.error(`${u("message.country.created.error")} ${e.response.data.msg}`):f.error(`${u("message.country.created.errorStatus")}`);return}if((t=e.response.data)!=null&&t.errors){const d=e.response.data.errors;for(let v of d);}}):console.log("error")},F=()=>_.push("/setup/countries");return(s,e)=>(D(),E(P,{isForm:"",onSubmit:K(j,["prevent"])},{footer:m(()=>[S("div",Y,[r(C,{label:s.$t(`message.${p.saveLabel}`),type:"submit",color:"success"},null,8,["label"]),r(C,{label:s.$t("message.return"),color:"info",onClick:e[3]||(e[3]=o=>F())},null,8,["label"])])]),default:m(()=>{var o,n,l,t,d,v,w,B,L;return[S("div",X,[r($,{label:s.$t("message.country.code"),help:(l=(n=(o=c(g))==null?void 0:o.codigo)==null?void 0:n.$errors[0])==null?void 0:l.$message},{default:m(()=>[r(y,{name:"codigo",modelValue:a.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=i=>a.value.codigo=i),icon:c(G)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),r($,{label:s.$t("message.country.name"),help:(v=(d=(t=c(g))==null?void 0:t.nombre)==null?void 0:d.$errors[0])==null?void 0:v.$message},{default:m(()=>[r(y,{modelValue:a.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=i=>a.value.nombre=i),icon:c(H)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),r($,{label:s.$t("message.country.status"),help:(L=(B=(w=c(g))==null?void 0:w.estado)==null?void 0:B.$errors[0])==null?void 0:L.$message},{default:m(()=>[r(y,{modelValue:a.value.estado,"onUpdate:modelValue":e[2]||(e[2]=i=>a.value.estado=i),icon:c(J),options:b},null,8,["modelValue","icon"])]),_:1},8,["label","help"])])]}),_:1},8,["onSubmit"]))}};export{ae as _};
