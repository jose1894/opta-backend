import{ag as ne,ah as ie,aa as re,S as x,I as f,y as v,o as m,r as I,a as r,w as u,j as t,f as y,E as o,$ as Q,K as A,L as W,M as F,d as D,u as n,ai as ce,aj as O,ak as ue,al as de,A as z,c as _,T as me,x as ge,_ as pe,b as J,ao as ve,B as he,Q as X,e as fe,g as Y,i as be,ap as $e,aq as ke,p as Z}from"./index.e27aaed2.js";import{C as _e}from"./CardBoxComponentEmpty.8b08f16b.js";import{p as N}from"./personal.service.ad7206b3.js";import{_ as Pe}from"./FormCheckRadioGroup.84cb26fc.js";import"./FormCheckRadio.44135d25.js";const Ce=["onClick"],we=["data-label"],ye=["data-label"],De=["data-label"],Ve=["data-label"],Se=["data-label"],Te=["data-label"],Be={class:"before:hidden lg:w-1 whitespace-nowrap"},Me={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Ue={__name:"PersonalTable",props:{checkable:Boolean,checkDelete:Boolean},emits:["changePage","confirm","sort"],setup(V,{emit:$}){const{t:c}=ne(),g=ie(),S=re(),d=x(),k=f(()=>{var e;return(e=d.personal)==null?void 0:e.personas}),T=f(()=>d.personal.total);console.log(k);const P=v(!1),C=v(!1),E=f(()=>d.personal.perPage),h=f(()=>d.personal.page);v([]);const b=v([]),j=f(()=>k.value),l=(e="")=>({0:"inactive",1:"active",2:"deleted"})[e],i=v(!1),p=e=>{i.value=!i.value,$("sort",e,i.value)},w=f(()=>Math.ceil(T.value/E.value)),B=f(()=>+h.value),M=f(()=>{const e=[];for(let a=0;a<w.value;a++)e.push(a);return e}),U=e=>{$("changePage",e)},L=e=>{S.push({name:"PersonalesUpdate",params:{id:e}})},ee=e=>b.value=e,R=()=>{const{nombres:e,apellidos:a}=b.value;return e+a},se=c("message.personal.deleted.success"),ae=async()=>{te().then(()=>{g.success(se),$("changePage",h.value)}).catch(e=>{var a;g.error(`${c("message.personal.deleted.error")} ${(a=e==null?void 0:e.response)==null?void 0:a.data.msg}`)})},te=()=>{const{_id:e}=b.value;return N.delete(e)},le=()=>{const{_id:e}=b.value;N.restore(e).then(()=>{g.success(c("message.personal.restore.success")),$("changePage",h.value)}).catch(a=>{var s;g.error(`${c("message.personal.restore.error")} ${(s=a==null?void 0:a.response)==null?void 0:s.data.msg}`)})};return(e,a)=>(m(),I(A,null,[r(Q,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=s=>C.value=s),title:"Please confirm",button:"danger",onConfirm:ae,"has-cancel":""},{default:u(()=>[t("strong",null,[y(o(e.$t("message.personal.deleted.question"))+" ",1),t("b",null,o(R()),1)]),y(" ? ")]),_:1},8,["modelValue"]),r(Q,{modelValue:P.value,"onUpdate:modelValue":a[1]||(a[1]=s=>P.value=s),title:"Please confirm",onConfirm:le},{default:u(()=>[t("strong",null,[y(o(e.$t("message.personal.restore.question"))+" ",1),t("b",null,o(R()),1)]),y(" ? ")]),_:1},8,["modelValue"]),t("table",null,[t("thead",null,[t("tr",null,[t("th",{onClick:a[2]||(a[2]=s=>p("nombres"))},o(e.$t("message.personal.names")),1),t("th",{onClick:a[3]||(a[3]=s=>p("apellidos"))},o(e.$t("message.personal.surnames")),1),t("th",{onClick:a[4]||(a[4]=s=>p("categoria"))},o(e.$t("message.personal.category")),1),t("th",{onClick:a[5]||(a[5]=s=>p("unidadNegocio"))},o(e.$t("message.personal.businessUnit")),1),t("th",{onClick:a[6]||(a[6]=s=>p("sucursal"))},o(e.$t("message.personal.branch")),1),t("th",{onClick:a[7]||(a[7]=s=>p("estado"))},o(e.$t("message.personal.status")),1)])]),t("tbody",null,[(m(!0),I(A,null,W(n(j),(s,oe)=>{var G,H,K;return m(),I("tr",{key:s._id,onClick:q=>ee(s)},[t("td",{"data-label":e.$t("message.personal.names")},o(s.nombres),9,we),t("td",{"data-label":e.$t("message.personal.surnames")},o(s.apellidos),9,ye),t("td",{"data-label":e.$t("message.personal.category")},o((G=s==null?void 0:s.categoria)==null?void 0:G.nombre),9,De),t("td",{"data-label":e.$t("message.personal.businessUnit")},o((H=s==null?void 0:s.unidadNegocio)==null?void 0:H.nombre),9,Ve),t("td",{"data-label":e.$t("message.personal.branch")},o((K=s==null?void 0:s.sucursal)==null?void 0:K.nombre),9,Se),t("td",{"data-label":e.$t("message.personal.status")},o(e.$t(`message.personal.statuses.${l(s.estado)}`)),9,Te),t("td",Be,[r(z,{type:"justify-start lg:justify-end","no-wrap":""},{default:u(()=>[F(r(D,{color:"success",icon:n(ce),messageTooltip:"t('message.restore')",small:"",onClick:a[8]||(a[8]=q=>P.value=!0)},null,8,["icon"]),[[O,V.checkDelete&&s.estado===2]]),F(r(D,{color:"info",icon:n(ue),messageTooltip:n(c)("message.edit"),small:"",onClick:q=>L(s._id)},null,8,["icon","messageTooltip","onClick"]),[[O,!V.checkDelete&&s.estado!==2]]),F(r(D,{color:"danger",icon:n(de),messageTooltip:n(c)("message.delete"),small:"",onClick:a[9]||(a[9]=q=>C.value=!0)},null,8,["icon","messageTooltip"]),[[O,!V.checkDelete&&s.estado!==2]])]),_:2},1024)])],8,Ce)}),128))])]),t("div",Me,[r(me,null,{default:u(()=>[r(z,null,{default:u(()=>[(m(!0),I(A,null,W(n(M),s=>(m(),_(D,{key:s,active:s===n(h)-1,label:s+1,color:s===n(h)?"lightDark":"whiteDark",small:"",onClick:oe=>U(s+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),t("small",null,"Page "+o(n(B))+" of "+o(n(w)),1)]),_:1})])],64))}},qe={__name:"IndexView",setup(V){const $=v([{name:"Inicio"}]),c=x(),g=v(1),S=v(10),d=ge({switch:[]}),k=l=>{N.index(l).then(i=>{c.personal=i,g.value=i.page,S.value=i.perPage})};k({page:g.value});const T=v(!1),P=()=>{b({page:g.value}),T.value=d.switch.length!==0},C=l=>{b({page:l})},E=(l,i)=>{j({sortBy:l,sortDesc:i})},h=l=>{N.getDelete(l).then(i=>{c.personal=i,g.value=i.page,S.value=i.perPage})},b=l=>{d.switch.length===0?k({page:l}):h({page:l})},j=l=>{d.switch.length===0?k(l):h(l)};return(l,i)=>(m(),_(pe,null,{default:u(()=>[r(be,null,{default:u(()=>{var p,w,B,M,U;return[r(J,{icon:n($e),title:l.$t("message.personal.personal")},{default:u(()=>[r(D,{to:"personal/create",icon:n(ke),label:l.$t("message.add_new"),color:"success",small:""},null,8,["icon","label"])]),_:1},8,["icon","title"]),r(ve,{items:$.value},null,8,["items"]),r(he,{label:""},{default:u(()=>[r(Pe,{modelValue:d.switch,"onUpdate:modelValue":i[0]||(i[0]=L=>d.switch=L),name:"sample-switch",type:"switch",options:{one:"Mostrar registros eliminados"},onChange:P},null,8,["modelValue"])]),_:1}),(p=n(c))!=null&&p.personal?X("",!0):(m(),_(J,{key:0,icon:n(Z),title:"Empty variation"},null,8,["icon"])),(w=n(c))!=null&&w.personal?X("",!0):(m(),_(fe,{key:1,color:"danger",icon:n(Z)},{default:u(()=>[t("b",null,o(l.$t("message.empty_table"))+".",1),y(" When there's nothing to show ")]),_:1},8,["icon"])),(U=(M=(B=n(c))==null?void 0:B.personal)==null?void 0:M.personas)!=null&&U.length?(m(),_(Y,{key:2,class:"mb-6","has-table":""},{default:u(()=>[r(Ue,{checkDelete:T.value,onChangePage:C,onSort:E},null,8,["checkDelete"])]),_:1})):(m(),_(Y,{key:3},{default:u(()=>[r(_e)]),_:1}))]}),_:1})]),_:1}))}};export{qe as default};
