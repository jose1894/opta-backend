import{af as x,ag as F,as as I,a9 as N,y as q,at as z,I as O,o as P,c as T,w as m,a as l,d as A,j as D,B as f,u as d,C as b,au as E,av as G,aw as H,z as J,g as K}from"./index.cb093d8e.js";import{r as v,m as Q,u as W}from"./index.esm.25e21f11.js";import{c as $}from"./cargos.service.2d46b024.js";const X={class:"grid md:grid-cols-3 gap-4"},ae={__name:"FormView",props:{path:"",saveLabel:"",country:{}},setup(L){const u=L,{t:o}=x(),h=F(),M=I(),S=N(),p=[{id:1,label:o("message.cargo.statuses.active")},{id:0,label:o("message.cargo.statuses.inactive")},{id:2,label:o("message.cargo.statuses.deleted")}],a=q({_id:"",codigo:"00",nombre:"",estado:p[0]}),C=s=>{const{_id:e,codigo:t,nombre:r,estado:c}=s.value,n={_id:e,codigo:t,nombre:r,estado:c.id};return u.path==="create"?$.create(n):$.update(n)};z(async()=>{if(u.path==="update"){const s=await $.read(M.params);a.value=s.data,a.value.estado=p.filter(e=>e.id===s.data.estado)[0]}});const R=O(()=>({codigo:{required:v,maxLength:Q(3)},nombre:{required:v},estado:{required:v}})),g=W(R,a),U=u.path==="create"?o("message.cargo.created.success"):o("message.cargo.updated.success"),j=u.path==="create"?o("message.cargo.created.error"):o("message.cargo.updated.error"),k=async()=>{await g.value.$validate()?C(a).then(()=>{h.success(U),S.push("/setup/jobPositions")}).catch(e=>{var t,r;if((t=e.response.data)!=null&&t.msg){h.error(`${j} ${e.response.data.msg}`);return}if((r=e.response.data)!=null&&r.errors){const c=e.response.data.errors;for(let n of c);}}):console.log("error")};return(s,e)=>(P(),T(K,{isForm:"",onSubmit:J(k,["prevent"])},{footer:m(()=>[l(A,{label:s.$t(`message.${u.saveLabel}`),type:"submit",color:"success"},null,8,["label"])]),default:m(()=>{var t,r,c,n,V,_,w,B,y;return[D("div",X,[l(f,{label:s.$t("message.cargo.code"),help:(c=(r=(t=d(g))==null?void 0:t.codigo)==null?void 0:r.$errors[0])==null?void 0:c.$message},{default:m(()=>[l(b,{name:"codigo",modelValue:a.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=i=>a.value.codigo=i),icon:d(E)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),l(f,{label:s.$t("message.cargo.name"),help:(_=(V=(n=d(g))==null?void 0:n.nombre)==null?void 0:V.$errors[0])==null?void 0:_.$message},{default:m(()=>[l(b,{modelValue:a.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=i=>a.value.nombre=i),icon:d(G)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),l(f,{label:s.$t("message.cargo.status"),help:(y=(B=(w=d(g))==null?void 0:w.estado)==null?void 0:B.$errors[0])==null?void 0:y.$message},{default:m(()=>[l(b,{modelValue:a.value.estado,"onUpdate:modelValue":e[2]||(e[2]=i=>a.value.estado=i),icon:d(H),options:p},null,8,["modelValue","icon"])]),_:1},8,["label","help"])])]}),_:1},8,["onSubmit"]))}};export{ae as _};
