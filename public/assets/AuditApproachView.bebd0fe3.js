import{ar as ge,as as pe,q as ks,ag as Ke,ah as $s,aa as Vs,y as f,S as Ye,x as T,I,o as x,r as B,a,w as r,g as ie,z as fs,d as K,j as e,B as g,C as $,u as i,aw as Q,E as d,ax as G,K as de,L as we,M as Es,aj as Ds,$ as We,aP as Ns,aQ as Ms,aR as Ts,A as Te,c as he,T as ys,am as Ps,an as ws,aS as qs,aT as Ls,Q as bs,aU as Bs,O as Js,at as Hs,au as zs,_ as Ws,i as Qs,ao as Gs,aM as Ks}from"./index.e27aaed2.js";import{r as Is,u as Ys}from"./index.esm.6263d8b1.js";import{_ as F}from"./FormCheckRadioGroup.84cb26fc.js";import{e as xs}from"./enfoques.service.4fd8f7ec.js";import{C as Ss}from"./CardBoxComponentEmpty.8b08f16b.js";import"./FormCheckRadio.44135d25.js";const Se="api/riesgos",Qe={index(h){return new Promise((b,l)=>{ge.get(Se,{params:h},{headers:pe()}).then(u=>b(u.data)).catch(u=>l(u))})},create(h){return new Promise((b,l)=>{ge.post(Se,h,{headers:pe()}).then(u=>b(u)).catch(u=>l(u))})},read(h){return new Promise((b,l)=>{ge.get(`${Se}/${h.id}`,{headers:pe()}).then(u=>{b(u)}).catch(u=>l(u))})},update(h){return console.log(h),new Promise((b,l)=>{ge.put(`${Se}/${h._id}`,h,{headers:pe()}).then(u=>b(u.data)).catch(u=>l(u))})},restore(h){return new Promise((b,l)=>{ge.delete(`${Se}/restore/${h}`,{headers:pe()}).then(u=>b(u.data)).catch(u=>l(u))})},delete(h){return new Promise((b,l)=>{ge.delete(`${Se}${h}`,{headers:pe()}).then(u=>b(u.data)).catch(u=>l(u))})}};const Xe=h=>(Ps("data-v-ca990c41"),h=h(),ws(),h),Xs={class:"container mx-auto"},Zs={class:"grid md:grid-cols-1 gap-1"},ea={class:"grid lg:grid-cols-1 gap-1"},sa={style:{"margin-bottom":"1.5rem","font-weight":"700"}},aa={class:"grid md:grid-cols-2 gap-2"},oa={class:"grid lg:grid-cols-3 gap-3",style:{"margin-bottom":"1.5rem"}},ta={class:"c-card"},la={class:"c-card-header"},na={class:"c-card-content"},ia={class:"c-card"},da={class:"c-card-header"},ra={class:"c-card-content"},ca={class:"c-card"},ua={class:"c-card-header"},ma={class:"c-card-content"},ga={class:"grid lg:grid-cols-1 gap-1 card-header",style:{"margin-bottom":"1.5rem"}},pa={style:{"margin-bottom":"1.5rem","font-weight":"700"},class:"card-header-h1"},ha={class:"grid lg:grid-cols-1 gap-1"},va=Xe(()=>e("h1",{style:{"font-weight":"700"}},"Riesgo de error en los estados financieros",-1)),_a=Xe(()=>e("h1",{style:{"font-weight":"700"}},"Expectativas del cliente",-1)),ba={class:"grid md:grid-cols-2 gap-2"},fa={class:"grid lg:grid-cols-1 gap-1"},ka={style:{"margin-bottom":"1.5rem","font-weight":"700"}},$a={class:"grid md:grid-cols-2 gap-2"},Va={class:"grid lg:grid-cols-1 gap-1 card-header",style:{"margin-bottom":"1.5rem"}},ya={style:{"margin-bottom":"1.5rem","font-weight":"700"},class:"card-header-h1"},Pa={class:"grid lg:grid-cols-3 gap-3",style:{"margin-bottom":"1.5rem"}},wa={class:"c-card"},Ca={class:"c-card-header"},Ia={class:"c-card-content"},xa={class:"c-card"},Sa={class:"c-card-header"},Ta={class:"c-card-content"},Ra={class:"c-card"},Ua={class:"c-card-header"},Aa={class:"c-card-content"},Fa={class:"grid lg:grid-cols-1 gap-1",style:{"margin-bottom":"1.5rem"}},Oa={class:"grid lg:grid-cols-2 gap-2",style:{"margin-bottom":"1.5rem"}},ja={class:"grid lg:grid-cols-1 gap-1"},Ea={class:"grid lg:grid-cols-1 gap-1 card-header",style:{"margin-bottom":"1.5rem"}},Da={style:{"margin-bottom":"1.5rem","font-weight":"700"},class:"card-header-h1"},Na={class:"grid lg:grid-cols-1 gap-1"},Ma={style:{"margin-bottom":"1.5rem","font-weight":"700"}},qa={class:"grid md:grid-cols-3 gap-3"},La={class:"grid lg:grid-cols-1 gap-1"},Ba={style:{"margin-bottom":"1.5rem","font-weight":"700"}},Ja={class:"grid md:grid-cols-2 gap-2"},Ha={class:"grid lg:grid-cols-1 gap-1 card-header",style:{"margin-bottom":"1.5rem"}},za={style:{"margin-bottom":"1.5rem","font-weight":"700"},class:"card-header-h1"},Wa=Xe(()=>e("th",null,null,-1)),Qa=["data-label"],Ga={class:"c-card"},Ka={class:"c-card-header"},Ya={class:"c-card-content"},Xa={class:"c-card"},Za={class:"c-card-header"},eo={class:"c-card-content"},so=["data-label"],ao={class:"c-card"},oo={class:"c-card-header"},to={class:"c-card-content"},lo={class:"c-card"},no={class:"c-card-header"},io={class:"c-card-content"},ro=["data-label"],co={class:"c-card"},uo={class:"c-card-header"},mo={class:"c-card-content"},go={class:"c-card"},po={class:"c-card-header"},ho={class:"c-card-content"},vo=["data-label"],_o={class:"c-card"},bo={class:"c-card-header"},fo={class:"c-card-content"},ko={class:"grid lg:grid-cols-1 gap-1 card-header",style:{"margin-bottom":"1.5rem"}},$o={style:{"margin-bottom":"1.5rem","font-weight":"700"},class:"card-header-h1"},Vo={class:"grid lg:grid-cols-1 gap-1"},yo={style:{"margin-bottom":"1.5rem","font-weight":"700"}},Po={class:"grid lg:grid-cols-2 gap-2"},wo={class:"grid lg:grid-cols-1 gap-1"},Co={style:{"margin-bottom":"1.5rem","font-weight":"700"}},Io={class:"grid lg:grid-cols-1 gap-1",style:{"margin-bottom":"1.5rem"}},xo={class:"grid lg:grid-cols-1 gap-1 card-header",style:{"margin-bottom":"1.5rem"}},So={style:{"margin-bottom":"1.5rem","font-weight":"700"},class:"card-header-h1"},To={class:"grid lg:grid-cols-1 gap-1"},Ro={class:"grid lg:grid-cols-1 gap-1 card-header",style:{"margin-bottom":"1.5rem"}},Uo={style:{"margin-bottom":"1.5rem","font-weight":"700"},class:"card-header-h1"},Ao={class:"grid lg:grid-cols-1 gap-1"},Fo={class:"grid lg:grid-cols-1 gap-1 card-header",style:{"margin-bottom":"1.5rem"}},Oo={style:{"margin-bottom":"1.5rem","font-weight":"700"},class:"card-header-h1"},jo={class:"grid lg:grid-cols-1 gap-1"},Eo=Xe(()=>e("th",null,null,-1)),Do=["onClick"],No=["data-label"],Mo=["data-label"],qo=["data-label"],Lo=["data-label"],Bo=["data-label"],Jo={class:"before:hidden lg:w-1 whitespace-nowrap"},Ho={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},zo={__name:"RisksTableView",props:{path:"",saveLabel:""},emits:["changePage","confirm","sort"],setup(h,{emit:b}){const{t:l}=Ke(),u=$s();Vs();const O=f(!1),j=Ye(),se=f([]),ae=!1,J=f(!1),M=[{id:"Transacciones Recurrentes",label:l("message.risk.recurringTransactions")},{id:"Transacciones no Recurrentes",label:l("message.risk.nonRecurringTransactions")},{id:"Juicios y Estimaciones",label:l("message.risk.judgmentsAndEstimates")},{id:"accountingClosingEntries",label:l("message.risk.accountingClosingEntries")}],H=[{id:0,label:l("message.risk.quadrantI")},{id:1,label:l("message.risk.quadrantII")},{id:2,label:l("message.risk.quadrantII")},{id:3,label:l("message.risk.quadrantIV")},{id:4,label:l("message.risk.othersRisk")}],D=[{id:0,label:l("message.risk.critical")},{id:1,label:l("message.risk.strategic")},{id:3,label:l("message.risk.support")}],N=[{Intencionales:l("message.risk.intentional")},{"No Intencionales":l("message.risk.unintentional")},{"Viabilidad del negocio":l("message.risk.businessViability")},{"Expectativas del cliente":l("message.risk.customerExpectations")}];l("message.yes"),l("message.no");const _=[{id:"No aprobado",label:l("message.risk.untried")},{id:"Si",label:l("message.yes")},{id:"No",label:l("message.no")}],Y=[{id:"No aprobado",label:l("message.risk.untried")},{id:"Efectivo",label:l("message.risk.effective")},{id:"No efectivo",label:l("message.risk.noeffective")}],U=[{id:"Medio",label:l("message.risk.middle")},{id:"Largo",label:l("message.risk.low")},{id:"Alto",label:l("message.risk.high")}],re=T({radio:[]});T({switch:[]});const X=T({switch:[]}),ce=T({checkbox:[]}),Z=T({checkbox:[]}),oe=T({switch:[]}),te=T({checkbox:[]}),V=T({checkbox:[]}),y=T({checkbox:[]}),P=T({checkbox:[]}),R=T({checkbox:[]}),z=T({checkbox:[]}),ue=T({checkbox:[]}),ve=T({checkbox:[]}),_e=T({checkbox:[]}),be=T({checkbox:[]}),le=T({checkbox:[]}),p=T({checkbox:[]}),k={_id:"",titulo:"",descripcion:"",type_r1:"",type_r2:"",ref:"",riesgoProveniente:M[0],cuadrante:H[0],areaRiesgo:D[0],expectativasNegocio:"",procedimientosAdicionales:"",inherente:U[0],control:U[0],anal\u00EDtico:U[0],factorRiesgo:"",procesosInvolucrados:"",fuentesCausantes:"",consecuenciaEF:"",ase_a1:"",ase_a2:"",ase_a3:"",ase_a4:"",ase_a5:"",ase_a6:"",ase_b1:"",ase_b2:"",ase_b3:"",ase_b4:"",ase_b5:"",ase_b6:"",sel_mon:_[0],sel_mon2:_[0],sel_gen:_[0],sel_gen2:_[0],sel_esp:_[0],sel_esp2:_[0],sel2_ini:Y[0],padc_enf:"",padc_res:"",referencia:"",pfo_mpro:"",rda_resi:"",conclusion:""},o=f(k),A=I(()=>j.listRisk.riesgos),S=I(()=>j.listRisk.total),W=I(()=>A.value),Re=I(()=>j.listRisk.perPage),fe=I(()=>j.listRisk.page);f(!1);const ke=I(()=>Math.ceil(S.value/Re.value)),Ue=I(()=>+fe.value),Fe=I(()=>{const n=[];for(let s=0;s<ke.value;s++)n.push(s);return n}),c=I(()=>({titulo:{required:Is},descripcion:{required:Is}})),v=Ys(c,o),m=n=>{b("changePage",n)},E=n=>{const{indice:s,titulo:w,descripcion:ne,type_r1:ee,type_r2:me,_id:$e,riesgoProveniente:ye,cuadrante:t,areaRiesgo:Ie,expectativasNegocio:xe,procedimientosAdicionales:Pe,inherente:Ze,control:es,analitico:ss,factorRiesgo:as,procesosInvolucrados:os,fuentesCausantes:ts,consecuenciaEF:ls,ase_a1:Ae,ase_a2:Oe,ase_a3:je,ase_a4:Ee,ase_a5:De,ase_a6:Ne,ase_b1:Me,ase_b2:qe,ase_b3:Le,ase_b4:Be,ase_b5:Je,ase_b6:He,sel_mon:ns,sel_mon2:is,sel_gen:ds,sel_gen2:rs,sel_esp:cs,sel_esp2:us,sel2_ini:ms,padc_enf:gs,padc_res:ps,referencia:hs,pfo_mpro:vs,rda_resi:_s,conclusion:js}=n;o.value.ref=`${s.indice} - ${s.nombre}`,o.value.titulo=w,o.value.descripcion=ne,o.value._id=$e,o.value.riesgoProveniente=M.filter(C=>C.id===ye)[0],o.value.cuadrante=H.filter(C=>C.id===t)[0],o.value.areaRiesgo=D.filter(C=>C.id===Ie)[0],re.radio=xe,X.switch=Pe==="Si"?[Pe]:[],oe.switch=Pe==="No"?[Pe]:[],J.value=Pe==="Si",o.value.inherente=U.filter(C=>C.id===Ze)[0],o.value.control=U.filter(C=>C.id===es)[0],o.value.analitico=U.filter(C=>C.id===ss)[0],o.value.factorRiesgo=as,o.value.procesosInvolucrados=os,o.value.fuentesCausantes=ts,o.value.consecuenciaEF=ls,te.checkbox=Ae!==""?[Ae]:[],V.checkbox=Oe!==""?[Oe]:[],y.checkbox=je!==""?[je]:[],P.checkbox=Ee!==""?[Ee]:[],R.checkbox=De!==""?[De]:[],z.checkbox=Ne!==""?[Ne]:[],ue.checkbox=Me!==""?[Me]:[],ve.checkbox=qe!==""?[qe]:[],_e.checkbox=Le!==""?[Le]:[],be.checkbox=Be!==""?[Be]:[],le.checkbox=Je!==""?[Je]:[],p.checkbox=He!==""?[He]:[],ce.checkbox=ee!==""?[ee]:[],Z.checkbox=me!==""?[me]:[],o.value.sel_mon=_.filter(C=>C.id===ns)[0],o.value.sel_mon2=_.filter(C=>C.id===is)[0],o.value.sel_gen=_.filter(C=>C.id===ds)[0],o.value.sel_gen2=_.filter(C=>C.id===rs)[0],o.value.sel_esp=_.filter(C=>C.id===cs)[0],o.value.sel_esp2=_.filter(C=>C.id===us)[0],o.value.sel2_ini=Y.filter(C=>C.id===ms)[0],o.value.padc_enf=gs,o.value.padc_res=ps,o.value.referencia=hs,o.value.pfo_mpro=vs,o.value.rda_resi=_s,o.value.conclusion=js,console.log(Ae),O.value=!0},q=()=>{o.value.inherente=U[0],o.value.control=U[0],o.value.analitico=U[0],o.value.factorRiesgo="",o.value.procesosInvolucrados="",o.value.fuentesCausantes="",o.value.consecuenciaEF="",te.checkbox=[],V.checkbox=[],y.checkbox=[],P.checkbox=[],R.checkbox=[],z.checkbox=[],ue.checkbox=[],ve.checkbox=[],_e.checkbox=[],be.checkbox=[],le.checkbox=[],p.checkbox=[],o.value.sel_mon=_[0],o.value.sel_mon2=_[0],o.value.sel_gen=_[0],o.value.sel_gen2=_[0],o.value.sel_esp=_[0],o.value.sel_esp2=_[0],o.value.sel2_ini=Y[0],o.value.padc_enf="",o.value.padc_res="",o.value.referencia="",o.value.pfo_mpro="",o.value.rda_resi="",o.value.conclusion=""},Ve=n=>se.value=n,Ce=()=>l("message.audit.riskControlRegistration"),Us=l("message.risk.updated.success");l("message.risk.updated.error");const As=async()=>{await v.value.$validate()?Fs().then(()=>{O.value=!1,m(Ue.value),u.success(Us)}).catch(s=>{var w,ne,ee,me;if(console.log(s),(ne=(w=s.response)==null?void 0:w.data)!=null&&ne.msg){u.error(`${l("message.ridk.created.error")} ${s.response.data.msg}`);return}if((me=(ee=s.response)==null?void 0:ee.data)!=null&&me.errors){const $e=s.response.data.errors;for(let ye of $e);}}):console.log("error")},Fs=async n=>{const{_id:s,titulo:w,descripcion:ne,ref:ee,riesgoProveniente:me,cuadrante:$e,areaRiesgo:ye,expectativasNegocio:t,procedimientosAdicionales:Ie,inherente:xe,control:Pe,anal\u00EDtico:Ze,factorRiesgo:es,procesosInvolucrados:ss,fuentesCausantes:as,consecuenciaEF:os,ase_a1:ts,ase_a2:ls,ase_a3:Ae,ase_a4:Oe,ase_a5:je,ase_a6:Ee,ase_b1:De,ase_b2:Ne,ase_b3:Me,ase_b4:qe,ase_b5:Le,ase_b6:Be,sel_mon:Je,sel_mon2:He,sel_gen:ns,sel_gen2:is,sel_esp:ds,sel_esp2:rs,sel2_ini:cs,padc_enf:us,padc_res:ms,referencia:gs,pfo_mpro:ps,rda_resi:hs,conclusion:vs}=o.value,_s={_id:s,titulo:w,descripcion:ne,ref:ee,riesgoProveniente:me.id,cuadrante:$e.id,areaRiesgo:ye.id,expectativasNegocio:t,procedimientosAdicionales:Ie,inherente:xe.id,control:Pe.id,anal\u00EDtico:Ze.id,factorRiesgo:es,procesosInvolucrados:ss,fuentesCausantes:as,consecuenciaEF:os,ase_a1:ts,ase_a2:ls,ase_a3:Ae,ase_a4:Oe,ase_a5:je,ase_a6:Ee,ase_b1:De,ase_b2:Ne,ase_b3:Me,ase_b4:qe,ase_b5:Le,ase_b6:Be,sel_mon:Je.id,sel_mon2:He.id,sel_gen:ns.id,sel_gen2:is.id,sel_esp:ds.id,sel_esp2:rs.id,sel2_ini:cs.id,padc_enf:us,padc_res:ms,referencia:gs,pfo_mpro:ps,rda_resi:hs,conclusion:vs};return Qe.update(_s)},Os=n=>{let s=re.radio;s[0]===void 0||s[0],o.value.expectativasNegocio=s,console.log(o)},Cs=n=>{let s="";switch(n){case 0:s=oe.switch,X.switch=[],J.value=!1;break;case 1:s=X.switch,oe.switch=[],J.value=!0;break;default:s="";break}q(),o.value.procedimientosAdicionales=s[0]===void 0?"":s[0]},L=n=>{let s="";switch(n){case"ase_a1":s=te.checkbox;break;case"ase_a2":s=V.checkbox;break;case"ase_a3":s=y.checkbox;break;case"ase_a4":s=P.checkbox;break;case"ase_a5":s=R.checkbox;break;case"ase_a6":s=z.checkbox;break;case"ase_b1":s=ue.checkbox;break;case"ase_b2":s=ve.checkbox;break;case"ase_b3":s=_e.checkbox;break;case"ase_b4":s=be.checkbox;break;case"ase_b5":s=le.checkbox;break;case"ase_b6":s=p.checkbox;break;case"type_r1":s=ce.checkbox;break;case"type_r2":s=Z.checkbox;break;default:s="";break}o.value[n]=s[0]===void 0?"":s[0],console.log(o)};return(n,s)=>(x(),B(de,null,[a(We,{modelValue:O.value,"onUpdate:modelValue":s[59]||(s[59]=w=>O.value=w),title:Ce(),hasDone:ae,claseModal:"shadow-lg max-h-modal w-11/12 md:w-3/5 lg:w-8/12 xl:w-8/12 z-50",style:{height:"100%"}},{default:r(()=>[a(ie,{isForm:"",onSubmit:fs(As,["prevent"]),style:{height:"600px","overflow-y":"auto"}},{footer:r(()=>[a(K,{label:n.$t("message.submit"),type:"submit",color:"success"},null,8,["label"])]),default:r(()=>{var w,ne,ee,me,$e,ye;return[e("div",null,[e("div",Xs,[e("div",Zs,[a(g,{label:n.$t("message.risk.ref")},{default:r(()=>[a($,{name:"ref",modelValue:o.value.ref,"onUpdate:modelValue":s[0]||(s[0]=t=>o.value.ref=t),icon:i(Q),readonly:!0},null,8,["modelValue","icon"])]),_:1},8,["label"]),a(g,{label:n.$t("message.risk.title"),help:(ee=(ne=(w=i(v))==null?void 0:w.titulo)==null?void 0:ne.$errors[0])==null?void 0:ee.$message},{default:r(()=>[a($,{name:"titulo",modelValue:o.value.titulo,"onUpdate:modelValue":s[1]||(s[1]=t=>o.value.titulo=t),icon:i(Q),readonly:!0},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),a(g,{label:n.$t("message.risk.description"),help:(ye=($e=(me=i(v))==null?void 0:me.descripcion)==null?void 0:$e.$errors[0])==null?void 0:ye.$message,style:{"margin-bottom":"1.5rem"}},{default:r(()=>[a($,{type:"textarea",modelValue:o.value.descripcion,"onUpdate:modelValue":s[2]||(s[2]=t=>o.value.descripcion=t),icon:i(Q)},null,8,["modelValue","icon"])]),_:1},8,["label","help"])]),e("div",ea,[e("h1",sa,d(n.$t("message.risk.typeOfRisk")),1)]),e("div",aa,[a(g,{label:""},{default:r(()=>[a(F,{modelValue:ce.checkbox,"onUpdate:modelValue":s[3]||(s[3]=t=>ce.checkbox=t),name:"sample-checkbox",options:{"A nivel de estados financieros":i(l)("message.risk.atTheLevelOfFinancialStatements")},onChange:s[4]||(s[4]=t=>L("type_r1"))},null,8,["modelValue","options"])]),_:1}),a(g,{label:""},{default:r(()=>[a(F,{modelValue:Z.checkbox,"onUpdate:modelValue":s[5]||(s[5]=t=>Z.checkbox=t),name:"sample-checkbox",options:{"A nivel de aseveraciones":i(l)("message.risk.atTheLevelOfAssertions")},onChange:s[6]||(s[6]=t=>L("type_r2"))},null,8,["modelValue","options"])]),_:1})]),e("div",oa,[e("div",ta,[e("div",la,d(n.$t("message.risk.riskFrom")),1),e("div",na,[a(g,null,{default:r(()=>[a($,{modelValue:o.value.riesgoProveniente,"onUpdate:modelValue":s[7]||(s[7]=t=>o.value.riesgoProveniente=t),icon:i(G),options:M},null,8,["modelValue","icon"])]),_:1})])]),e("div",ia,[e("div",da,d(n.$t("message.risk.quadrant")),1),e("div",ra,[a(g,null,{default:r(()=>[a($,{modelValue:o.value.cuadrante,"onUpdate:modelValue":s[8]||(s[8]=t=>o.value.cuadrante=t),icon:i(G),options:H},null,8,["modelValue","icon"])]),_:1})])]),e("div",ca,[e("div",ua,d(n.$t("message.risk.affectedProcess")),1),e("div",ma,[a(g,null,{default:r(()=>[a($,{modelValue:o.value.areaRiesgo,"onUpdate:modelValue":s[9]||(s[9]=t=>o.value.areaRiesgo=t),icon:i(G),options:D},null,8,["modelValue","icon"])]),_:1})])])]),e("div",ga,[e("h1",pa,d(n.$t("message.risk.natureOfTheRisk")),1)]),e("div",ha,[va,_a,e("div",ba,[(x(),B(de,null,we(N,(t,Ie)=>a(g,{label:""},{default:r(()=>[a(F,{modelValue:re.radio,"onUpdate:modelValue":s[10]||(s[10]=xe=>re.radio=xe),name:"sample-radio",type:"radio",options:N[Ie],onChange:xe=>Os(N[Ie])},null,8,["modelValue","options","onChange"])]),_:2},1024)),64))])]),e("div",fa,[e("h1",ka,d(n.$t("message.risk.additionalProcedures")),1),e("div",$a,[a(g,{label:""},{default:r(()=>[a(F,{modelValue:X.switch,"onUpdate:modelValue":s[11]||(s[11]=t=>X.switch=t),name:"sample-switch",type:"switch",options:{Si:i(l)("message.yes")},onChange:s[12]||(s[12]=t=>Cs(1))},null,8,["modelValue","options"])]),_:1}),a(g,{label:""},{default:r(()=>[a(F,{modelValue:oe.switch,"onUpdate:modelValue":s[13]||(s[13]=t=>oe.switch=t),name:"sample-switch",type:"switch",options:{No:i(l)("message.no")},onChange:s[14]||(s[14]=t=>Cs(0))},null,8,["modelValue","options"])]),_:1})])]),Es(e("div",null,[e("div",Va,[e("h1",ya,d(n.$t("message.risk.risksAssessment")),1)]),e("div",Pa,[e("div",wa,[e("div",Ca,d(n.$t("message.risk.inherent")),1),e("div",Ia,[a(g,null,{default:r(()=>[a($,{modelValue:o.value.inherente,"onUpdate:modelValue":s[15]||(s[15]=t=>o.value.inherente=t),icon:i(G),options:U},null,8,["modelValue","icon"])]),_:1})])]),e("div",xa,[e("div",Sa,d(n.$t("message.risk.control")),1),e("div",Ta,[a(g,null,{default:r(()=>[a($,{modelValue:o.value.control,"onUpdate:modelValue":s[16]||(s[16]=t=>o.value.control=t),icon:i(G),options:U},null,8,["modelValue","icon"])]),_:1})])]),e("div",Ra,[e("div",Ua,d(n.$t("message.risk.analytic")),1),e("div",Aa,[a(g,null,{default:r(()=>[a($,{modelValue:o.value.anal\u00EDtico,"onUpdate:modelValue":s[17]||(s[17]=t=>o.value.anal\u00EDtico=t),icon:i(G),options:U},null,8,["modelValue","icon"])]),_:1})])])]),e("div",Fa,[a(g,{label:n.$t("message.risk.riskFactor")},{default:r(()=>[a($,{name:"titulo",modelValue:o.value.factorRiesgo,"onUpdate:modelValue":s[18]||(s[18]=t=>o.value.factorRiesgo=t),icon:i(Q)},null,8,["modelValue","icon"])]),_:1},8,["label"])]),e("div",Oa,[a(g,{label:n.$t("message.risk.processesWhereRiskIsInvolved")},{default:r(()=>[a($,{type:"textarea",modelValue:o.value.procesosInvolucrados,"onUpdate:modelValue":s[19]||(s[19]=t=>o.value.procesosInvolucrados=t),icon:i(Q)},null,8,["modelValue","icon"])]),_:1},8,["label"]),a(g,{label:n.$t("message.risk.causativeSourceOfRisk")},{default:r(()=>[a($,{type:"textarea",modelValue:o.value.fuentesCausantes,"onUpdate:modelValue":s[20]||(s[20]=t=>o.value.fuentesCausantes=t),icon:i(Q)},null,8,["modelValue","icon"])]),_:1},8,["label"])]),e("div",ja,[a(g,{label:n.$t("message.risk.impactOnTheFinancialStatementsAndAccountsConcerned")},{default:r(()=>[a($,{type:"textarea",modelValue:o.value.consecuenciaEF,"onUpdate:modelValue":s[21]||(s[21]=t=>o.value.consecuenciaEF=t),icon:i(Q)},null,8,["modelValue","icon"])]),_:1},8,["label"])]),e("div",Ea,[e("h1",Da,d(n.$t("message.risk.associatedAssertions")),1)]),e("div",Na,[e("h1",Ma,d(n.$t("message.risk.assertionsAboutTransactionClassesAndEvents")),1)]),e("div",qa,[a(g,{label:""},{default:r(()=>[a(F,{modelValue:te.checkbox,"onUpdate:modelValue":s[22]||(s[22]=t=>te.checkbox=t),name:"sample-checkbox",options:{"I. Ocurrencia (O)":n.$t("message.risk.iOccurrence(O)")},messageTooltip:i(l)("message.risk.ocurrence"),onChange:s[23]||(s[23]=t=>L("ase_a1"))},null,8,["modelValue","options","messageTooltip"])]),_:1}),a(g,{label:""},{default:r(()=>[a(F,{modelValue:V.checkbox,"onUpdate:modelValue":s[24]||(s[24]=t=>V.checkbox=t),name:"sample-checkbox",options:{"II. Integridad (I)":n.$t("message.risk.iiIntegrity(I)")},messageTooltip:i(l)("message.risk.integrity"),onChange:s[25]||(s[25]=t=>L("ase_a2"))},null,8,["modelValue","options","messageTooltip"])]),_:1}),a(g,{label:""},{default:r(()=>[a(F,{modelValue:y.checkbox,"onUpdate:modelValue":s[26]||(s[26]=t=>y.checkbox=t),name:"sample-checkbox",options:{"III. Precisi\xF3n (P)":n.$t("message.risk.iiiAccuracy(A)")},messageTooltip:i(l)("message.risk.precision"),onChange:s[27]||(s[27]=t=>L("ase_a3"))},null,8,["modelValue","options","messageTooltip"])]),_:1}),a(g,{label:""},{default:r(()=>[a(F,{modelValue:P.checkbox,"onUpdate:modelValue":s[28]||(s[28]=t=>P.checkbox=t),name:"sample-checkbox",options:{"IV. Corte (CO)":n.$t("message.risk.iVCourt(CO)")},messageTooltip:i(l)("message.risk.court"),onChange:s[29]||(s[29]=t=>L("ase_a4"))},null,8,["modelValue","options","messageTooltip"])]),_:1}),a(g,{label:""},{default:r(()=>[a(F,{modelValue:R.checkbox,"onUpdate:modelValue":s[30]||(s[30]=t=>R.checkbox=t),name:"sample-checkbox",options:{"V. Clasificaci\xF3n (CL)":n.$t("message.risk.vClassification(CL)")},messageTooltip:i(l)("message.risk.classification"),onChange:s[31]||(s[31]=t=>L("ase_a5"))},null,8,["modelValue","options","messageTooltip"])]),_:1}),a(g,{label:""},{default:r(()=>[a(F,{modelValue:z.checkbox,"onUpdate:modelValue":s[32]||(s[32]=t=>z.checkbox=t),name:"sample-checkbox",options:{"VI. Presentaci\xF3n (PR)":n.$t("message.risk.viPresentation(PR)")},messageTooltip:i(l)("message.risk.presentation"),onChange:s[33]||(s[33]=t=>L("ase_a6"))},null,8,["modelValue","options","messageTooltip"])]),_:1})]),e("div",La,[e("h1",Ba,d(n.$t("message.risk.statementsOnBalancingItems")),1)]),e("div",Ja,[a(g,{label:""},{default:r(()=>[a(F,{modelValue:ue.checkbox,"onUpdate:modelValue":s[34]||(s[34]=t=>ue.checkbox=t),name:"sample-checkbox",options:{"I. Existencia (E)":n.$t("message.risk.iExistence(E)")},messageTooltip:i(l)("message.risk.existence"),onChange:s[35]||(s[35]=t=>L("ase_b1"))},null,8,["modelValue","options","messageTooltip"])]),_:1}),a(g,{label:""},{default:r(()=>[a(F,{modelValue:ve.checkbox,"onUpdate:modelValue":s[36]||(s[36]=t=>ve.checkbox=t),name:"sample-checkbox",options:{"II. Derechos y Obligaciones (DO)":n.$t("message.risk.iiRightsAndObligations(RO)")},messageTooltip:i(l)("message.risk.rightsAndObligations"),onChange:s[37]||(s[37]=t=>L("ase_b2"))},null,8,["modelValue","options","messageTooltip"])]),_:1}),a(g,{label:""},{default:r(()=>[a(F,{modelValue:_e.checkbox,"onUpdate:modelValue":s[38]||(s[38]=t=>_e.checkbox=t),name:"sample-checkbox",options:{"III. Integrity (I)":n.$t("message.risk.iiiIntegrity(I)")},messageTooltip:i(l)("message.risk.integrity1"),onChange:s[39]||(s[39]=t=>L("ase_b3"))},null,8,["modelValue","options","messageTooltip"])]),_:1}),a(g,{label:""},{default:r(()=>[a(F,{modelValue:be.checkbox,"onUpdate:modelValue":s[40]||(s[40]=t=>be.checkbox=t),name:"sample-checkbox",options:{"IV. Precisi\xF3n, valoraci\xF3n y asignaci\xF3n (PVA)":n.$t("message.risk.ivAccuracyValuationAndAssignment(PVA)")},messageTooltip:i(l)("message.risk.accuracyValuationAndAllocation"),onChange:s[41]||(s[41]=t=>L("ase_b4"))},null,8,["modelValue","options","messageTooltip"])]),_:1}),a(g,{label:""},{default:r(()=>[a(F,{modelValue:le.checkbox,"onUpdate:modelValue":s[42]||(s[42]=t=>le.checkbox=t),name:"sample-checkbox",options:{"V. Clasificaci\xF3n (CL)":n.$t("message.risk.vClassification(CL)")},messageTooltip:i(l)("message.risk.clasification1"),onChange:s[43]||(s[43]=t=>L("ase_b5"))},null,8,["modelValue","options","messageTooltip"])]),_:1}),a(g,{label:""},{default:r(()=>[a(F,{modelValue:p.checkbox,"onUpdate:modelValue":s[44]||(s[44]=t=>p.checkbox=t),name:"sample-checkbox",options:{"VI. Presentaci\xF3n (PR)":n.$t("message.risk.viPresentation(PR)")},messageTooltip:i(l)("message.risk.presentation1"),onChange:s[45]||(s[45]=t=>L("ase_b6"))},null,8,["modelValue","options","messageTooltip"])]),_:1})]),e("div",Ha,[e("h1",za,d(n.$t("message.risk.evaluationOfControls")),1)]),e("table",null,[e("thead",null,[e("tr",null,[Wa,e("th",null,d(n.$t("message.risk.effectiveDesign")),1),e("th",null,d(n.$t("message.risk.effectiveOperability")),1)])]),e("tbody",null,[e("tr",null,[e("td",{"data-label":n.$t("message.risk.monitoring")},d(i(l)("message.risk.monitoring")),9,Qa),e("td",null,[e("div",Ga,[e("div",Ka,d(n.$t("message.risk.monitoring")),1),e("div",Ya,[a(g,null,{default:r(()=>[a($,{modelValue:o.value.sel_mon,"onUpdate:modelValue":s[46]||(s[46]=t=>o.value.sel_mon=t),icon:i(G),options:_},null,8,["modelValue","icon"])]),_:1})])])]),e("td",null,[e("div",Xa,[e("div",Za,d(n.$t("message.risk.monitoring")),1),e("div",eo,[a(g,null,{default:r(()=>[a($,{modelValue:o.value.sel_mon2,"onUpdate:modelValue":s[47]||(s[47]=t=>o.value.sel_mon2=t),icon:i(G),options:_},null,8,["modelValue","icon"])]),_:1})])])])]),e("tr",null,[e("td",{"data-label":n.$t("message.risk.general")},d(i(l)("message.risk.general")),9,so),e("td",null,[e("div",ao,[e("div",oo,d(n.$t("message.risk.general")),1),e("div",to,[a(g,null,{default:r(()=>[a($,{modelValue:o.value.sel_gen,"onUpdate:modelValue":s[48]||(s[48]=t=>o.value.sel_gen=t),icon:i(G),options:_},null,8,["modelValue","icon"])]),_:1})])])]),e("td",null,[e("div",lo,[e("div",no,d(n.$t("message.risk.general")),1),e("div",io,[a(g,null,{default:r(()=>[a($,{modelValue:o.value.sel_gen2,"onUpdate:modelValue":s[49]||(s[49]=t=>o.value.sel_gen2=t),icon:i(G),options:_},null,8,["modelValue","icon"])]),_:1})])])])]),e("tr",null,[e("td",{"data-label":n.$t("message.risk.specific")},d(i(l)("message.risk.specific")),9,ro),e("td",null,[e("div",co,[e("div",uo,d(n.$t("message.risk.specific")),1),e("div",mo,[a(g,null,{default:r(()=>[a($,{modelValue:o.value.sel_esp,"onUpdate:modelValue":s[50]||(s[50]=t=>o.value.sel_esp=t),icon:i(G),options:_},null,8,["modelValue","icon"])]),_:1})])])]),e("td",null,[e("div",go,[e("div",po,d(n.$t("message.risk.specific")),1),e("div",ho,[a(g,null,{default:r(()=>[a($,{modelValue:o.value.sel_esp2,"onUpdate:modelValue":s[51]||(s[51]=t=>o.value.sel_esp2=t),icon:i(G),options:_},null,8,["modelValue","icon"])]),_:1})])])])]),e("tr",null,[e("td",{"data-label":n.$t("message.risk.informationIntegrity")},d(i(l)("message.risk.informationIntegrity")),9,vo),e("td",null,[e("div",_o,[e("div",bo,d(n.$t("message.risk.informationIntegrity")),1),e("div",fo,[a(g,null,{default:r(()=>[a($,{modelValue:o.value.sel2_ini,"onUpdate:modelValue":s[52]||(s[52]=t=>o.value.sel2_ini=t),icon:i(G),options:Y},null,8,["modelValue","icon"])]),_:1})])])])])])]),e("div",ko,[e("h1",$o,d(n.$t("message.risk.riskReductionApproach")),1)]),e("div",Vo,[e("h1",yo,d(n.$t("message.risk.detect/CorrectExistingErrors")),1)]),e("div",Po,[a(g,{label:n.$t("message.risk.approach")},{default:r(()=>[a($,{type:"textarea",modelValue:o.value.padc_enf,"onUpdate:modelValue":s[53]||(s[53]=t=>o.value.padc_enf=t),icon:i(Q)},null,8,["modelValue","icon"])]),_:1},8,["label"]),a(g,{label:n.$t("message.risk.outcomeOfTheAuditProceduresApplied")},{default:r(()=>[a($,{type:"textarea",modelValue:o.value.padc_res,"onUpdate:modelValue":s[54]||(s[54]=t=>o.value.padc_res=t),icon:i(Q)},null,8,["modelValue","icon"])]),_:1},8,["label"])]),e("div",wo,[e("h1",Co,d(n.$t("message.risk.reference(s)ToWorkingPapers")),1)]),e("div",Io,[a(g,{label:""},{default:r(()=>[a($,{type:"textarea",modelValue:o.value.referencia,"onUpdate:modelValue":s[55]||(s[55]=t=>o.value.referencia=t),icon:i(Q)},null,8,["modelValue","icon"])]),_:1})]),e("div",xo,[e("h1",So,d(n.$t("message.risk.preventionOfFutureOccurrence:")),1)]),e("div",To,[a(g,{label:n.$t("message.risk.recommendationForProcessImprovementprocess")},{default:r(()=>[a($,{type:"textarea",modelValue:o.value.pfo_mpro,"onUpdate:modelValue":s[56]||(s[56]=t=>o.value.pfo_mpro=t),icon:i(Q)},null,8,["modelValue","icon"])]),_:1},8,["label"])]),e("div",Ro,[e("h1",Uo,d(n.$t("message.risk.residualAuditRisk")),1)]),e("div",Ao,[a(g,{label:""},{default:r(()=>[a($,{type:"textarea",modelValue:o.value.rda_resi,"onUpdate:modelValue":s[57]||(s[57]=t=>o.value.rda_resi=t),icon:i(Q)},null,8,["modelValue","icon"])]),_:1})]),e("div",Fo,[e("h1",Oo,d(n.$t("message.risk.effectOnTheAuditOpinion")),1)]),e("div",jo,[a(g,{label:""},{default:r(()=>[a($,{type:"textarea",modelValue:o.value.conclusion,"onUpdate:modelValue":s[58]||(s[58]=t=>o.value.conclusion=t),icon:i(Q)},null,8,["modelValue","icon"])]),_:1})])],512),[[Ds,J.value]])])])]}),_:1},8,["onSubmit"])]),_:1},8,["modelValue","title"]),e("table",null,[e("thead",null,[e("tr",null,[e("th",null,d(n.$t("message.audit.ref")),1),e("th",null,d(n.$t("message.audit.title")),1),e("th",null,d(n.$t("message.audit.auditor")),1),e("th",null,d(n.$t("message.audit.quadrant")),1),e("th",null,d(n.$t("message.audit.date")),1),Eo])]),e("tbody",null,[(x(!0),B(de,null,we(i(W),(w,ne)=>(x(),B("tr",{key:w._id,onClick:ee=>Ve(w)},[e("td",{"data-label":n.$t("message.audit.ref")},d(w.indice.indice),9,No),e("td",{"data-label":n.$t("message.audit.title")},d(w.titulo),9,Mo),e("td",{"data-label":n.$t("message.audit.auditor")},d(w.usuario.lastname)+" "+d(w.usuario.firstname),9,qo),e("td",{"data-label":n.$t("message.audit.quadrant")}," cuadrante ",8,Lo),e("td",{"data-label":n.$t("message.audit.date")}," 16-08-2023 ",8,Bo),e("td",Jo,[a(Te,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[a(K,{color:"info",icon:i(Ns),messageTooltip:i(l)("message.edit"),small:"",onClick:ee=>E(w)},null,8,["icon","messageTooltip","onClick"]),a(K,{color:"info",icon:i(Ms),messageTooltip:i(l)("message.print"),small:""},null,8,["icon","messageTooltip"]),a(K,{color:"info",icon:i(Ts),messageTooltip:i(l)("message.delete"),small:""},null,8,["icon","messageTooltip"])]),_:2},1024)])],8,Do))),128))])]),e("div",Ho,[a(ys,null,{default:r(()=>[a(Te,null,{default:r(()=>[(x(!0),B(de,null,we(i(Fe),w=>(x(),he(K,{key:w,active:w===i(fe)-1,label:w+1,color:w===i(fe)?"lightDark":"whiteDark",small:"",onClick:ne=>m(w+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"Page "+d(i(Ue))+" of "+d(i(ke)),1)]),_:1})])],64))}},Wo=ks(zo,[["__scopeId","data-v-ca990c41"]]),ze="api/uploads/",Ge={create(h){return new Promise((b,l)=>{ge.post(ze,h,{headers:pe(!0)}).then(u=>b(u)).catch(u=>l(u))})},read(h,b,l={}){return new Promise((u,O)=>{ge.get(`${ze}archivoProyectoYEnfoquesGet/${h}/${b}`,{params:l},{headers:pe()}).then(j=>u(j.data)).catch(j=>O(j))})},downloadFiled(h){return new Promise((b,l)=>{ge.get(`${ze}download/${h}`,{headers:pe()}).then(u=>b(u)).catch(u=>l(u))})},delete(h){return new Promise((b,l)=>{ge.delete(`${ze}/${h}`,{headers:pe()}).then(u=>b(u.data)).catch(u=>l(u))})}},Qo=e("th",null,null,-1),Go=["onClick"],Ko=["data-label"],Yo={class:"before:hidden lg:w-1 whitespace-nowrap"},Xo={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Zo={__name:"UploadTableView",emits:["changePage","confirm","sort"],setup(h,{emit:b}){const{t:l}=Ke(),u=$s();Vs();const O=Ye(),j=f([]),se=I(()=>O.filesProjectApproaches.Uploads),ae=I(()=>O.filesProjectApproaches.total),J=I(()=>se.value),M=I(()=>O.filesProjectApproaches.perPage),H=I(()=>O.filesProjectApproaches.page),D=f(!1),N=V=>{D.value=!D.value,b("sort",V,D.value)},_=I(()=>Math.ceil(ae.value/M.value)),Y=I(()=>+H.value),U=I(()=>{const V=[];for(let y=0;y<_.value;y++)V.push(y);return V}),re=V=>{b("changePage",V)},X=V=>{Ge.downloadFiled(V._id)},ce=V=>j.value=V,Z=l("message.file.deleted.success");l("message.file.deleted.error");const oe=async V=>{j.value=V,te().then(()=>{u.success(Z),b("changePage",H.value)}).catch(y=>{var P;u.error(`${l("message.file.deleted.erro")} ${(P=y==null?void 0:y.response)==null?void 0:P.data.msg}`)})},te=()=>{const{_id:V}=j.value;return Ge.delete(V)};return(V,y)=>(x(),B(de,null,[e("table",null,[e("thead",null,[e("tr",null,[e("th",{onClick:y[0]||(y[0]=P=>N("nombre"))},d(V.$t("message.file.name")),1),Qo])]),e("tbody",null,[(x(!0),B(de,null,we(i(J),(P,R)=>(x(),B("tr",{key:P._id,onClick:z=>ce(P)},[e("td",{"data-label":V.$t("message.file.name")},d(P.nombre),9,Ko),e("td",Yo,[a(Te,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[a(K,{color:"info",icon:i(qs),messageTooltip:i(l)("message.dolownd"),small:"",onClick:z=>X(P)},null,8,["icon","messageTooltip","onClick"]),a(K,{color:"info",icon:i(Ts),messageTooltip:i(l)("message.delete"),small:"",onClick:z=>oe(P)},null,8,["icon","messageTooltip","onClick"])]),_:2},1024)])],8,Go))),128))])]),e("div",Xo,[a(ys,null,{default:r(()=>[a(Te,null,{default:r(()=>[(x(!0),B(de,null,we(i(U),P=>(x(),he(K,{key:P,active:P===i(H)-1,label:P+1,color:P===i(H)?"lightDark":"whiteDark",small:"",onClick:R=>re(P+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"Page "+d(i(Y))+" of "+d(i(_)),1)]),_:1})])],64))}};const Rs=h=>(Ps("data-v-ac384f36"),h=h(),ws(),h),et={style:{"font-weight":"700"}},st={class:"c-element-h2"},at={class:"c-element-h2"},ot={class:"mb-0"},tt=Rs(()=>e("label",{for:"formFile",class:"mb-0 inline-block text-neutral-700 dark:text-neutral-200"},"Default file input example",-1)),lt={class:"title-modal"},nt={style:{"font-weight":"700"}},it={class:"c-element-h2"},dt={class:"c-element-h2"},rt={class:"grid md:grid-cols-1 gap-2"},ct=Rs(()=>e("th",null,null,-1)),ut=["data-label"],mt=["data-label"],gt={class:"before:hidden lg:w-1 whitespace-nowrap"},pt={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},ht={__name:"AudiTableView",props:{path:"",saveLabel:"",state:{}},emits:["changePage","confirm","sort"],setup(h,{emit:b}){const l=h,{t:u}=Ke(),O=f(1),j=f(10),se=$s();Vs();const ae=f(!1),J=f(!1),M=Ye(),H=!1;Ls();const D=f(null),N=f(null),_=f(),{_id:Y,codigo:U}=JSON.parse(localStorage.getItem("selectedProject")),re=I(()=>M.auditAproaches.enfoques),X=I(()=>M.auditAproaches.total),ce=I(()=>M.auditAproaches.perPage),Z=I(()=>M.auditAproaches.page),oe=c=>{const v=JSON.parse(localStorage.getItem("selectedProject"));p(v._id,_.value)},te=(c,v)=>{const m=JSON.parse(localStorage.getItem("selectedProject"));p(m._id,_.value)},V=I(()=>re.value),y=f(!1),R=f({_id:"",indice:"",titulo:"",descripcion:"",proyecto:Y}),z=c=>{y.value=!y.value,b("sort",c,y.value)},ue=I(()=>Math.ceil(X.value/ce.value)),ve=I(()=>+Z.value),_e=I(()=>{const c=[];for(let v=0;v<ue.value;v++)c.push(v);return c}),be=c=>{b("changePage",c)},le=async c=>{const{ruta:v,_id:m}=c,E=JSON.parse(localStorage.getItem("selectedProject"));D.value=`${E.codigo}/${v}`,_.value=m,p(),setTimeout(()=>{J.value=!0},10)},p=c=>{const v=JSON.parse(localStorage.getItem("selectedProject"));Ge.read(v._id,_.value,c).then(m=>{console.log(m),M.filesProjectApproaches=m,O.value=m.page,j.value=m.perPage})},k=l.path==="create"?u("message.file.created.success"):u("message.file.updated.success");l.path==="create"?u("message.file.created.error"):u("message.file.updated.error");const o=async()=>{A().then(()=>{J.value=!1,se.success(k)}).catch(c=>{var v,m,E,q;if(console.log(c),(m=(v=c.response)==null?void 0:v.data)!=null&&m.msg){se.error(`${u("message.file.created.error")} ${c.response.data.msg}`);return}if((q=(E=c.response)==null?void 0:E.data)!=null&&q.errors){const Ve=c.response.data.errors;for(let Ce of Ve);}})},A=async()=>{const c=new FormData;return c.append("archivo",N.value),c.append("ruta",D.value),c.append("nombre",N.value.name),c.append("type",N.value.type),c.append("proyecto",Y),c.append("enfoque",_.value),Ge.create(c)},S=c=>{N.value=c.target.files[0]},W=c=>{const{indice:v,_id:m}=c;R.value.indice=m,R.value.titulo="",R.value.descripcion="",setTimeout(()=>{ae.value=!0},10)},Re=l.path==="create"?u("message.risk.created.success"):u("message.risk.updated.success");l.path==="create"?u("message.risk.created.error"):u("message.risk.updated.error");const fe=async()=>{ke(R).then(()=>{ae.value=!1,se.success(Re)}).catch(c=>{var v,m,E,q;if(console.log(c),(m=(v=c.response)==null?void 0:v.data)!=null&&m.msg){se.error(`${u("message.risk.created.error")} ${c.response.data.msg}`);return}if((q=(E=c.response)==null?void 0:E.data)!=null&&q.errors){const Ve=c.response.data.errors;for(let Ce of Ve);}})},ke=async c=>{const{_id:v,indice:m,titulo:E,descripcion:q,proyecto:Ve}=c.value,Ce={_id:v,indice:m,titulo:E,descripcion:q,proyecto:Ve};return l.path==="create"?Qe.create(Ce):Qe.update(Ce)},Ue=()=>{const{_id:c,codigo:v}=JSON.parse(localStorage.getItem("selectedProject"));return v},Fe=()=>{const{cliente:c}=JSON.parse(localStorage.getItem("selectedProject"));return c==null?void 0:c.nombre};return(c,v)=>(x(),B(de,null,[a(We,{modelValue:J.value,"onUpdate:modelValue":v[0]||(v[0]=m=>J.value=m),hasDone:H},{default:r(()=>{var m,E,q;return[a(ie,{style:{padding:"0px"}},{default:r(()=>[e("div",null,[e("h2",et,d(c.$t("message.project.project"))+": "+d(Ue()),1),e("h2",st,d(c.$t("message.project.client"))+": "+d(Fe()),1),e("h2",at,d(c.$t("message.audit.uploadFile")),1)]),a(ie,{isForm:"",onSubmit:fs(o,["prevent"]),class:"bg-gray-200",style:{padding:"0px"}},{footer:r(()=>[a(K,{label:c.$t("message.submit"),type:"submit",color:"success"},null,8,["label"])]),default:r(()=>[e("div",ot,[tt,e("input",{class:"relative m-0 block w-full min-w-0 flex-auto rounded border border-solid border-neutral-300 bg-clip-padding px-3 py-[0.32rem] text-base font-normal text-neutral-700 transition duration-300 ease-in-out file:-mx-3 file:-my-[0.32rem] file:overflow-hidden file:rounded-none file:border-0 file:border-solid file:border-inherit file:bg-neutral-100 file:px-3 file:py-[0.32rem] file:text-neutral-700 file:transition file:duration-150 file:ease-in-out file:[border-inline-end-width:1px] file:[margin-inline-end:0.75rem] hover:file:bg-neutral-200 focus:border-primary focus:text-neutral-700 focus:shadow-te-primary focus:outline-none dark:border-neutral-600 dark:text-neutral-200 dark:file:bg-neutral-700 dark:file:text-neutral-100 dark:focus:border-primary",type:"file",ref_key:"archivo",ref:N,onChange:S},null,544)])]),_:1},8,["onSubmit"])]),_:1}),(q=(E=(m=i(M))==null?void 0:m.filesProjectApproaches)==null?void 0:E.Uploads)!=null&&q.length?(x(),he(ie,{key:0,class:"mb-6","has-table":""},{default:r(()=>[a(Zo,{onChangePage:oe,onSort:te})]),_:1})):bs("",!0)]}),_:1},8,["modelValue"]),a(We,{modelValue:ae.value,"onUpdate:modelValue":v[3]||(v[3]=m=>ae.value=m),hasDone:H},{default:r(()=>[e("div",lt,[e("h2",nt,d(c.$t("message.project.project"))+": "+d(Ue()),1),e("h2",it,d(c.$t("message.project.client"))+": "+d(Fe()),1),e("h2",dt,d(c.$t("message.audit.addRisk")),1)]),a(ie,{isForm:"",onSubmit:fs(fe,["prevent"])},{footer:r(()=>[a(K,{label:c.$t("message.submit"),type:"submit",color:"success"},null,8,["label"])]),default:r(()=>[e("div",rt,[a(g,{label:c.$t("message.audit.title")},{default:r(()=>[a($,{name:"indice",modelValue:R.value.titulo,"onUpdate:modelValue":v[1]||(v[1]=m=>R.value.titulo=m),icon:c.mdiCodeBraces},null,8,["modelValue","icon"])]),_:1},8,["label"]),a(g,{label:c.$t("message.audit.description")},{default:r(()=>[a($,{type:"textarea",name:"descripcion",modelValue:R.value.descripcion,"onUpdate:modelValue":v[2]||(v[2]=m=>R.value.descripcion=m),icon:c.mdiCodeBraces},null,8,["modelValue","icon"])]),_:1},8,["label"])])]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"]),e("table",null,[e("thead",null,[e("tr",null,[e("th",{onClick:v[4]||(v[4]=m=>z("indice"))},d(c.$t("message.audit.index")),1),e("th",{onClick:v[5]||(v[5]=m=>z("nombre"))},d(c.$t("message.audit.description")),1),ct])]),e("tbody",null,[(x(!0),B(de,null,we(i(V),(m,E)=>(x(),B("tr",{key:m._id},[e("td",{"data-label":c.$t("message.audit.index")},d(m.indice),9,ut),e("td",{"data-label":c.$t("message.audit.description")},d(m.nombre)+" "+d(m.rcr),9,mt),e("td",gt,[a(Te,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[m.rcr===1?(x(),he(K,{key:0,color:"info",icon:i(Bs),messageTooltip:i(u)("message.addRisk"),small:"",onClick:q=>W(m)},null,8,["icon","messageTooltip","onClick"])):bs("",!0),m.visible!==1?(x(),he(K,{key:1,color:"info",icon:i(Js),messageTooltip:i(u)("message.upload"),small:"",onClick:q=>le(m)},null,8,["icon","messageTooltip","onClick"])):bs("",!0)]),_:2},1024)])]))),128))])]),e("div",pt,[a(ys,null,{default:r(()=>[a(Te,null,{default:r(()=>[(x(!0),B(de,null,we(i(_e),m=>(x(),he(K,{key:m,active:m===i(Z)-1,label:m+1,color:m===i(Z)?"lightDark":"whiteDark",small:"",onClick:E=>be(m+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),e("small",null,"Page "+d(i(ve))+" of "+d(i(ue)),1)]),_:1})])],64))}},vt=ks(ht,[["__scopeId","data-v-ac384f36"]]);const _t=h=>(Ps("data-v-979ee382"),h=h(),ws(),h),bt={class:"c-header"},ft={class:"c-body"},kt={class:"c-padding-items"},$t={class:"c-padding-items"},Vt={class:"c-padding-items"},yt={class:"c-padding-items"},Pt={class:"c-padding-items"},wt={class:"c-padding-items"},Ct={class:"c-padding-items"},It={class:"container-table col-span-4"},xt={class:"grid grid-cols-1 sm:grid-cols-6 gap-2"},St={class:"container-treeview bg-gray-200 col-span-2"},Tt=_t(()=>e("hr",{class:"c-hr"},null,-1)),Rt={class:"c-ul"},Ut={class:"c-li"},At={class:"c-li"},Ft={class:"container-table col-span-4"},Ot={class:"header-title"},jt={class:"span-header-title"},Et={__name:"AuditApproachView",emits:["changePage","confirm","sort"],setup(h,{emit:b}){const{t:l}=Ke(),u=f(1),O=f(),j=f(10),se=f([]),ae=f(),J=f(),M=f(),H=Hs(),D=Ye(),N=f(!1),_=!1,Y=f(1),U=f(10),re=T({selectedNodeId:null}),X=f([{name:"Inicio",link:"/setup/papers/"}]);f(0),f(-1);const ce=p=>{te()},Z=p=>{O.value=p,ae.value=p==null?void 0:p.ruta,y()},oe=(p,k)=>{V()},te=p=>{y()},V=(p,k)=>{y()},y=p=>{var S;const{_id:k}=(S=O.value)!=null?S:{},o={page:u.value},A=k===void 0?1:k;xs.getChildrenWithPaginate(A,o).then(W=>{D.auditAproaches=W,u.value=W.page,j.value=W.perPage})};y({page:u.value}),zs(async()=>{const{_id:p,codigo:k,nombre:o}=H.params;J.value=p,M.value=k,X.value.push({name:`${k} - ${o}`});let A=await xs.index();const{enfoques:S}=A,W=S.filter(ke=>ke.tipoNodo===0),Re=S.filter(ke=>ke.tipoNodo!==0),fe=P(W,Re);console.log(fe[0].children),se.value=fe[0].children});const P=(p,k=[])=>p.map(o=>{const A=k.filter(S=>{var W;return((W=S==null?void 0:S.areaPadre)==null?void 0:W._id)===o._id});return A.length>0&&(o.children=A,P(A,k)),o}),R=()=>{N.value=!0},z=()=>l("message.audit.riskControlRegistration"),ue=p=>{_e({pageRisk:p})},ve=(p,k)=>{be({sortBy:p,sortDesc:k})},_e=p=>{le({pageRisk:p})},be=(p,k)=>{le({sortBy:p,sortDesc:k})},le=p=>{Qe.index(p).then(k=>{console.log(k),D.listRisk=k,Y.value=k.page,U.value=k.perPage})};return le({page:Y.value}),(p,k)=>(x(),B(de,null,[a(We,{modelValue:N.value,"onUpdate:modelValue":k[0]||(k[0]=o=>N.value=o),title:z(),hasDone:_,claseModal:"shadow-lg max-h-modal w-11/12 md:w-3/5 lg:w-8/12 xl:w-8/12 z-50"},{default:r(()=>[a(ie,null,{default:r(()=>[e("div",bt,[e("div",ft,[e("div",kt,[e("span",null,d(p.$t("message.audit.RiskMatrix")),1)]),e("div",$t,[e("span",null,d(p.$t("message.audit.allRisks")),1)]),e("div",Vt,[e("span",null,d(p.$t("message.audit.quadrantI")),1)]),e("div",yt,[e("span",null,d(p.$t("message.audit.quadrantII")),1)]),e("div",Pt,[e("span",null,d(p.$t("message.audit.quadrantIII")),1)]),e("div",wt,[e("span",null,d(p.$t("message.audit.quadrantIV")),1)]),e("div",Ct,[e("span",null,d(p.$t("message.audit.customerExpectations")),1)])])])]),_:1}),a(ie,{style:{"padding-left":"0px","padding-right":"0px"}},{default:r(()=>{var o,A,S;return[e("div",It,[(S=(A=(o=i(D))==null?void 0:o.listRisk)==null?void 0:A.riesgos)!=null&&S.length?(x(),he(ie,{key:0,class:"mb-6","has-table":""},{default:r(()=>[a(Wo,{onChangePage:ue,onSort:ve})]),_:1})):(x(),he(ie,{key:1},{default:r(()=>[a(Ss)]),_:1}))])]}),_:1})]),_:1},8,["modelValue","title"]),a(Ws,null,{default:r(()=>[a(Qs,null,{default:r(()=>{var o,A,S;return[a(Gs,{items:X.value},null,8,["items"]),e("div",xt,[e("div",St,[a(Ks,{nodes:se.value,treeView:!1,selectedNodeId:re.selectedNodeId,onItemSelected:Z},null,8,["nodes","selectedNodeId"]),Tt,e("div",null,[e("ul",Rt,[e("li",{class:"c-li",style:{"margin-top":"10px"},onClick:k[1]||(k[1]=W=>R())},[e("span",null,d(p.$t("message.audit.riskControlRegistration")),1)]),e("li",Ut,[e("span",null,d(p.$t("message.audit.pointsOf")),1)]),e("li",At,[e("span",null,d(p.$t("message.audit.sampling")),1)])])])]),e("div",Ft,[(S=(A=(o=i(D))==null?void 0:o.auditAproaches)==null?void 0:A.enfoques)!=null&&S.length?(x(),he(ie,{key:0,class:"mb-6","has-table":""},{default:r(()=>[e("div",Ot,[e("span",jt,d(ae.value),1)]),a(vt,{path:"create",onChangePage:ce,onSort:oe})]),_:1})):(x(),he(ie,{key:1},{default:r(()=>[a(Ss)]),_:1}))])])]}),_:1})]),_:1})],64))}},Jt=ks(Et,[["__scopeId","data-v-979ee382"]]);export{Jt as default};
