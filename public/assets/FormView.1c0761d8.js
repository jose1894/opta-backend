import{af as F,ag as I,as as N,a9 as j,y as q,at as z,I as O,o as T,c as A,w as m,a as l,d as D,j as E,B as v,u,C as $,au as G,av as H,aw as J,z as K,g as P}from"./index.cb093d8e.js";import{r as b,m as Q,u as W}from"./index.esm.25e21f11.js";import{i as M}from"./itemsMenu.service.0b5d8a26.js";const X={class:"grid md:grid-cols-3 gap-4"},se={__name:"FormView",props:{path:"",saveLabel:"",country:{}},setup(y){const d=y,{t}=F(),h=I(),L=N(),S=j(),g=[{id:1,label:t("message.itemMenu.statuses.active")},{id:0,label:t("message.itemMenu.statuses.inactive")},{id:2,label:t("message.itemMenu.statuses.deleted")}],s=q({_id:"",codigo:"00",descripcion:"",estado:g[0]}),C=a=>{const{_id:e,codigo:o,descripcion:r,estado:i}=a.value,n={_id:e,codigo:o,descripcion:r,estado:i.id};return d.path==="create"?M.create(n):M.update(n)};z(async()=>{if(d.path==="update"){const a=await M.read(L.params);s.value=a.data,s.value.estado=g.filter(e=>e.id===a.data.estado)[0]}});const R=O(()=>({codigo:{required:b,maxLength:Q(3)},descripcion:{required:b},estado:{required:b}})),p=W(R,s),U=d.path==="create"?t("message.itemMenu.created.success"):t("message.itemMenu.updated.success"),k=d.path==="create"?t("message.itemMenu.created.error"):t("message.itemMenu.updated.error"),x=async()=>{await p.value.$validate()?C(s).then(()=>{h.success(U),S.push("/setup/itemsMenu")}).catch(e=>{var o,r,i;if(console.log(e),(r=(o=e.response)==null?void 0:o.data)!=null&&r.msg){h.error(`${k} ${e.response.data.msg}`);return}if((i=e.response.data)!=null&&i.errors){const n=e.response.data.errors;for(let f of n);}}):console.log("error")};return(a,e)=>(T(),A(P,{isForm:"",onSubmit:K(x,["prevent"])},{footer:m(()=>[l(D,{label:a.$t(`message.${d.saveLabel}`),type:"submit",color:"success"},null,8,["label"])]),default:m(()=>{var o,r,i,n,f,V,_,w,B;return[E("div",X,[l(v,{label:a.$t("message.itemMenu.code"),help:(i=(r=(o=u(p))==null?void 0:o.codigo)==null?void 0:r.$errors[0])==null?void 0:i.$message},{default:m(()=>[l($,{name:"codigo",modelValue:s.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=c=>s.value.codigo=c),icon:u(G)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),l(v,{label:a.$t("message.itemMenu.description"),help:(V=(f=(n=u(p))==null?void 0:n.descripcion)==null?void 0:f.$errors[0])==null?void 0:V.$message},{default:m(()=>[l($,{modelValue:s.value.descripcion,"onUpdate:modelValue":e[1]||(e[1]=c=>s.value.descripcion=c),icon:u(H)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),l(v,{label:a.$t("message.itemMenu.status"),help:(B=(w=(_=u(p))==null?void 0:_.estado)==null?void 0:w.$errors[0])==null?void 0:B.$message},{default:m(()=>[l($,{modelValue:s.value.estado,"onUpdate:modelValue":e[2]||(e[2]=c=>s.value.estado=c),icon:u(J),options:g},null,8,["modelValue","icon"])]),_:1},8,["label","help"])])]}),_:1},8,["onSubmit"]))}};export{se as _};
