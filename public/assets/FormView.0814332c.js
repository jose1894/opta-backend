import{af as F,ag as I,as as N,a9 as j,y as q,at as z,I as O,o as T,c as A,w as m,a as r,d as D,j as E,B as f,u as d,C as b,au as G,av as H,aw as J,z as K,g as P}from"./index.cb093d8e.js";import{r as v,m as Q,u as W}from"./index.esm.25e21f11.js";import{l as $}from"./languages.service.311dc936.js";const X={class:"grid md:grid-cols-3 gap-4"},ae={__name:"FormView",props:{path:"",saveLabel:"",country:{}},setup(L){const c=L,{t:o}=F(),h=I(),M=N(),S=j(),p=[{id:1,label:o("message.language.statuses.active")},{id:0,label:o("message.language.statuses.inactive")},{id:2,label:o("message.language.statuses.deleted")}],a=q({_id:"",codigo:"00",nombre:"",estado:p[0]}),C=s=>{const{_id:e,codigo:t,nombre:l,estado:n}=s.value,u={_id:e,codigo:t,nombre:l,estado:n.id};return c.path==="create"?$.create(u):$.update(u)};z(async()=>{if(c.path==="update"){const s=await $.read(M.params);a.value=s.data,a.value.estado=p.filter(e=>e.id===s.data.estado)[0]}});const R=O(()=>({codigo:{required:v,maxLength:Q(3)},nombre:{required:v},estado:{required:v}})),g=W(R,a),U=c.path==="create"?o("message.language.created.success"):o("message.language.updated.success"),k=c.path==="create"?o("message.language.created.error"):o("message.language.updated.error"),x=async()=>{await g.value.$validate()?C(a).then(()=>{h.success(U),S.push("/setup/languages")}).catch(e=>{var t,l;if((t=e.response.data)!=null&&t.msg){h.error(`${k} ${e.response.data.msg}`);return}if((l=e.response.data)!=null&&l.errors){const n=e.response.data.errors;for(let u of n);}}):console.log("error")};return(s,e)=>(T(),A(P,{isForm:"",onSubmit:K(x,["prevent"])},{footer:m(()=>[r(D,{label:s.$t(`message.${c.saveLabel}`),type:"submit",color:"success"},null,8,["label"])]),default:m(()=>{var t,l,n,u,V,_,w,B,y;return[E("div",X,[r(f,{label:s.$t("message.language.code"),help:(n=(l=(t=d(g))==null?void 0:t.codigo)==null?void 0:l.$errors[0])==null?void 0:n.$message},{default:m(()=>[r(b,{name:"codigo",modelValue:a.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=i=>a.value.codigo=i),icon:d(G)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),r(f,{label:s.$t("message.language.name"),help:(_=(V=(u=d(g))==null?void 0:u.nombre)==null?void 0:V.$errors[0])==null?void 0:_.$message},{default:m(()=>[r(b,{modelValue:a.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=i=>a.value.nombre=i),icon:d(H)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),r(f,{label:s.$t("message.language.status"),help:(y=(B=(w=d(g))==null?void 0:w.estado)==null?void 0:B.$errors[0])==null?void 0:y.$message},{default:m(()=>[r(b,{modelValue:a.value.estado,"onUpdate:modelValue":e[2]||(e[2]=i=>a.value.estado=i),icon:d(J),options:p},null,8,["modelValue","icon"])]),_:1},8,["label","help"])])]}),_:1},8,["onSubmit"]))}};export{ae as _};
