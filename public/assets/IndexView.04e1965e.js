import{ag as ae,ah as se,aa as le,S as J,I as h,y as v,o as m,r as U,a as i,w as r,j as l,f as w,E as c,$ as G,K as q,L as H,M as F,d as D,u as n,ai as ne,aj as O,ak as oe,al as ie,A as K,c as _,T as ce,x as ue,_ as re,b as Q,ao as de,B as me,Q as W,e as ge,g as z,i as ve,ap as fe,aq as he}from"./index.e27aaed2.js";import{C as pe}from"./CardBoxComponentEmpty.8b08f16b.js";import{_ as be}from"./FormCheckRadioGroup.84cb26fc.js";import{a as I}from"./activities.service.76eab6f5.js";import"./FormCheckRadio.44135d25.js";const $e=l("th",null,null,-1),_e=["onClick"],ke=["data-label"],ye=["data-label"],Ce=["data-label"],Pe=["data-label"],we={class:"before:hidden lg:w-1 whitespace-nowrap"},De={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Ve={__name:"ActivityTable.view",props:{checkable:Boolean,checkDelete:Boolean},emits:["changePage","confirm","sort"],setup(V,{emit:$}){const{t:u}=ae(),g=se(),T=le(),d=J(),k=h(()=>d.activities.actividades),S=h(()=>d.activities.total),y=v(!1),C=v(!1),N=h(()=>d.activities.perPage),f=h(()=>d.activities.page);v([]);const p=v([]),E=h(()=>k.value),s=(e="")=>({0:"inactive",1:"active",2:"deleted"})[e],o=v(!1),b=e=>{o.value=!o.value,$("sort",e,o.value)},P=h(()=>Math.ceil(S.value/N.value)),A=h(()=>+f.value),B=h(()=>{const e=[];for(let t=0;t<P.value;t++)e.push(t);return e}),M=e=>{$("changePage",e)},j=e=>{T.push({name:"ActivitiesUpdate",params:{id:e}})},X=e=>p.value=e,R=()=>{const{nombre:e}=p.value;return e},Y=u("message.activity.deleted.success"),Z=async()=>{x().then(()=>{g.success(Y),$("changePage",f.value)}).catch(e=>{var t;g.error(`${u("message.activity.deleted.error")} ${(t=e==null?void 0:e.response)==null?void 0:t.data.msg}`)})},x=()=>{const{_id:e}=p.value;return I.delete(e)},ee=()=>{const{_id:e}=p.value;I.restore(e).then(()=>{g.success(u("message.activity.restore.success")),$("changePage",f.value)}).catch(t=>{var a;g.error(`${u("message.activity.restore.error")} ${(a=t==null?void 0:t.response)==null?void 0:a.data.msg}`)})};return(e,t)=>(m(),U(q,null,[i(G,{modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=a=>C.value=a),title:"Please confirm",button:"danger",onConfirm:Z,"has-cancel":""},{default:r(()=>[l("strong",null,[w(c(e.$t("message.activity.deleted.question"))+" ",1),l("b",null,c(R()),1)]),w(" ? ")]),_:1},8,["modelValue"]),i(G,{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=a=>y.value=a),title:"Please confirm",onConfirm:ee},{default:r(()=>[l("strong",null,[w(c(e.$t("message.activity.restore.question"))+" ",1),l("b",null,c(R()),1)]),w(" ? ")]),_:1},8,["modelValue"]),l("table",null,[l("thead",null,[l("tr",null,[l("th",{onClick:t[2]||(t[2]=a=>b("nombre"))},c(e.$t("message.activity.name")),1),l("th",{onClick:t[3]||(t[3]=a=>b("siglas"))},c(e.$t("message.activity.acronyms")),1),l("th",{onClick:t[4]||(t[4]=a=>b("unidadNegocio"))},c(e.$t("message.activity.bussinesUnit")),1),l("th",{onClick:t[5]||(t[5]=a=>b("estado"))},c(e.$t("message.activity.status")),1),$e])]),l("tbody",null,[(m(!0),U(q,null,H(n(E),(a,te)=>(m(),U("tr",{key:a._id,onClick:L=>X(a)},[l("td",{"data-label":e.$t("message.activity.name")},c(a.nombre),9,ke),l("td",{"data-label":e.$t("message.activity.acronyms")},c(a.siglas),9,ye),l("td",{"data-label":e.$t("message.activity.bussinesUnit")},c(a.unidadNegocio.nombre),9,Ce),l("td",{"data-label":e.$t("message.activity.status")},c(e.$t(`message.activity.statuses.${s(a.estado)}`)),9,Pe),l("td",we,[i(K,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[F(i(D,{color:"success",icon:n(ne),messageTooltip:n(u)("message.restore"),small:"",onClick:t[6]||(t[6]=L=>y.value=!0)},null,8,["icon","messageTooltip"]),[[O,V.checkDelete&&a.estado===2]]),F(i(D,{color:"info",icon:n(oe),messageTooltip:n(u)("message.edit"),small:"",onClick:L=>j(a._id)},null,8,["icon","messageTooltip","onClick"]),[[O,!V.checkDelete&&a.estado!==2]]),F(i(D,{color:"danger",icon:n(ie),messageTooltip:n(u)("message.delete"),small:"",onClick:t[7]||(t[7]=L=>C.value=!0)},null,8,["icon","messageTooltip"]),[[O,!V.checkDelete&&a.estado!==2]])]),_:2},1024)])],8,_e))),128))])]),l("div",De,[i(ce,null,{default:r(()=>[i(K,null,{default:r(()=>[(m(!0),U(q,null,H(n(B),a=>(m(),_(D,{key:a,active:a===n(f)-1,label:a+1,color:a===n(f)?"lightDark":"whiteDark",small:"",onClick:te=>M(a+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),l("small",null,"Page "+c(n(A))+" of "+c(n(P)),1)]),_:1})])],64))}},Ue={__name:"IndexView",setup(V){const $=v([{name:"Inicio"}]),u=J(),g=v(1),T=v(10),d=ue({switch:[]}),k=s=>{I.index(s).then(o=>{u.activities=o,g.value=o.page,T.value=o.perPage})};k({page:g.value});const S=v(!1),y=()=>{p({page:g.value}),S.value=d.switch.length!==0},C=s=>{p({page:s})},N=(s,o)=>{E({sortBy:s,sortDesc:o})},f=s=>{I.getDelete(s).then(o=>{u.activities=o,g.value=o.page,T.value=o.perPage})},p=s=>{d.switch.length===0?k({page:s}):f({page:s})},E=s=>{d.switch.length===0?k(s):f(s)};return(s,o)=>(m(),_(re,null,{default:r(()=>[i(ve,null,{default:r(()=>{var b,P,A,B,M;return[i(Q,{icon:n(fe),title:s.$t("message.activity.activities")},{default:r(()=>[i(D,{to:{name:"ActivitiesCreate"},icon:n(he),label:s.$t("message.add_new"),color:"success",small:""},null,8,["icon","label"])]),_:1},8,["icon","title"]),i(de,{items:$.value},null,8,["items"]),i(me,{label:""},{default:r(()=>[i(be,{modelValue:d.switch,"onUpdate:modelValue":o[0]||(o[0]=j=>d.switch=j),name:"sample-switch",type:"switch",options:{one:"Mostrar registros eliminados"},onChange:y},null,8,["modelValue"])]),_:1}),(b=n(u))!=null&&b.activities?W("",!0):(m(),_(Q,{key:0,icon:s.mdiTableOff,title:"Empty variation"},null,8,["icon"])),(P=n(u))!=null&&P.activities?W("",!0):(m(),_(ge,{key:1,color:"danger",icon:s.mdiTableOff},{default:r(()=>[l("b",null,c(s.$t("message.empty_table"))+".",1),w(" When there's nothing to show ")]),_:1},8,["icon"])),(M=(B=(A=n(u))==null?void 0:A.activities)==null?void 0:B.actividades)!=null&&M.length?(m(),_(z,{key:2,class:"mb-6","has-table":""},{default:r(()=>[i(Ve,{checkDelete:S.value,onChangePage:C,onSort:N},null,8,["checkDelete"])]),_:1})):(m(),_(z,{key:3},{default:r(()=>[i(pe)]),_:1}))]}),_:1})]),_:1}))}};export{Ue as default};
