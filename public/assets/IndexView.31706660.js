import{ag as ae,ah as oe,aa as ne,S as J,I as p,y as g,o as m,r as E,a as l,w as c,j as o,f as V,E as r,$ as R,K as q,L as G,M as A,d as S,u as n,ai as le,aj as F,ak as ie,al as re,A as H,c as P,T as ce,x as ue,_ as de,b as K,B as me,Q,e as ge,g as W,i as fe,ap as pe,aq as he,p as z}from"./index.e27aaed2.js";import{C as ve}from"./CardBoxComponentEmpty.8b08f16b.js";import{p as U}from"./Professions.service.6b08311e.js";import{_ as $e}from"./FormCheckRadioGroup.84cb26fc.js";import"./FormCheckRadio.44135d25.js";const _e=["onClick"],be=["data-label"],ke=["data-label"],Pe=["data-label"],Ce={class:"before:hidden lg:w-1 whitespace-nowrap"},we={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},ye={__name:"ProfessionsTable",props:{checkable:Boolean,checkDelete:Boolean},emits:["changePage","confirm","sort"],setup(T,{emit:d}){const{t:u}=ae(),h=oe(),v=ne(),$=J(),N=p(()=>{var e;return(e=$.professions)==null?void 0:e.profesiones}),C=p(()=>$.professions.total),w=g(!1),y=g(!1),B=p(()=>$.professions.perPage),f=p(()=>$.professions.page);g([]);const _=g([]),a=p(()=>N.value),i=(e="")=>({0:"inactive",1:"active",2:"deleted"})[e],b=g(!1),k=e=>{b.value=!b.value,d("sort",e,b.value)},D=p(()=>Math.ceil(C.value/B.value)),M=p(()=>+f.value),I=p(()=>{const e=[];for(let s=0;s<D.value;s++)e.push(s);return e}),j=e=>{d("changePage",e)},X=e=>{v.push({name:"ProfessionsUpdate",params:{id:e}})},Y=e=>_.value=e,O=()=>{const{nombre:e}=_.value;return e},Z=u("message.profession.deleted.success"),x=async()=>{ee().then(()=>{h.success(Z),d("changePage",f.value)}).catch(e=>{var s;h.error(`${u("message.profession.deleted.error")} ${(s=e==null?void 0:e.response)==null?void 0:s.data.msg}`)})},ee=()=>{const{_id:e}=_.value;return U.delete(e)},se=()=>{const{_id:e}=_.value;U.restore(e).then(()=>{h.success(u("message.profession.restore.success")),d("changePage",f.value)}).catch(s=>{var t;h.error(`${u("message.profession.restore.error")} ${(t=s==null?void 0:s.response)==null?void 0:t.data.msg}`)})};return(e,s)=>(m(),E(q,null,[l(R,{modelValue:y.value,"onUpdate:modelValue":s[0]||(s[0]=t=>y.value=t),title:"Please confirm",button:"danger",onConfirm:x,"has-cancel":""},{default:c(()=>[o("strong",null,[V(r(e.$t("message.profession.deleted.question"))+" ",1),o("b",null,r(O()),1)]),V(" ? ")]),_:1},8,["modelValue"]),l(R,{modelValue:w.value,"onUpdate:modelValue":s[1]||(s[1]=t=>w.value=t),title:"Please confirm",onConfirm:se},{default:c(()=>[o("strong",null,[V(r(e.$t("message.profession.restore.question"))+" ",1),o("b",null,r(O()),1)]),V(" ? ")]),_:1},8,["modelValue"]),o("table",null,[o("thead",null,[o("tr",null,[o("th",{onClick:s[2]||(s[2]=t=>k("codigo"))},r(e.$t("message.profession.code")),1),o("th",{onClick:s[3]||(s[3]=t=>k("nombre"))},r(e.$t("message.profession.name")),1),o("th",{onClick:s[4]||(s[4]=t=>k("estado"))},r(e.$t("message.profession.status")),1)])]),o("tbody",null,[(m(!0),E(q,null,G(n(a),(t,te)=>(m(),E("tr",{key:t._id,onClick:L=>Y(t)},[o("td",{"data-label":e.$t("message.profession.code")},r(t.codigo),9,be),o("td",{"data-label":e.$t("message.profession.name")},r(t.nombre),9,ke),o("td",{"data-label":e.$t("message.profession.status")},r(e.$t(`message.profession.statuses.${i(t.estado)}`)),9,Pe),o("td",Ce,[l(H,{type:"justify-start lg:justify-end","no-wrap":""},{default:c(()=>[A(l(S,{color:"success",icon:n(le),messageTooltip:"t('message.restore')",small:"",onClick:s[5]||(s[5]=L=>w.value=!0)},null,8,["icon"]),[[F,T.checkDelete&&t.estado===2]]),A(l(S,{color:"info",icon:n(ie),messageTooltip:n(u)("message.edit"),small:"",onClick:L=>X(t._id)},null,8,["icon","messageTooltip","onClick"]),[[F,!T.checkDelete&&t.estado!==2]]),A(l(S,{color:"danger",icon:n(re),messageTooltip:n(u)("message.delete"),small:"",onClick:s[6]||(s[6]=L=>y.value=!0)},null,8,["icon","messageTooltip"]),[[F,!T.checkDelete&&t.estado!==2]])]),_:2},1024)])],8,_e))),128))])]),o("div",we,[l(ce,null,{default:c(()=>[l(H,null,{default:c(()=>[(m(!0),E(q,null,G(n(I),t=>(m(),P(S,{key:t,active:t===n(f)-1,label:t+1,color:t===n(f)?"lightDark":"whiteDark",small:"",onClick:te=>j(t+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),o("small",null,"Page "+r(n(M))+" of "+r(n(D)),1)]),_:1})])],64))}},Me={__name:"IndexView",setup(T){g([{name:"Inicio"}]);const d=J(),u=g(1),h=g(10),v=ue({switch:[]}),$=g(!1),N=()=>{f({page:u.value}),$.value=v.switch.length!==0},C=a=>{U.index(a).then(i=>{d.professions=i,u.value=i.page,h.value=i.perPage})};C({page:u.value});const w=a=>{f({page:a})},y=(a,i)=>{_({sortBy:a,sortDesc:i})},B=a=>{U.getDelete(a).then(i=>{d.professions=i,u.value=i.page,h.value=i.perPage})},f=a=>{v.switch.length===0?C({page:a}):B({page:a})},_=a=>{v.switch.length===0?C(a):B(a)};return(a,i)=>(m(),P(de,null,{default:c(()=>[l(fe,null,{default:c(()=>{var b,k,D,M,I;return[l(K,{icon:n(pe),title:a.$t("message.profession.professions")},{default:c(()=>[l(S,{to:"professions/create",icon:n(he),label:a.$t("message.add_new"),color:"success",small:""},null,8,["icon","label"])]),_:1},8,["icon","title"]),l(me,{label:""},{default:c(()=>[l($e,{modelValue:v.switch,"onUpdate:modelValue":i[0]||(i[0]=j=>v.switch=j),name:"sample-switch",type:"switch",options:{one:"Mostrar registros eliminados"},onChange:N},null,8,["modelValue"])]),_:1}),(b=n(d))!=null&&b.professions?Q("",!0):(m(),P(K,{key:0,icon:n(z),title:"Empty variation"},null,8,["icon"])),(k=n(d))!=null&&k.professions?Q("",!0):(m(),P(ge,{key:1,color:"danger",icon:n(z)},{default:c(()=>[o("b",null,r(a.$t("message.empty_table"))+".",1),V(" When there's nothing to show ")]),_:1},8,["icon"])),(I=(M=(D=n(d))==null?void 0:D.professions)==null?void 0:M.profesiones)!=null&&I.length?(m(),P(W,{key:2,class:"mb-6","has-table":""},{default:c(()=>[l(ye,{checkDelete:$.value,onChangePage:w,onSort:y},null,8,["checkDelete"])]),_:1})):(m(),P(W,{key:3},{default:c(()=>[l(ve)]),_:1}))]}),_:1})]),_:1}))}};export{Me as default};
