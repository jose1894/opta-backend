import{ag as se,ah as oe,aa as le,S as X,I as v,y as f,o as m,r as I,a as c,w as u,j as l,f as P,E as r,$ as G,K as A,L as H,M as F,d as w,u as o,ai as ne,aj as O,ak as ce,al as ie,A as K,c as k,T as re,x as ue,_ as de,b as Q,ao as me,B as ge,Q as W,e as fe,g as z,i as he,ap as ve,aq as pe,p as J}from"./index.e27aaed2.js";import{C as $e}from"./CardBoxComponentEmpty.8b08f16b.js";import{c as E}from"./categories.service.315771c8.js";import{_ as be}from"./FormCheckRadioGroup.84cb26fc.js";import"./FormCheckRadio.44135d25.js";const _e=["onClick"],ke=["data-label"],Ce=["data-label"],ye=["data-label"],Pe={class:"before:hidden lg:w-1 whitespace-nowrap"},we={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},De={__name:"CategoryTable",props:{checkable:Boolean,checkDelete:Boolean},emits:["changePage","confirm","sort"],setup(D,{emit:b}){const{t:i}=se(),g=oe(),V=le(),d=X(),S=v(()=>{var e;return(e=d.categories)==null?void 0:e.categorias}),U=v(()=>d.categories.total),p=f(!1),C=f(!1),N=v(()=>d.categories.perPage),h=v(()=>d.categories.page);f([]);const $=f([]),j=v(()=>S.value),s=(e="")=>({0:"inactive",1:"active",2:"deleted"})[e],n=f(!1),_=e=>{n.value=!n.value,b("sort",e,n.value)},y=v(()=>Math.ceil(U.value/N.value)),T=v(()=>+h.value),B=v(()=>{const e=[];for(let t=0;t<y.value;t++)e.push(t);return e}),M=e=>{b("changePage",e)},L=e=>{V.push({name:"CategoriesUpdate",params:{id:e}})},Y=e=>$.value=e,R=()=>{const{nombre:e}=$.value;return e},Z=i("message.category.deleted.success"),x=async()=>{ee().then(()=>{g.success(Z),b("changePage",h.value)}).catch(e=>{var t;g.error(`${i("message.category.deleted.error")} ${(t=e==null?void 0:e.response)==null?void 0:t.data.msg}`)})},ee=()=>{const{_id:e}=$.value;return E.delete(e)},te=()=>{const{_id:e}=$.value;E.restore(e).then(()=>{g.success(i("message.category.restore.success")),b("changePage",h.value)}).catch(t=>{var a;g.error(`${i("message.category.restore.error")} ${(a=t==null?void 0:t.response)==null?void 0:a.data.msg}`)})};return(e,t)=>(m(),I(A,null,[c(G,{modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=a=>C.value=a),title:"Please confirm",button:"danger",onConfirm:x,"has-cancel":""},{default:u(()=>[l("strong",null,[P(r(e.$t("message.category.deleted.question"))+" ",1),l("b",null,r(R()),1)]),P(" ? ")]),_:1},8,["modelValue"]),c(G,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=a=>p.value=a),title:"Please confirm",onConfirm:te},{default:u(()=>[l("strong",null,[P(r(e.$t("message.category.restore.question"))+" ",1),l("b",null,r(R()),1)]),P(" ? ")]),_:1},8,["modelValue"]),l("table",null,[l("thead",null,[l("tr",null,[l("th",{onClick:t[2]||(t[2]=a=>_("codigo"))},r(e.$t("message.category.code")),1),l("th",{onClick:t[3]||(t[3]=a=>_("nombre"))},r(e.$t("message.category.name")),1),l("th",{onClick:t[4]||(t[4]=a=>_("estado"))},r(e.$t("message.category.status")),1)])]),l("tbody",null,[(m(!0),I(A,null,H(o(j),(a,ae)=>(m(),I("tr",{key:a._id,onClick:q=>Y(a)},[l("td",{"data-label":e.$t("message.category.code")},r(a.codigo),9,ke),l("td",{"data-label":e.$t("message.category.name")},r(a.nombre),9,Ce),l("td",{"data-label":e.$t("message.cargo.status")},r(e.$t(`message.category.statuses.${s(a.estado)}`)),9,ye),l("td",Pe,[c(K,{type:"justify-start lg:justify-end","no-wrap":""},{default:u(()=>[F(c(w,{color:"success",icon:o(ne),messageTooltip:o(i)("message.restore"),small:"",onClick:t[5]||(t[5]=q=>p.value=!0)},null,8,["icon","messageTooltip"]),[[O,D.checkDelete&&a.estado===2]]),F(c(w,{color:"info",icon:o(ce),messageTooltip:o(i)("message.edit"),small:"",onClick:q=>L(a._id)},null,8,["icon","messageTooltip","onClick"]),[[O,!D.checkDelete&&a.estado!==2]]),F(c(w,{color:"danger",icon:o(ie),messageTooltip:o(i)("message.delete"),small:"",onClick:t[6]||(t[6]=q=>C.value=!0)},null,8,["icon","messageTooltip"]),[[O,!D.checkDelete&&a.estado!==2]])]),_:2},1024)])],8,_e))),128))])]),l("div",we,[c(re,null,{default:u(()=>[c(K,null,{default:u(()=>[(m(!0),I(A,null,H(o(B),a=>(m(),k(w,{key:a,active:a===o(h)-1,label:a+1,color:a===o(h)?"lightDark":"whiteDark",small:"",onClick:ae=>M(a+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),l("small",null,"Page "+r(o(T))+" of "+r(o(y)),1)]),_:1})])],64))}},Ie={__name:"IndexView",setup(D){const b=f([{name:"Inicio"}]),i=X(),g=f(1),V=f(10),d=ue({switch:[]}),S=f(!1),U=()=>{$({page:g.value}),S.value=d.switch.length!==0},p=s=>{E.index(s).then(n=>{i.categories=n,g.value=n.page,V.value=n.perPage})};p({page:g.value});const C=s=>{$({page:s})},N=(s,n)=>{j({sortBy:s,sortDesc:n})},h=s=>{E.getDelete(s).then(n=>{i.categories=n,g.value=n.page,V.value=n.perPage})},$=s=>{d.switch.length===0?p({page:s}):h({page:s})},j=s=>{d.switch.length===0?p(s):h(s)};return(s,n)=>(m(),k(de,null,{default:u(()=>[c(he,null,{default:u(()=>{var _,y,T,B,M;return[c(Q,{icon:o(ve),title:s.$t("message.category.categories")},{default:u(()=>[c(w,{to:{name:"CategoriesCreate"},icon:o(pe),label:s.$t("message.add_new"),color:"success",small:""},null,8,["icon","label"])]),_:1},8,["icon","title"]),c(me,{items:b.value},null,8,["items"]),c(ge,{label:""},{default:u(()=>[c(be,{modelValue:d.switch,"onUpdate:modelValue":n[0]||(n[0]=L=>d.switch=L),name:"sample-switch",type:"switch",options:{one:"Mostrar registros eliminados"},onChange:U},null,8,["modelValue"])]),_:1}),(_=o(i))!=null&&_.categories?W("",!0):(m(),k(Q,{key:0,icon:o(J),title:"Empty variation"},null,8,["icon"])),(y=o(i))!=null&&y.categories?W("",!0):(m(),k(fe,{key:1,color:"danger",icon:o(J)},{default:u(()=>[l("b",null,r(s.$t("message.empty_table"))+".",1),P(" When there's nothing to show ")]),_:1},8,["icon"])),(M=(B=(T=o(i))==null?void 0:T.categories)==null?void 0:B.categorias)!=null&&M.length?(m(),k(z,{key:2,class:"mb-6","has-table":""},{default:u(()=>[c(De,{checkDelete:S.value,onChangePage:C,onSort:N},null,8,["checkDelete"])]),_:1})):(m(),k(z,{key:3},{default:u(()=>[c($e)]),_:1}))]}),_:1})]),_:1}))}};export{Ie as default};
