import{ag as ae,ah as oe,aa as le,S as X,I as h,y as f,o as m,r as U,a as i,w as u,j as o,f as y,E as c,$ as G,K as A,L as H,M as F,d as D,u as l,ai as ne,aj as O,ak as ie,al as ce,A as K,c as b,T as re,x as ue,_ as de,b as Q,ao as me,B as ge,Q as W,e as fe,g as z,i as pe,ap as he,aq as ve,p as J}from"./index.e27aaed2.js";import{C as $e}from"./CardBoxComponentEmpty.8b08f16b.js";import{p as N}from"./profiles.service.8ec61cb8.js";import{_ as _e}from"./FormCheckRadioGroup.84cb26fc.js";import"./FormCheckRadio.44135d25.js";const be=["onClick"],ke=["data-label"],Pe=["data-label"],Ce=["data-label"],we={class:"before:hidden lg:w-1 whitespace-nowrap"},ye={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},De={__name:"ProfilesTable",props:{checkable:Boolean,checkDelete:Boolean},emits:["changePage","confirm","sort"],setup(V,{emit:$}){const{t:r}=ae(),g=oe(),S=le(),d=X(),k=h(()=>d.profiles.perfiles),T=h(()=>d.profiles.total),P=f(!1),C=f(!1),j=h(()=>d.profiles.perPage),p=h(()=>d.profiles.page);f([]);const v=f([]),B=h(()=>k.value);console.log(B);const a=(e="")=>({0:"inactive",1:"active",2:"deleted"})[e],n=f(!1),_=e=>{n.value=!n.value,$("sort",e,n.value)},w=h(()=>Math.ceil(T.value/j.value)),M=h(()=>+p.value),I=h(()=>{const e=[];for(let s=0;s<w.value;s++)e.push(s);return e}),E=e=>{$("changePage",e)},L=e=>{S.push({name:"ProfilesUpdate",params:{id:e}})},Y=e=>v.value=e,R=()=>{const{descripcion:e}=v.value;return e},Z=r("message.profiles.deleted.success"),x=async()=>{ee().then(()=>{g.success(Z),$("changePage",p.value)}).catch(e=>{var s;g.error(`${r("message.profiles.deleted.error")} ${(s=e==null?void 0:e.response)==null?void 0:s.data.msg}`)})},ee=()=>{const{_id:e}=v.value;return N.delete(e)},se=()=>{const{_id:e}=v.value;N.restore(e).then(()=>{g.success(r("message.profiles.restore.success")),$("changePage",p.value)}).catch(s=>{var t;g.error(`${r("message.profiles.restore.error")} ${(t=s==null?void 0:s.response)==null?void 0:t.data.msg}`)})};return(e,s)=>(m(),U(A,null,[i(G,{modelValue:C.value,"onUpdate:modelValue":s[0]||(s[0]=t=>C.value=t),title:"Please confirm",button:"danger",onConfirm:x,"has-cancel":""},{default:u(()=>[o("strong",null,[y(c(e.$t("message.profiles.deleted.question"))+" ",1),o("b",null,c(R()),1)]),y(" ? ")]),_:1},8,["modelValue"]),i(G,{modelValue:P.value,"onUpdate:modelValue":s[1]||(s[1]=t=>P.value=t),title:"Please confirm",onConfirm:se},{default:u(()=>[o("strong",null,[y(c(e.$t("message.profiles.restore.question"))+" ",1),o("b",null,c(R()),1)]),y(" ? ")]),_:1},8,["modelValue"]),o("table",null,[o("thead",null,[o("tr",null,[o("th",{onClick:s[2]||(s[2]=t=>_("codigo"))},c(e.$t("message.profiles.code")),1),o("th",{onClick:s[3]||(s[3]=t=>_("descripcion"))},c(e.$t("message.profiles.description")),1),o("th",{onClick:s[4]||(s[4]=t=>_("estado"))},c(e.$t("message.profiles.status")),1)])]),o("tbody",null,[(m(!0),U(A,null,H(l(B),(t,te)=>(m(),U("tr",{key:t._id,onClick:q=>Y(t)},[o("td",{"data-label":e.$t("message.profiles.code")},c(t.codigo),9,ke),o("td",{"data-label":e.$t("message.profiles.description")},c(t.descripcion),9,Pe),o("td",{"data-label":e.$t("message.profiles.status")},c(e.$t(`message.profiles.statuses.${a(t.estado)}`)),9,Ce),o("td",we,[i(K,{type:"justify-start lg:justify-end","no-wrap":""},{default:u(()=>[F(i(D,{color:"success",icon:l(ne),messageTooltip:"t('message.restore')",small:"",onClick:s[5]||(s[5]=q=>P.value=!0)},null,8,["icon"]),[[O,V.checkDelete&&t.estado===2]]),F(i(D,{color:"info",icon:l(ie),messageTooltip:l(r)("message.edit"),small:"",onClick:q=>L(t._id)},null,8,["icon","messageTooltip","onClick"]),[[O,!V.checkDelete&&t.estado!==2]]),F(i(D,{color:"danger",icon:l(ce),messageTooltip:l(r)("message.delete"),small:"",onClick:s[6]||(s[6]=q=>C.value=!0)},null,8,["icon","messageTooltip"]),[[O,!V.checkDelete&&t.estado!==2]])]),_:2},1024)])],8,be))),128))])]),o("div",ye,[i(re,null,{default:u(()=>[i(K,null,{default:u(()=>[(m(!0),U(A,null,H(l(I),t=>(m(),b(D,{key:t,active:t===l(p)-1,label:t+1,color:t===l(p)?"lightDark":"whiteDark",small:"",onClick:te=>E(t+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),o("small",null,"Page "+c(l(M))+" of "+c(l(w)),1)]),_:1})])],64))}},Ie={__name:"IndexView",setup(V){const $=f([{name:"Inicio"}]),r=X(),g=f(1),S=f(10),d=ue({switch:[]}),k=a=>{N.index(a).then(n=>{r.profiles=n,g.value=n.page,S.value=n.perPage})};k({page:g.value});const T=f(!1),P=()=>{v({page:g.value}),T.value=d.switch.length!==0},C=a=>{v({page:a})},j=(a,n)=>{B({sortBy:a,sortDesc:n})},p=a=>{N.getDelete(a).then(n=>{r.profiles=n,g.value=n.page,S.value=n.perPage})},v=a=>{d.switch.length===0?k({page:a}):p({page:a})},B=a=>{d.switch.length===0?k(a):p(a)};return(a,n)=>(m(),b(de,null,{default:u(()=>[i(pe,null,{default:u(()=>{var _,w,M,I,E;return[i(Q,{icon:l(he),title:a.$t("message.profiles.profiles")},{default:u(()=>[i(D,{to:{name:"ProfilesCreate"},icon:l(ve),label:a.$t("message.add_new"),color:"success",small:""},null,8,["icon","label"])]),_:1},8,["icon","title"]),i(me,{items:$.value},null,8,["items"]),i(ge,{label:""},{default:u(()=>[i(_e,{modelValue:d.switch,"onUpdate:modelValue":n[0]||(n[0]=L=>d.switch=L),name:"sample-switch",type:"switch",options:{one:"Mostrar registros eliminados"},onChange:P},null,8,["modelValue"])]),_:1}),(_=l(r))!=null&&_.profiles?W("",!0):(m(),b(Q,{key:0,icon:l(J),title:"Empty variation"},null,8,["icon"])),(w=l(r))!=null&&w.profiles?W("",!0):(m(),b(fe,{key:1,color:"danger",icon:l(J)},{default:u(()=>[o("b",null,c(a.$t("message.empty_table"))+".",1),y(" When there's nothing to show ")]),_:1},8,["icon"])),(E=(I=(M=l(r))==null?void 0:M.profiles)==null?void 0:I.perfiles)!=null&&E.length?(m(),b(z,{key:2,class:"mb-6","has-table":""},{default:u(()=>[i(De,{checkDelete:T.value,onChangePage:C,onSort:j},null,8,["checkDelete"])]),_:1})):(m(),b(z,{key:3},{default:u(()=>[i($e)]),_:1}))]}),_:1})]),_:1}))}};export{Ie as default};
