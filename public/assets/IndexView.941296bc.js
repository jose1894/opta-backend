import{u as oe,ak as ie,ae as ce,f as ne,g as h,r as d,o as g,h as L,i as r,a as c,b as o,z as F,t as n,F as H,k as Z,d as W,p as i,al as ue,S as J,am as de,s as me,x,c as D,y as ge,U as pe,A as fe,_ as ve,m as ee,B as be,ap as he,aq as $e,G as ae}from"./index.cc1855cb.js";import{a as T,_ as se}from"./BaseButton.00025e8c.js";import{_ as te}from"./SectionTitleLineWithButton.e8c4cbcb.js";import{_ as ke}from"./NotificationBar.63f4cacf.js";import{C as Ce}from"./CardBoxComponentEmpty.47fc2389.js";import{C as le}from"./CardBoxModal.baa739ff.js";import{p as O}from"./personal.service.6db811b2.js";import{_ as K}from"./FormField.c25f55fc.js";import{_ as _e}from"./FormCheckRadioGroup.0473097c.js";import{B as Pe}from"./Breadcrumb.0860d204.js";import{_ as ye}from"./inputSearch.78f23ad2.js";import"./FormCheckRadio.5511dc53.js";const we=["onClick"],De=["data-label"],Ve=["data-label"],Se=["data-label"],Be=["data-label"],Fe=["data-label"],Te=["data-label"],Ue=["data-label"],Ee={class:"before:hidden lg:w-1 whitespace-nowrap"},Me={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Ne={__name:"PersonalTable",props:{checkable:Boolean,checkDelete:Boolean},emits:["changePage","confirm","sort"],setup(U,{emit:y}){const{t:u}=oe(),$=ie(),k=ce(),C=ne(),p=h(()=>{var e;return(e=C.personal)==null?void 0:e.personas}),E=h(()=>C.personal.total);console.log(p);const f=d(!1),_=d(!1),V=h(()=>C.personal.perPage),m=h(()=>C.personal.page);d([]);const P=d([]),A=h(()=>p.value),M=(e="")=>({0:"inactive",1:"active",2:"deleted"})[e],S=d(!1),v=e=>{S.value=!S.value,y("sort",e,S.value)},w=h(()=>Math.ceil(E.value/V.value)),N=h(()=>+m.value),j=h(()=>{const e=[];for(let a=0;a<w.value;a++)e.push(a);return e}),G=e=>{y("changePage",e)},R=e=>{k.push({name:"PersonalesUpdate",params:{id:e}})},t=e=>P.value=e,l=()=>{const{nombres:e,apellidos:a}=P.value;return e+a},b=u("message.personal.deleted.success"),B=async()=>{I().then(()=>{$.success(b),y("changePage",m.value)}).catch(e=>{var a;$.error(`${u("message.personal.deleted.error")} ${(a=e==null?void 0:e.response)==null?void 0:a.data.msg}`)})},I=()=>{const{_id:e}=P.value;return O.delete(e)},q=()=>{const{_id:e}=P.value;O.restore(e).then(()=>{$.success(u("message.personal.restore.success")),y("changePage",m.value)}).catch(a=>{var s;$.error(`${u("message.personal.restore.error")} ${(s=a==null?void 0:a.response)==null?void 0:s.data.msg}`)})};return(e,a)=>(g(),L(H,null,[r(le,{modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=s=>_.value=s),title:e.$t("message.pleaseConfirm"),button:"danger",onConfirm:B,"has-cancel":""},{default:c(()=>[o("strong",null,[F(n(e.$t("message.personal.deleted.question"))+" ",1),o("b",null,n(l()),1)]),F(" ? ")]),_:1},8,["modelValue","title"]),r(le,{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=s=>f.value=s),title:e.$t("message.pleaseConfirm"),onConfirm:q},{default:c(()=>[o("strong",null,[F(n(e.$t("message.personal.restore.question"))+" ",1),o("b",null,n(l()),1)]),F(" ? ")]),_:1},8,["modelValue","title"]),o("table",null,[o("thead",null,[o("tr",null,[o("th",{onClick:a[2]||(a[2]=s=>v("nombres"))},n(e.$t("message.personal.names")),1),o("th",{onClick:a[3]||(a[3]=s=>v("apellidos"))},n(e.$t("message.personal.surnames")),1),o("th",{onClick:a[4]||(a[4]=s=>v("iDFiscal"))},n(e.$t("message.personal.idFiscal")),1),o("th",{onClick:a[5]||(a[5]=s=>v("categoria.nombre"))},n(e.$t("message.personal.category")),1),o("th",{onClick:a[6]||(a[6]=s=>v("unidadNegocio.nombre"))},n(e.$t("message.personal.businessUnit")),1),o("th",{onClick:a[7]||(a[7]=s=>v("sucursal.nombre"))},n(e.$t("message.personal.branch")),1),o("th",{onClick:a[8]||(a[8]=s=>v("estado"))},n(e.$t("message.personal.status")),1)])]),o("tbody",null,[(g(!0),L(H,null,Z(i(A),(s,re)=>{var Q,X,Y;return g(),L("tr",{key:s._id,onClick:z=>t(s)},[o("td",{"data-label":e.$t("message.personal.names")},n(s.nombres),9,De),o("td",{"data-label":e.$t("message.personal.surnames")},n(s.apellidos),9,Ve),o("td",{"data-label":e.$t("message.personal.idFiscal")},n(s.iDFiscal),9,Se),o("td",{"data-label":e.$t("message.personal.category")},n((Q=s==null?void 0:s.categoria)==null?void 0:Q.nombre),9,Be),o("td",{"data-label":e.$t("message.personal.businessUnit")},n((X=s==null?void 0:s.unidadNegocio)==null?void 0:X.nombre),9,Fe),o("td",{"data-label":e.$t("message.personal.branch")},n((Y=s==null?void 0:s.sucursal)==null?void 0:Y.nombre),9,Te),o("td",{"data-label":e.$t("message.personal.status")},n(e.$t(`message.personal.statuses.${M(s.estado)}`)),9,Ue),o("td",Ee,[r(x,{type:"justify-start lg:justify-end","no-wrap":""},{default:c(()=>[W(r(T,{color:"success",icon:i(ue),messageTooltip:"t('message.restore')",small:"",onClick:a[9]||(a[9]=z=>f.value=!0)},null,8,["icon"]),[[J,U.checkDelete&&s.estado===2]]),W(r(T,{color:"info",icon:i(de),messageTooltip:i(u)("message.edit"),small:"",onClick:z=>R(s._id)},null,8,["icon","messageTooltip","onClick"]),[[J,!U.checkDelete&&s.estado!==2]]),W(r(T,{color:"danger",icon:i(me),messageTooltip:i(u)("message.delete"),small:"",onClick:a[10]||(a[10]=z=>_.value=!0)},null,8,["icon","messageTooltip"]),[[J,!U.checkDelete&&s.estado!==2]])]),_:2},1024)])],8,we)}),128))])]),o("div",Me,[r(ge,null,{default:c(()=>[r(x,null,{default:c(()=>[(g(!0),L(H,null,Z(i(j),s=>(g(),D(T,{key:s,active:s===i(m)-1,label:s+1,color:s===i(m)?"lightDark":"whiteDark",small:"",onClick:re=>G(s+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),o("small",null,"Page "+n(i(N))+" of "+n(i(w)),1)]),_:1})])],64))}},Ie={class:"grid md:grid-cols-2 gap-4"},Qe={__name:"IndexView",setup(U){const y=d([{name:"Inicio"}]),u=ne(),{t:$}=oe(),k=d(1),C=d(10),p=pe({switch:[]}),E=[{id:1,label:$("message.country.statuses.active")},{id:0,label:$("message.country.statuses.inactive")}],f=d({filters:["nombres","apellidos","iDFiscal","categoria.nombre","unidadNegocio.nombre","sucursal.nombre"],search:""}),_=d(-1),V=d(E[0]),m=t=>{O.index(t).then(l=>{u.personal=l,k.value=l.page,C.value=l.perPage})};m({page:k.value});const P=d(!1),A=()=>{N(k.value),P.value=p.switch.length!==0},M=(t=[])=>{let l={page:k.value,q:t};_.value!==-1&&(l={...l,estado:_.value}),p.switch.length===0?m(l):w(l)},S=t=>{N({page:t})},v=(t,l)=>{j({sortBy:t,sortDesc:l})},w=t=>{O.getDelete(t).then(l=>{u.personal=l,k.value=l.page,C.value=l.perPage})},N=t=>{p.switch.length===0?m(t):w(t)},j=t=>{p.switch.length===0?m(t):w(t)},G=async t=>{const l=t===""?"default":t;let b=[];l!=="default"&&(f.value.search=l,b=f.value),M(b)},R=()=>{const{id:t}=V.value;_.value=t;let l=[];f.value.search!==""&&f.value.search!=="default"&&(l=f.value),M(l)};return(t,l)=>(g(),D(fe,null,{default:c(()=>[r(be,null,{default:c(()=>{var b,B,I,q,e;return[r(te,{icon:i(he),title:t.$t("message.personal.personal")},{default:c(()=>[r(T,{to:"personal/create",icon:i($e),label:t.$t("message.add_new"),color:"success",small:""},null,8,["icon","label"])]),_:1},8,["icon","title"]),r(Pe,{items:y.value},null,8,["items"]),o("div",Ie,[r(K,{label:"Buscar"},{default:c(()=>[r(ye,{placeholder:"Buscar...","search-function":G,"debounce-time":500},null,8,["placeholder"])]),_:1}),r(K,{label:t.$t("message.country.status")},{default:c(()=>[r(ve,{modelValue:V.value,"onUpdate:modelValue":l[0]||(l[0]=a=>V.value=a),icon:t.mdiListStatus,options:E,onOnSelectChange:R},null,8,["modelValue","icon"])]),_:1},8,["label"])]),r(K,{label:""},{default:c(()=>[r(_e,{modelValue:p.switch,"onUpdate:modelValue":l[1]||(l[1]=a=>p.switch=a),name:"sample-switch",type:"switch",options:{one:"Mostrar registros eliminados"},onChange:A},null,8,["modelValue"])]),_:1}),(b=i(u))!=null&&b.personal?ee("",!0):(g(),D(te,{key:0,icon:i(ae),title:"Empty variation"},null,8,["icon"])),(B=i(u))!=null&&B.personal?ee("",!0):(g(),D(ke,{key:1,color:"danger",icon:i(ae)},{default:c(()=>[o("b",null,n(t.$t("message.empty_table"))+".",1),F(" When there's nothing to show ")]),_:1},8,["icon"])),(e=(q=(I=i(u))==null?void 0:I.personal)==null?void 0:q.personas)!=null&&e.length?(g(),D(se,{key:2,class:"mb-6","has-table":""},{default:c(()=>[r(Ne,{checkDelete:P.value,onChangePage:S,onSort:v},null,8,["checkDelete"])]),_:1})):(g(),D(se,{key:3},{default:c(()=>[r(Ce)]),_:1}))]}),_:1})]),_:1}))}};export{Qe as default};
