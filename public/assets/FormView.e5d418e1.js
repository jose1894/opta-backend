import{af as U,ag as F,as as I,a9 as N,y as O,at as q,I as z,o as T,c as A,w as g,a as u,d as D,j as E,B as _,u as d,C as w,au as G,av as H,aw as J,z as K,g as P}from"./index.cb093d8e.js";import{r as y,m as Q,u as W}from"./index.esm.25e21f11.js";import{c as B}from"./currencies.service.0da5e35d.js";const X={class:"grid md:grid-cols-3 gap-4"},se={__name:"FormView",props:{path:"",saveLabel:"",country:{}},setup(L){const m=L,{t}=U(),$=F(),S=I(),j=N(),h=[{id:1,label:t("message.currencies.statuses.active")},{id:0,label:t("message.currencies.statuses.inactive")},{id:2,label:t("message.currencies.statuses.deleted")}],s=O({_id:"",codigo:"00",nombre:"",estado:h[0]}),M=a=>{const{_id:e,codigo:r,nombre:n,estado:c}=a.value,o={_id:e,codigo:r,nombre:n,estado:c.id};return m.path==="create"?B.create(o):B.update(o)};q(async()=>{if(m.path==="update"){const a=await B.read(S.params);s.value=a.data,s.value.estado=h.filter(e=>e.id===a.data.estado)[0]}});const k=z(()=>({codigo:{required:y,maxLength:Q(3)},nombre:{required:y},estado:{required:y}})),b=W(k,s),x=m.path==="create"?t("message.currencies.created.success"):t("message.currencies.updated.success"),C=m.path==="create"?t("message.currencies.created.error"):t("message.currencies.updated.error"),R=async()=>{await b.value.$validate()?M(s).then(()=>{$.success(x),j.push("/setup/currencies")}).catch(e=>{var r,n;if((r=e.response.data)!=null&&r.msg){$.error(`${C} ${e.response.data.msg}`);return}if((n=e.response.data)!=null&&n.errors){const c=e.response.data.errors,o=Object.keys(c).map(function(i,V){const l=c[i];return l.length>1?l.map(v=>l[v]).join():l[0]});let f=o.length>1?o.map(i=>o[i]).join():o[0];$.error(`${f}`)}}):console.log("error")};return(a,e)=>(T(),A(P,{isForm:"",onSubmit:K(R,["prevent"])},{footer:g(()=>[u(D,{label:a.$t(`message.${m.saveLabel}`),type:"submit",color:"success"},null,8,["label"])]),default:g(()=>{var r,n,c,o,f,i,V,l,v;return[E("div",X,[u(_,{label:a.$t("message.currencies.code"),help:(c=(n=(r=d(b))==null?void 0:r.codigo)==null?void 0:n.$errors[0])==null?void 0:c.$message},{default:g(()=>[u(w,{name:"codigo",modelValue:s.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=p=>s.value.codigo=p),icon:d(G)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),u(_,{label:a.$t("message.currencies.name"),help:(i=(f=(o=d(b))==null?void 0:o.nombre)==null?void 0:f.$errors[0])==null?void 0:i.$message},{default:g(()=>[u(w,{modelValue:s.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=p=>s.value.nombre=p),icon:d(H)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),u(_,{label:a.$t("message.currencies.status"),help:(v=(l=(V=d(b))==null?void 0:V.estado)==null?void 0:l.$errors[0])==null?void 0:v.$message},{default:g(()=>[u(w,{modelValue:s.value.estado,"onUpdate:modelValue":e[2]||(e[2]=p=>s.value.estado=p),icon:d(J),options:h},null,8,["modelValue","icon"])]),_:1},8,["label","help"])])]}),_:1},8,["onSubmit"]))}};export{se as _};
