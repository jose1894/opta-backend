import{ag as N,ah as O,at as T,aa as q,y as z,au as A,I as D,o as E,c as G,w as g,j as L,a as r,d as S,B as _,u as d,C as y,av as H,aw as J,ax as K,z as P,g as Q}from"./index.e27aaed2.js";import{r as w,m as W,u as X}from"./index.esm.6263d8b1.js";import{c as B}from"./currencies.service.a7bb4266.js";const Y={class:"grid md:grid-cols-3 gap-4"},Z={style:{display:"flex","justify-content":"space-between"}},oe={__name:"FormView",props:{path:"",saveLabel:"",country:{}},setup(k){const m=k,{t:u}=N(),$=O(),x=T(),j=q(),h=[{id:1,label:u("message.currencies.statuses.active")},{id:0,label:u("message.currencies.statuses.inactive")}],a=z({_id:"",codigo:"00",nombre:"",estado:h[0]}),C=s=>{const{_id:e,codigo:t,nombre:n,estado:l}=s.value,o={_id:e,codigo:t,nombre:n,estado:l.id};return m.path==="create"?B.create(o):B.update(o)};A(async()=>{if(m.path==="update"){const s=await B.read(x.params);a.value=s.data,a.value.estado=h.filter(e=>e.id===s.data.estado)[0]}});const M=D(()=>({codigo:{required:w,maxLength:W(3)},nombre:{required:w},estado:{required:w}})),b=X(M,a),R=m.path==="create"?u("message.currencies.created.success"):u("message.currencies.updated.success"),U=m.path==="create"?u("message.currencies.created.error"):u("message.currencies.updated.error"),F=async()=>{await b.value.$validate()?C(a).then(()=>{$.success(R),j.push("/setup/currencies")}).catch(e=>{var t,n;if((t=e.response.data)!=null&&t.msg){$.error(`${U} ${e.response.data.msg}`);return}if((n=e.response.data)!=null&&n.errors){const l=e.response.data.errors,o=Object.keys(l).map(function(i,V){const c=l[i];return c.length>1?c.map(v=>c[v]).join():c[0]});let f=o.length>1?o.map(i=>o[i]).join():o[0];$.error(`${f}`)}}):console.log("error")},I=()=>j.push("/setup/currencies");return(s,e)=>(E(),G(Q,{isForm:"",onSubmit:P(F,["prevent"])},{footer:g(()=>[L("div",Z,[r(S,{label:s.$t(`message.${m.saveLabel}`),type:"submit",color:"success"},null,8,["label"]),r(S,{label:s.$t("message.return"),color:"info",onClick:e[3]||(e[3]=t=>I())},null,8,["label"])])]),default:g(()=>{var t,n,l,o,f,i,V,c,v;return[L("div",Y,[r(_,{label:s.$t("message.currencies.code"),help:(l=(n=(t=d(b))==null?void 0:t.codigo)==null?void 0:n.$errors[0])==null?void 0:l.$message},{default:g(()=>[r(y,{name:"codigo",modelValue:a.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=p=>a.value.codigo=p),icon:d(H)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),r(_,{label:s.$t("message.currencies.name"),help:(i=(f=(o=d(b))==null?void 0:o.nombre)==null?void 0:f.$errors[0])==null?void 0:i.$message},{default:g(()=>[r(y,{modelValue:a.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=p=>a.value.nombre=p),icon:d(J)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),r(_,{label:s.$t("message.currencies.status"),help:(v=(c=(V=d(b))==null?void 0:V.estado)==null?void 0:c.$errors[0])==null?void 0:v.$message},{default:g(()=>[r(y,{modelValue:a.value.estado,"onUpdate:modelValue":e[2]||(e[2]=p=>a.value.estado=p),icon:d(K),options:h},null,8,["modelValue","icon"])]),_:1},8,["label","help"])])]}),_:1},8,["onSubmit"]))}};export{oe as _};
