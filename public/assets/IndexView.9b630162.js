import{af as ae,ag as se,a9 as le,R as z,I as h,y as g,o as m,r as E,a as o,w as u,j as l,f as w,E as c,Z as G,J as F,K as H,P as L,d as D,u as i,ah as ne,ai as R,aj as oe,ak as ie,A as J,c as _,S as ce,x as ue,_ as re,b as K,an as de,B as me,O as W,e as ve,g as Z,i as ge,ao as fe,ap as he}from"./index.94f69dfc.js";import{C as pe}from"./CardBoxComponentEmpty.c052dd4c.js";import{_ as be}from"./FormCheckRadioGroup.7dc4317c.js";import{a as T}from"./activities.service.13519c79.js";import"./FormCheckRadio.7aa78bc3.js";const $e=l("th",null,null,-1),_e=["onClick"],ke=["data-label"],ye=["data-label"],Ce=["data-label"],Pe={class:"before:hidden lg:w-1 whitespace-nowrap"},we={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},De={__name:"ActivityTable.view",props:{checkable:Boolean,checkDelete:Boolean},emits:["changePage","confirm","sort"],setup(V,{emit:b}){const{t:r}=ae(),v=se(),S=le(),d=z(),k=h(()=>d.activities.actividades),A=h(()=>d.activities.total),y=g(!1),C=g(!1),U=h(()=>d.activities.perPage),f=h(()=>d.activities.page);g([]);const p=g([]),N=h(()=>k.value),s=(e="")=>({0:"inactive",1:"active",2:"deleted"})[e],n=g(!1),$=e=>{n.value=!n.value,b("sort",e,n.value)},P=h(()=>Math.ceil(A.value/U.value)),B=h(()=>+f.value),I=h(()=>{const e=[];for(let t=0;t<P.value;t++)e.push(t);return e}),M=e=>{b("changePage",e)},j=e=>{S.push({name:"ActivitiesUpdate",params:{id:e}})},Q=e=>p.value=e,q=()=>{const{nombre:e}=p.value;return e},X=r("message.activity.deleted.success"),Y=async()=>{x().then(()=>{v.success(X),b("changePage",f.value)}).catch(e=>{var t;v.error(`${r("message.activity.deleted.error")} ${(t=e==null?void 0:e.response)==null?void 0:t.data.msg}`)})},x=()=>{const{_id:e}=p.value;return T.delete(e)},ee=()=>{const{_id:e}=p.value;T.restore(e).then(()=>{v.success(r("message.activity.restore.success")),b("changePage",f.value)}).catch(t=>{var a;v.error(`${r("message.activity.restore.error")} ${(a=t==null?void 0:t.response)==null?void 0:a.data.msg}`)})};return(e,t)=>(m(),E(F,null,[o(G,{modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=a=>C.value=a),title:"Please confirm",button:"danger",onConfirm:Y,"has-cancel":""},{default:u(()=>[l("strong",null,[w(c(e.$t("message.activity.deleted.question"))+" ",1),l("b",null,c(q()),1)]),w(" ? ")]),_:1},8,["modelValue"]),o(G,{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=a=>y.value=a),title:"Please confirm",onConfirm:ee},{default:u(()=>[l("strong",null,[w(c(e.$t("message.activity.restore.question"))+" ",1),l("b",null,c(q()),1)]),w(" ? ")]),_:1},8,["modelValue"]),l("table",null,[l("thead",null,[l("tr",null,[l("th",{onClick:t[2]||(t[2]=a=>$("nombre"))},c(e.$t("message.activity.name")),1),l("th",{onClick:t[3]||(t[3]=a=>$("siglas"))},c(e.$t("message.activity.acronyms")),1),l("th",{onClick:t[4]||(t[4]=a=>$("estado"))},c(e.$t("message.activity.status")),1),$e])]),l("tbody",null,[(m(!0),E(F,null,H(i(N),(a,te)=>(m(),E("tr",{key:a._id,onClick:O=>Q(a)},[l("td",{"data-label":e.$t("message.activity.name")},c(a.nombre),9,ke),l("td",{"data-label":e.$t("message.activity.acronyms")},c(a.siglas),9,ye),l("td",{"data-label":e.$t("message.activity.status")},c(e.$t(`message.activity.statuses.${s(a.estado)}`)),9,Ce),l("td",Pe,[o(J,{type:"justify-start lg:justify-end","no-wrap":""},{default:u(()=>[L(o(D,{color:"success",icon:i(ne),small:"",onClick:t[5]||(t[5]=O=>y.value=!0)},null,8,["icon"]),[[R,V.checkDelete&&a.estado===2]]),L(o(D,{color:"info",icon:i(oe),small:"",onClick:O=>j(a._id)},null,8,["icon","onClick"]),[[R,!V.checkDelete&&a.estado!==2]]),L(o(D,{color:"danger",icon:i(ie),small:"",onClick:t[6]||(t[6]=O=>C.value=!0)},null,8,["icon"]),[[R,!V.checkDelete&&a.estado!==2]])]),_:2},1024)])],8,_e))),128))])]),l("div",we,[o(ce,null,{default:u(()=>[o(J,null,{default:u(()=>[(m(!0),E(F,null,H(i(I),a=>(m(),_(D,{key:a,active:a===i(f)-1,label:a+1,color:a===i(f)?"lightDark":"whiteDark",small:"",onClick:te=>M(a+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),l("small",null,"Page "+c(i(B))+" of "+c(i(P)),1)]),_:1})])],64))}},Me={__name:"IndexView",setup(V){const b=g([{name:"Inicio"}]),r=z(),v=g(1),S=g(10),d=ue({switch:[]}),k=s=>{T.index(s).then(n=>{r.activities=n,v.value=n.page,S.value=n.perPage})};k({page:v.value});const A=g(!1),y=()=>{p({page:v.value}),A.value=d.switch.length!==0},C=s=>{p({page:s})},U=(s,n)=>{N({sortBy:s,sortDesc:n})},f=s=>{T.getDelete(s).then(n=>{r.activities=n,v.value=n.page,S.value=n.perPage})},p=s=>{d.switch.length===0?k({page:s}):f({page:s})},N=s=>{d.switch.length===0?k(s):f(s)};return(s,n)=>(m(),_(re,null,{default:u(()=>[o(ge,null,{default:u(()=>{var $,P,B,I,M;return[o(K,{icon:i(fe),title:s.$t("message.activity.activities")},{default:u(()=>[o(D,{to:{name:"ActivitiesCreate"},icon:i(he),label:s.$t("message.add_new"),color:"success",small:""},null,8,["icon","label"])]),_:1},8,["icon","title"]),o(de,{items:b.value},null,8,["items"]),o(me,{label:""},{default:u(()=>[o(be,{modelValue:d.switch,"onUpdate:modelValue":n[0]||(n[0]=j=>d.switch=j),name:"sample-switch",type:"switch",options:{one:"Mostrar registros eliminados"},onChange:y},null,8,["modelValue"])]),_:1}),($=i(r))!=null&&$.activities?W("",!0):(m(),_(K,{key:0,icon:s.mdiTableOff,title:"Empty variation"},null,8,["icon"])),(P=i(r))!=null&&P.activities?W("",!0):(m(),_(ve,{key:1,color:"danger",icon:s.mdiTableOff},{default:u(()=>[l("b",null,c(s.$t("message.empty_table"))+".",1),w(" When there's nothing to show ")]),_:1},8,["icon"])),(M=(I=(B=i(r))==null?void 0:B.activities)==null?void 0:I.actividades)!=null&&M.length?(m(),_(Z,{key:2,class:"mb-6","has-table":""},{default:u(()=>[o(De,{checkDelete:A.value,onChangePage:C,onSort:U},null,8,["checkDelete"])]),_:1})):(m(),_(Z,{key:3},{default:u(()=>[o(pe)]),_:1}))]}),_:1})]),_:1}))}};export{Me as default};
