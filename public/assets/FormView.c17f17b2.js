import{ag as N,ah as P,at as T,aa as q,y as z,au as O,I as A,o as D,c as E,w as m,j,a as t,d as C,B as b,u as c,C as f,av as G,aw as H,ax as J,z as K,g as Q}from"./index.e27aaed2.js";import{r as v,m as W,u as X}from"./index.esm.6263d8b1.js";import{c as $}from"./cargos.service.90ce512d.js";const Y={class:"grid md:grid-cols-3 gap-4"},Z={style:{display:"flex","justify-content":"space-between"}},oe={__name:"FormView",props:{path:"",saveLabel:"",country:{}},setup(M){const d=M,{t:l}=N(),h=P(),S=T(),V=q(),p=[{id:1,label:l("message.cargo.statuses.active")},{id:0,label:l("message.cargo.statuses.inactive")}],a=z({_id:"",codigo:"00",nombre:"",estado:p[0]}),k=s=>{const{_id:e,codigo:o,nombre:r,estado:n}=s.value,u={_id:e,codigo:o,nombre:r,estado:n.id};return d.path==="create"?$.create(u):$.update(u)};O(async()=>{if(d.path==="update"){const s=await $.read(S.params);a.value=s.data,a.value.estado=p.filter(e=>e.id===s.data.estado)[0]}});const x=A(()=>({codigo:{required:v,maxLength:W(3)},nombre:{required:v},estado:{required:v}})),g=X(x,a),R=d.path==="create"?l("message.cargo.created.success"):l("message.cargo.updated.success"),U=d.path==="create"?l("message.cargo.created.error"):l("message.cargo.updated.error"),F=async()=>{await g.value.$validate()?k(a).then(()=>{h.success(R),V.push("/setup/jobPositions")}).catch(e=>{var o,r;if((o=e.response.data)!=null&&o.msg){h.error(`${U} ${e.response.data.msg}`);return}if((r=e.response.data)!=null&&r.errors){const n=e.response.data.errors;for(let u of n);}}):console.log("error")},I=()=>V.push("/setup/jobPositions");return(s,e)=>(D(),E(Q,{isForm:"",onSubmit:K(F,["prevent"])},{footer:m(()=>[j("div",Z,[t(C,{label:s.$t(`message.${d.saveLabel}`),type:"submit",color:"success"},null,8,["label"]),t(C,{label:s.$t("message.return"),color:"info",onClick:e[3]||(e[3]=o=>I())},null,8,["label"])])]),default:m(()=>{var o,r,n,u,_,w,y,B,L;return[j("div",Y,[t(b,{label:s.$t("message.cargo.code"),help:(n=(r=(o=c(g))==null?void 0:o.codigo)==null?void 0:r.$errors[0])==null?void 0:n.$message},{default:m(()=>[t(f,{name:"codigo",modelValue:a.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=i=>a.value.codigo=i),icon:c(G)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(b,{label:s.$t("message.cargo.name"),help:(w=(_=(u=c(g))==null?void 0:u.nombre)==null?void 0:_.$errors[0])==null?void 0:w.$message},{default:m(()=>[t(f,{modelValue:a.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=i=>a.value.nombre=i),icon:c(H)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(b,{label:s.$t("message.cargo.status"),help:(L=(B=(y=c(g))==null?void 0:y.estado)==null?void 0:B.$errors[0])==null?void 0:L.$message},{default:m(()=>[t(f,{modelValue:a.value.estado,"onUpdate:modelValue":e[2]||(e[2]=i=>a.value.estado=i),icon:c(J),options:p},null,8,["modelValue","icon"])]),_:1},8,["label","help"])])]}),_:1},8,["onSubmit"]))}};export{oe as _};
