import{af as F,ag as I,as as N,a9 as j,y as q,at as z,I as O,o as T,c as A,w as m,a as n,d as D,j as E,B as g,u as d,C as b,au as G,av as H,aw as J,z as K,g as P}from"./index.cb093d8e.js";import{r as v,m as Q,u as W}from"./index.esm.25e21f11.js";import{p as $}from"./Professions.service.4f176a02.js";const X={class:"grid md:grid-cols-3 gap-4"},se={__name:"FormView",props:{path:"",saveLabel:"",country:{}},setup(L){const u=L,{t:o}=F(),h=I(),M=N(),S=j(),f=[{id:1,label:o("message.profession.statuses.active")},{id:0,label:o("message.profession.statuses.inactive")},{id:2,label:o("message.profession.statuses.deleted")}],s=q({_id:"",codigo:"00",nombre:"",estado:f[0]}),C=a=>{const{_id:e,codigo:t,nombre:r,estado:l}=a.value,i={_id:e,codigo:t,nombre:r,estado:l.id};return u.path==="create"?$.create(i):$.update(i)};z(async()=>{if(u.path==="update"){const a=await $.read(M.params);s.value=a.data,s.value.estado=f.filter(e=>e.id===a.data.estado)[0]}});const R=O(()=>({codigo:{required:v,maxLength:Q(3)},nombre:{required:v},estado:{required:v}})),p=W(R,s),U=u.path==="create"?o("message.profession.created.success"):o("message.profession.updated.success"),k=u.path==="create"?o("message.profession.created.error"):o("message.profession.updated.error"),x=async()=>{await p.value.$validate()?C(s).then(()=>{h.success(U),S.push("/setup/professions")}).catch(e=>{var t,r;if((t=e.response.data)!=null&&t.msg){h.error(`${k} ${e.response.data.msg}`);return}if((r=e.response.data)!=null&&r.errors){const l=e.response.data.errors;for(let i of l);}}):console.log("error")};return(a,e)=>(T(),A(P,{isForm:"",onSubmit:K(x,["prevent"])},{footer:m(()=>[n(D,{label:a.$t(`message.${u.saveLabel}`),type:"submit",color:"success"},null,8,["label"])]),default:m(()=>{var t,r,l,i,V,_,w,B,y;return[E("div",X,[n(g,{label:a.$t("message.profession.code"),help:(l=(r=(t=d(p))==null?void 0:t.codigo)==null?void 0:r.$errors[0])==null?void 0:l.$message},{default:m(()=>[n(b,{name:"codigo",modelValue:s.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=c=>s.value.codigo=c),icon:d(G)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),n(g,{label:a.$t("message.profession.name"),help:(_=(V=(i=d(p))==null?void 0:i.nombre)==null?void 0:V.$errors[0])==null?void 0:_.$message},{default:m(()=>[n(b,{modelValue:s.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=c=>s.value.nombre=c),icon:d(H)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),n(g,{label:a.$t("message.profession.status"),help:(y=(B=(w=d(p))==null?void 0:w.estado)==null?void 0:B.$errors[0])==null?void 0:y.$message},{default:m(()=>[n(b,{modelValue:s.value.estado,"onUpdate:modelValue":e[2]||(e[2]=c=>s.value.estado=c),icon:d(J),options:f},null,8,["modelValue","icon"])]),_:1},8,["label","help"])])]}),_:1},8,["onSubmit"]))}};export{se as _};
