import{q as z,af as O,ag as T,as as A,a9 as D,y as E,I as G,at as H,o as J,c as K,w as c,a as t,d as P,j as _,B as b,u as o,C as f,au as Q,av as M,aw as W,z as X,g as Y}from"./index.cb093d8e.js";import{r as $,m as Z,u as ee}from"./index.esm.25e21f11.js";import{b as U}from"./bussinesUnit.service.4b89b5a3.js";const se={class:"container mx-auto"},ae={class:"grid md:grid-cols-4 gap-4"},te={__name:"FormView",props:{path:"",saveLabel:"",state:{}},setup(S){const p=S,{t:n}=O(),V=T(),C=A(),I=D(),v=[{id:1,label:n("message.bussinesUnit.statuses.active")},{id:0,label:n("message.bussinesUnit.statuses.inactive")},{id:2,label:n("message.bussinesUnit.statuses.deleted")}],s=E({_id:"",codigo:"00",nombre:"",siglas:"",estado:v[0]}),R=G(()=>({codigo:{required:$,maxLength:Z(3)},nombre:{required:$},siglas:{required:$}})),g=ee(R,s);H(async()=>{if(p.path==="update"){const a=await U.read(C.params);s.value=a.data,s.value.estado=v.filter(e=>e.id===a.data.estado)[0]}});const k=a=>{const{_id:e,codigo:l,nombre:i,siglas:r,estado:d}=a.value,m={_id:e,codigo:l,nombre:i,siglas:r,estado:d.id};return p.path==="create"?U.create(m):U.update(m)},q=p.path==="create"?n("message.bussinesUnit.created.success"):n("message.bussinesUnit.updated.success"),N=p.path==="create"?n("message.bussinesUnit.created.error"):n("message.bussinesUnit.updated.error"),j=async()=>{await g.value.$validate()?k(s).then(()=>{V.success(q),I.push("/setup/businessUnit")}).catch(e=>{var l,i,r;if((i=(l=e.response)==null?void 0:l.data)!=null&&i.msg){V.error(`${N} ${e.response.data.msg}`);return}if((r=e.response.data)!=null&&r.errors){const d=e.response.data.errors;for(let m of d);}}):console.log("error")};return(a,e)=>(J(),K(Y,{isForm:"",onSubmit:X(j,["prevent"])},{footer:c(()=>[t(P,{label:a.$t(`message.${p.saveLabel}`),type:"submit",color:"success"},null,8,["label"])]),default:c(()=>{var l,i,r,d,m,h,w,y,B,F,L,x;return[_("div",null,[_("div",se,[_("div",ae,[t(b,{label:a.$t("message.bussinesUnit.code"),help:(r=(i=(l=o(g))==null?void 0:l.codigo)==null?void 0:i.$errors[0])==null?void 0:r.$message},{default:c(()=>[t(f,{name:"codigo",modelValue:s.value.codigo,"onUpdate:modelValue":e[0]||(e[0]=u=>s.value.codigo=u),icon:o(Q)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(b,{label:a.$t("message.bussinesUnit.name"),help:(h=(m=(d=o(g))==null?void 0:d.nombre)==null?void 0:m.$errors[0])==null?void 0:h.$message},{default:c(()=>[t(f,{modelValue:s.value.nombre,"onUpdate:modelValue":e[1]||(e[1]=u=>s.value.nombre=u),icon:o(M)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(b,{label:a.$t("message.bussinesUnit.acronyms"),help:(B=(y=(w=o(g))==null?void 0:w.siglas)==null?void 0:y.$errors[0])==null?void 0:B.$message},{default:c(()=>[t(f,{modelValue:s.value.siglas,"onUpdate:modelValue":e[2]||(e[2]=u=>s.value.siglas=u),icon:o(M)},null,8,["modelValue","icon"])]),_:1},8,["label","help"]),t(b,{label:a.$t("message.bussinesUnit.status"),help:(x=(L=(F=o(g))==null?void 0:F.estado)==null?void 0:L.$errors[0])==null?void 0:x.$message},{default:c(()=>[t(f,{modelValue:s.value.estado,"onUpdate:modelValue":e[3]||(e[3]=u=>s.value.estado=u),icon:o(W),options:v},null,8,["modelValue","icon"])]),_:1},8,["label","help"])])])])]}),_:1},8,["onSubmit"]))}},ie=z(te,[["__scopeId","data-v-44d9fe39"]]);export{ie as F};
