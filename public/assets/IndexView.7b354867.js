import{af as se,ag as oe,a9 as ne,R as Q,I as v,y as f,o as m,r as E,a as c,w as r,j as o,f as y,E as i,Z as G,J as L,K as H,P as O,d as D,u as l,ah as le,ai as R,aj as ce,ak as ie,A as J,c as _,S as re,x as ue,_ as de,b as K,an as me,B as ge,O as W,e as fe,g as Z,i as he,ao as ve,ap as be,p as z}from"./index.2b059d96.js";import{C as pe}from"./CardBoxComponentEmpty.c5973077.js";import{c as U}from"./cargos.service.49671356.js";import{_ as $e}from"./FormCheckRadioGroup.f120ae1c.js";import"./FormCheckRadio.b0cf8ca6.js";const _e=["onClick"],Pe=["data-label"],ke=["data-label"],Ce=["data-label"],we={class:"before:hidden lg:w-1 whitespace-nowrap"},ye={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},De={__name:"CargoTable",props:{checkable:Boolean,checkDelete:Boolean},emits:["changePage","confirm","sort"],setup(V,{emit:p}){const{t:u}=se(),g=oe(),j=ne(),d=Q(),P=v(()=>{var e;return(e=d.jobPositions)==null?void 0:e.cargos}),S=v(()=>d.jobPositions.total),k=f(!1),C=f(!1),N=v(()=>d.jobPositions.perPage),h=v(()=>d.jobPositions.page);f([]);const b=f([]),T=v(()=>P.value),s=(e="")=>({0:"inactive",1:"active",2:"deleted"})[e],n=f(!1),$=e=>{n.value=!n.value,p("sort",e,n.value)},w=v(()=>Math.ceil(S.value/N.value)),B=v(()=>+h.value),I=v(()=>{const e=[];for(let t=0;t<w.value;t++)e.push(t);return e}),M=e=>{p("changePage",e)},A=e=>{j.push({name:"CargosUpdate",params:{id:e}})},X=e=>b.value=e,q=()=>{const{nombre:e}=b.value;return e},Y=u("message.cargo.deleted.success"),x=async()=>{ee().then(()=>{g.success(Y),p("changePage",h.value)}).catch(e=>{var t;g.error(`${u("message.cargo.deleted.error")} ${(t=e==null?void 0:e.response)==null?void 0:t.data.msg}`)})},ee=()=>{const{_id:e}=b.value;return U.delete(e)},te=()=>{const{_id:e}=b.value;U.restore(e).then(()=>{g.success(u("message.cargo.restore.success")),p("changePage",h.value)}).catch(t=>{var a;g.error(`${u("message.cargo.restore.error")} ${(a=t==null?void 0:t.response)==null?void 0:a.data.msg}`)})};return(e,t)=>(m(),E(L,null,[c(G,{modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=a=>C.value=a),title:"Please confirm",button:"danger",onConfirm:x,"has-cancel":""},{default:r(()=>[o("strong",null,[y(i(e.$t("message.cargo.deleted.question"))+" ",1),o("b",null,i(q()),1)]),y(" ? ")]),_:1},8,["modelValue"]),c(G,{modelValue:k.value,"onUpdate:modelValue":t[1]||(t[1]=a=>k.value=a),title:"Please confirm",onConfirm:te},{default:r(()=>[o("strong",null,[y(i(e.$t("message.cargo.restore.question"))+" ",1),o("b",null,i(q()),1)]),y(" ? ")]),_:1},8,["modelValue"]),o("table",null,[o("thead",null,[o("tr",null,[o("th",{onClick:t[2]||(t[2]=a=>$("codigo"))},i(e.$t("message.cargo.code")),1),o("th",{onClick:t[3]||(t[3]=a=>$("nombre"))},i(e.$t("message.cargo.name")),1),o("th",{onClick:t[4]||(t[4]=a=>$("estado"))},i(e.$t("message.cargo.status")),1)])]),o("tbody",null,[(m(!0),E(L,null,H(l(T),(a,ae)=>(m(),E("tr",{key:a._id,onClick:F=>X(a)},[o("td",{"data-label":e.$t("message.cargo.code")},i(a.codigo),9,Pe),o("td",{"data-label":e.$t("message.cargo.name")},i(a.nombre),9,ke),o("td",{"data-label":e.$t("message.cargo.status")},i(e.$t(`message.cargo.statuses.${s(a.estado)}`)),9,Ce),o("td",we,[c(J,{type:"justify-start lg:justify-end","no-wrap":""},{default:r(()=>[O(c(D,{color:"success",icon:l(le),small:"",onClick:t[5]||(t[5]=F=>k.value=!0)},null,8,["icon"]),[[R,V.checkDelete&&a.estado===2]]),O(c(D,{color:"info",icon:l(ce),small:"",onClick:F=>A(a._id)},null,8,["icon","onClick"]),[[R,!V.checkDelete&&a.estado!==2]]),O(c(D,{color:"danger",icon:l(ie),small:"",onClick:t[6]||(t[6]=F=>C.value=!0)},null,8,["icon"]),[[R,!V.checkDelete&&a.estado!==2]])]),_:2},1024)])],8,_e))),128))])]),o("div",ye,[c(re,null,{default:r(()=>[c(J,null,{default:r(()=>[(m(!0),E(L,null,H(l(I),a=>(m(),_(D,{key:a,active:a===l(h)-1,label:a+1,color:a===l(h)?"lightDark":"whiteDark",small:"",onClick:ae=>M(a+1)},null,8,["active","label","color","onClick"]))),128))]),_:1}),o("small",null,"Page "+i(l(B))+" of "+i(l(w)),1)]),_:1})])],64))}},Me={__name:"IndexView",setup(V){const p=f([{name:"Inicio"}]),u=Q(),g=f(1),j=f(10),d=ue({switch:[]}),P=s=>{U.index(s).then(n=>{u.jobPositions=n,g.value=n.page,j.value=n.perPage})};P({page:g.value});const S=f(!1),k=()=>{b({page:g.value}),S.value=d.switch.length!==0},C=s=>{b({page:s})},N=(s,n)=>{T({sortBy:s,sortDesc:n})},h=s=>{U.getDelete(s).then(n=>{u.jobPositions=n,g.value=n.page,j.value=n.perPage})},b=s=>{d.switch.length===0?P({page:s}):h({page:s})},T=s=>{d.switch.length===0?P(s):h(s)};return(s,n)=>(m(),_(de,null,{default:r(()=>[c(he,null,{default:r(()=>{var $,w,B,I,M;return[c(K,{icon:l(ve),title:s.$t("message.cargo.cargos")},{default:r(()=>[c(D,{to:{name:"CargosCreate"},icon:l(be),label:s.$t("message.add_new"),color:"success",small:""},null,8,["icon","label"])]),_:1},8,["icon","title"]),c(me,{items:p.value},null,8,["items"]),c(ge,{label:""},{default:r(()=>[c($e,{modelValue:d.switch,"onUpdate:modelValue":n[0]||(n[0]=A=>d.switch=A),name:"sample-switch",type:"switch",options:{one:"Mostrar registros eliminados"},onChange:k},null,8,["modelValue"])]),_:1}),($=l(u))!=null&&$.jobPositions?W("",!0):(m(),_(K,{key:0,icon:l(z),title:"Empty variation"},null,8,["icon"])),(w=l(u))!=null&&w.jobPositions?W("",!0):(m(),_(fe,{key:1,color:"danger",icon:l(z)},{default:r(()=>[o("b",null,i(s.$t("message.empty_table"))+".",1),y(" When there's nothing to show ")]),_:1},8,["icon"])),(M=(I=(B=l(u))==null?void 0:B.jobPositions)==null?void 0:I.cargos)!=null&&M.length?(m(),_(Z,{key:2,class:"mb-6","has-table":""},{default:r(()=>[c(De,{checkDelete:S.value,onChangePage:C,onSort:N},null,8,["checkDelete"])]),_:1})):(m(),_(Z,{key:3},{default:r(()=>[c(pe)]),_:1}))]}),_:1})]),_:1}))}};export{Me as default};
